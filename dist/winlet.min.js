!function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){return r(t[a][1][e]||e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){t.exports=function(e,t){this.v=e,this.k=t},t.exports.__esModule=!0,t.exports.default=t.exports},{}],2:[function(e,t,n){t.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i},t.exports.__esModule=!0,t.exports.default=t.exports},{}],3:[function(e,t,n){t.exports=function(e){if(Array.isArray(e))return e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],4:[function(e,t,n){var i=e("./arrayLikeToArray.js");t.exports=function(e){if(Array.isArray(e))return i(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayLikeToArray.js":2}],5:[function(e,t,n){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],6:[function(e,t,n){function i(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}t.exports=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,l,"next",e)}function l(e){i(a,r,o,s,l,"throw",e)}s(void 0)})}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],7:[function(e,t,n){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],8:[function(e,t,n){var i=e("./isNativeReflectConstruct.js"),r=e("./setPrototypeOf.js");t.exports=function(e,t,n){if(i())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,t);var a=new(e.bind.apply(e,o));return n&&r(a,n.prototype),a},t.exports.__esModule=!0,t.exports.default=t.exports},{"./isNativeReflectConstruct.js":15,"./setPrototypeOf.js":29}],9:[function(e,t,n){var i=e("./toPropertyKey.js");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}t.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPropertyKey.js":33}],10:[function(e,t,n){var i=e("./toPropertyKey.js");t.exports=function(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPropertyKey.js":33}],11:[function(e,t,n){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],12:[function(e,t,n){var i=e("./setPrototypeOf.js");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./setPrototypeOf.js":29}],13:[function(e,t,n){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],14:[function(e,t,n){t.exports=function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],15:[function(e,t,n){function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(t.exports=i=function(){return!!e},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],16:[function(e,t,n){t.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{}],17:[function(e,t,n){t.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],18:[function(e,t,n){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],19:[function(e,t,n){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],20:[function(e,t,n){var i=e("./typeof.js").default,r=e("./assertThisInitialized.js");t.exports=function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./assertThisInitialized.js":5,"./typeof.js":34}],21:[function(e,t,n){var i=e("./regeneratorDefine.js");function r(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var e,n,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.toStringTag||"@@toStringTag";function l(t,r,o,a){var s=r&&r.prototype instanceof u?r:u,l=Object.create(s.prototype);return i(l,"_invoke",function(t,i,r){var o,a,s,l=0,u=r||[],p=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,a=0,s=e,d.n=n,c}};function f(t,i){for(a=t,s=i,n=0;!p&&l&&!r&&n<u.length;n++){var r,o=u[n],f=d.p,h=o[2];t>3?(r=h===i)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=f&&((r=t<2&&f<o[1])?(a=0,d.v=i,d.n=o[1]):f<h&&(r=t<3||o[0]>i||i>h)&&(o[4]=t,o[5]=i,d.n=h,a=0))}if(r||t>1)return c;throw p=!0,i}return function(r,u,h){if(l>1)throw TypeError("Generator is already running");for(p&&1===u&&f(u,h),a=u,s=h;(n=a<2?e:s)||!p;){o||(a?a<3?(a>1&&(d.n=-1),f(a,s)):d.n=s:d.v=s);try{if(l=2,o){if(a||(r="next"),n=o[r]){if(!(n=n.call(o,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,a<2&&(a=0)}else 1===a&&(n=o.return)&&n.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),a=1);o=e}else if((n=(p=d.n<0)?s:t.call(i,d))!==c)break}catch(t){o=e,a=1,s=t}finally{l=1}}return{value:n,done:p}}}(t,o,a),!0),l}var c={};function u(){}function p(){}function d(){}n=Object.getPrototypeOf;var f=[][a]?n(n([][a]())):(i(n={},a,function(){return this}),n),h=d.prototype=u.prototype=Object.create(f);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,i(e,s,"GeneratorFunction")),e.prototype=Object.create(h),e}return p.prototype=d,i(h,"constructor",d),i(d,"constructor",p),p.displayName="GeneratorFunction",i(d,s,"GeneratorFunction"),i(h),i(h,s,"Generator"),i(h,a,function(){return this}),i(h,"toString",function(){return"[object Generator]"}),(t.exports=r=function(){return{w:l,m:b}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},{"./regeneratorDefine.js":25}],22:[function(e,t,n){var i=e("./regeneratorAsyncGen.js");t.exports=function(e,t,n,r,o){var a=i(e,t,n,r,o);return a.next().then(function(e){return e.done?e.value:a.next()})},t.exports.__esModule=!0,t.exports.default=t.exports},{"./regeneratorAsyncGen.js":23}],23:[function(e,t,n){var i=e("./regenerator.js"),r=e("./regeneratorAsyncIterator.js");t.exports=function(e,t,n,o,a){return new r(i().w(e,t,n,o),a||Promise)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./regenerator.js":21,"./regeneratorAsyncIterator.js":24}],24:[function(e,t,n){var i=e("./OverloadYield.js"),r=e("./regeneratorDefine.js");t.exports=function e(t,n){function o(e,r,a,s){try{var l=t[e](r),c=l.value;return c instanceof i?n.resolve(c.v).then(function(e){o("next",e,a,s)},function(e){o("throw",e,a,s)}):n.resolve(c).then(function(e){l.value=e,a(l)},function(e){return o("throw",e,a,s)})}catch(e){s(e)}}var a;this.next||(r(e.prototype),r(e.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),r(this,"_invoke",function(e,t,i){function r(){return new n(function(t,n){o(e,i,t,n)})}return a=a?a.then(r,r):r()},!0)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./OverloadYield.js":1,"./regeneratorDefine.js":25}],25:[function(e,t,n){function i(e,n,r,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}t.exports=i=function(e,t,n,r){if(t)a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var o=function(t,n){i(e,t,function(e){return this._invoke(t,n,e)})};o("next",0),o("throw",1),o("return",2)}},t.exports.__esModule=!0,t.exports.default=t.exports,i(e,n,r,o)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],26:[function(e,t,n){t.exports=function(e){var t=Object(e),n=[];for(var i in t)n.unshift(i);return function e(){for(;n.length;)if((i=n.pop())in t)return e.value=i,e.done=!1,e;return e.done=!0,e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],27:[function(e,t,n){var i=e("./OverloadYield.js"),r=e("./regenerator.js"),o=e("./regeneratorAsync.js"),a=e("./regeneratorAsyncGen.js"),s=e("./regeneratorAsyncIterator.js"),l=e("./regeneratorKeys.js"),c=e("./regeneratorValues.js");function u(){"use strict";var e=r(),n=e.m(u),p=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function d(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))}var f={throw:1,return:2,break:3,continue:3};function h(e){var t,n;return function(i){t||(t={stop:function(){return n(i.a,2)},catch:function(){return i.v},abrupt:function(e,t){return n(i.a,f[e],t)},delegateYield:function(e,r,o){return t.resultName=r,n(i.d,c(e),o)},finish:function(e){return n(i.f,e)}},n=function(e,n,r){i.p=t.prev,i.n=t.next;try{return e(n,r)}finally{t.next=i.n}}),t.resultName&&(t[t.resultName]=i.v,t.resultName=void 0),t.sent=i.v,t.next=i.n;try{return e.call(this,t)}finally{i.p=t.prev,i.n=t.next}}}return(t.exports=u=function(){return{wrap:function(t,n,i,r){return e.w(h(t),n,i,r&&r.reverse())},isGeneratorFunction:d,mark:e.m,awrap:function(e,t){return new i(e,t)},AsyncIterator:s,async:function(e,t,n,i,r){return(d(t)?a:o)(h(e),t,n,i,r)},keys:l,values:c}},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports},{"./OverloadYield.js":1,"./regenerator.js":21,"./regeneratorAsync.js":22,"./regeneratorAsyncGen.js":23,"./regeneratorAsyncIterator.js":24,"./regeneratorKeys.js":26,"./regeneratorValues.js":28}],28:[function(e,t,n){var i=e("./typeof.js").default;t.exports=function(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(i(e)+" is not iterable")},t.exports.__esModule=!0,t.exports.default=t.exports},{"./typeof.js":34}],29:[function(e,t,n){function i(e,n){return t.exports=i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},t.exports.__esModule=!0,t.exports.default=t.exports,i(e,n)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],30:[function(e,t,n){var i=e("./arrayWithHoles.js"),r=e("./iterableToArrayLimit.js"),o=e("./unsupportedIterableToArray.js"),a=e("./nonIterableRest.js");t.exports=function(e,t){return i(e)||r(e,t)||o(e,t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayWithHoles.js":3,"./iterableToArrayLimit.js":17,"./nonIterableRest.js":18,"./unsupportedIterableToArray.js":35}],31:[function(e,t,n){var i=e("./arrayWithoutHoles.js"),r=e("./iterableToArray.js"),o=e("./unsupportedIterableToArray.js"),a=e("./nonIterableSpread.js");t.exports=function(e){return i(e)||r(e)||o(e)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayWithoutHoles.js":4,"./iterableToArray.js":16,"./nonIterableSpread.js":19,"./unsupportedIterableToArray.js":35}],32:[function(e,t,n){var i=e("./typeof.js").default;t.exports=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./typeof.js":34}],33:[function(e,t,n){var i=e("./typeof.js").default,r=e("./toPrimitive.js");t.exports=function(e){var t=r(e,"string");return"symbol"==i(t)?t:t+""},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPrimitive.js":32,"./typeof.js":34}],34:[function(e,t,n){function i(e){return t.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],35:[function(e,t,n){var i=e("./arrayLikeToArray.js");t.exports=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayLikeToArray.js":2}],36:[function(e,t,n){var i=e("./getPrototypeOf.js"),r=e("./setPrototypeOf.js"),o=e("./isNativeFunction.js"),a=e("./construct.js");function s(e){var n="function"==typeof Map?new Map:void 0;return t.exports=s=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,i(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports,s(e)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},{"./construct.js":8,"./getPrototypeOf.js":11,"./isNativeFunction.js":14,"./setPrototypeOf.js":29}],37:[function(e,t,n){var i=e("../helpers/regeneratorRuntime")();t.exports=i;try{regeneratorRuntime=i}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},{"../helpers/regeneratorRuntime":27}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.defaultConfig=void 0;n.defaultConfig={id:null,ifExists:"focus",title:"New Window",icon:null,x:"auto",y:"auto",width:500,height:400,minWidth:200,minHeight:150,virtualizable:!0,animationOrigin:null,windowOptions:{resizableX:!0,resizableY:!0,movable:!0,closable:!0,minimizable:!0,maximizable:!0,maximizableOnDblClick:!0,focus:!0,alwaysOnTop:!1,useGhostWindow:!1,opacity:1,modal:!1},content:{html:"",iframe:{src:"",srcdoc:"",allow:"",referrerPolicy:"",loading:"lazy",sandbox:"",loadWinLet:!1},template:""},splitView:{direction:"horizontal",panes:[]},statusBar:{enabled:!1,text:"",allowHTML:!1},search:{enabled:!1,caseSensitive:!1,showCaseSensitiveButton:!0,showRegexButton:!0,showWholeWordButton:!0,targetSelector:""},menu:[],menuStyle:"default",tabs:[],tabStyle:"default",tabOptions:{reorderable:!1,closable:!1,addable:!1,detachable:!1,mergeable:!1,allowIncomingMerge:!1,onAdd:void 0,onMergeAttempt:void 0},taskbarOptions:{showIconOnly:!0},contextMenu:[],customControls:[],enableShortcuts:!0,controlsPosition:"right",showLoadingIndicator:!0,lazyLoad:!1,disableMoveEvent:!1,disableResizeEvent:!1,virtualizationRestoreMode:"auto",showVirtualizationRefreshButton:!0,onOpen:function(){},onClose:function(){},onFocus:function(){},onBlur:function(){},onResize:function(){},onMove:function(){},onReload:function(){},onBeforeClose:function(){},onMoveStart:function(){},onMoveEnd:function(){},onResizeStart:function(){},onResizeEnd:function(){},_isPopup:!1,_parent:null,_taskbarItem:null}},{}],39:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.WinLetError=n.WinLetBaseError=n.SimpleError=void 0;var r=i(e("@babel/runtime/helpers/createClass")),o=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/possibleConstructorReturn")),s=i(e("@babel/runtime/helpers/getPrototypeOf")),l=i(e("@babel/runtime/helpers/inherits")),c=i(e("@babel/runtime/helpers/wrapNativeSuper"));function u(e,t,n){return t=(0,s.default)(t),(0,a.default)(e,p()?Reflect.construct(t,n||[],(0,s.default)(e).constructor):t.apply(e,n))}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p=function(){return!!e})()}var d=n.WinLetBaseError=function(e){function t(e){var n;(0,o.default)(this,t),(n=u(this,t,[e])).name=n.constructor.name;var i=Error;return i.captureStackTrace&&i.captureStackTrace(n,n.constructor),n}return(0,l.default)(t,e),(0,r.default)(t)}((0,c.default)(Error)),f=n.SimpleError=function(e){function t(e){return(0,o.default)(this,t),u(this,t,[e])}return(0,l.default)(t,e),(0,r.default)(t)}(d);n.WinLetError=function(e){function t(){return(0,o.default)(this,t),u(this,t,arguments)}return(0,l.default)(t,e),(0,r.default)(t)}(f)},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20,"@babel/runtime/helpers/wrapNativeSuper":36}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TIMEOUT_RESULT=n.LIBRARY_NAME=n.CLOSE_BUTTON_RESULT=void 0;n.LIBRARY_NAME="winlet",n.TIMEOUT_RESULT=Symbol("timeout"),n.CLOSE_BUTTON_RESULT=Symbol("close")},{}],41:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("@babel/runtime/regenerator")),o=i(e("@babel/runtime/helpers/asyncToGenerator")),a=i(e("@babel/runtime/helpers/toConsumableArray")),s=i(e("@babel/runtime/helpers/typeof")),l=i(e("@babel/runtime/helpers/classCallCheck")),c=i(e("@babel/runtime/helpers/createClass")),u=i(e("@babel/runtime/helpers/possibleConstructorReturn")),p=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits")),f=i(e("@babel/runtime/helpers/defineProperty")),h=e("../const/config"),b=e("../const/errors"),v=e("../const/types"),x=i(e("../libs/baseclass")),m=i(e("../libs/utils")),g=i(e("./window_manager"));function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){(0,f.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(E=function(){return!!e})()}n.default=function(e){function t(e,n){var i,r,o,a;if((0,l.default)(this,t),r=this,o=t,o=(0,p.default)(o),i=(0,u.default)(r,E()?Reflect.construct(o,a||[],(0,p.default)(r).constructor):o.apply(r,a)),(0,f.default)(i,"state","normal"),(0,f.default)(i,"lastState",{x:0,y:0,width:0,height:0}),(0,f.default)(i,"focused",!1),(0,f.default)(i,"DRAG_THRESHOLD",5),(0,f.default)(i,"tabs",[]),(0,f.default)(i,"addTabBtn",null),(0,f.default)(i,"isMenuOpen",!1),(0,f.default)(i,"boundGlobalClickHandler",null),(0,f.default)(i,"statusBarEl",null),(0,f.default)(i,"searchBarEl",null),(0,f.default)(i,"searchResults",[]),(0,f.default)(i,"currentSearchIndex",-1),(0,f.default)(i,"searchOptionsState",{caseSensitive:!1,regex:!1,wholeWord:!1}),(0,f.default)(i,"MOBILE_CONTEXT_MENU_TIMEOUT",700),(0,f.default)(i,"contextMenuTimer",null),(0,f.default)(i,"popupCloseCallback",null),(0,f.default)(i,"childManager",null),(0,f.default)(i,"debugOverlayEl",null),(0,f.default)(i,"isContentLoaded",!1),(0,f.default)(i,"throttledEmitMove",null),(0,f.default)(i,"throttledEmitResize",null),(0,f.default)(i,"virtualizationLevel","none"),(0,f.default)(i,"minimizeVirtualizeTimer",null),(0,f.default)(i,"virtualizationHierarchy",["none","frozen","suspended","unloaded"]),i.id=e.id||m.default.generateId("".concat(v.LIBRARY_NAME,"-window")),e.id){var s=document.getElementById(e.id);if(s&&s.classList.contains("".concat(v.LIBRARY_NAME,"-window")))throw new b.WinLetError('WinLet: Window with ID "'.concat(e.id,'" already exists. New window will not be created.'))}i.manager=n,i.options=m.default.deepMerge(m.default.deepCopy(h.defaultConfig),e),i.parentWindow=e._parent||null,i.searchOptionsState.caseSensitive=!!i.options.search.caseSensitive;var c=i.manager.getGlobalConfig().eventThrottling;if(!i.options.disableMoveEvent){var d=null==c?void 0:c.moveDelay,x=function(){return i.emit("move",i)};i.throttledEmitMove=d&&d>0?m.default.throttle(x,d):x}if(!i.options.disableResizeEvent){var g=null==c?void 0:c.resizeDelay,y=function(){return i.emit("resize",i)};i.throttledEmitResize=g&&g>0?m.default.throttle(y,g):y}return i.el=i.createDOM(),i.options._isPopup&&i.el.classList.add("".concat(v.LIBRARY_NAME,"-popup-window")),"merged"===i.options.tabStyle&&i.el.classList.add("".concat(v.LIBRARY_NAME,"-tab-style-merged")),"merged"===i.options.menuStyle&&i.el.classList.add("".concat(v.LIBRARY_NAME,"-menu-style-merged")),i.options.windowOptions.alwaysOnTop&&i.el.classList.add("".concat(v.LIBRARY_NAME,"-always-on-top")),i.options.windowOptions.modal&&(i.el.classList.add("".concat(v.LIBRARY_NAME,"-modal")),i.el.setAttribute("aria-modal","true")),i.titleBarEl=i.el.querySelector(".".concat(v.LIBRARY_NAME,"-title-bar")),i.iconEl=i.el.querySelector(".".concat(v.LIBRARY_NAME,"-icon")),i.titleEl=i.el.querySelector(".".concat(v.LIBRARY_NAME,"-title")),i.mainContentEl=i.el.querySelector(".".concat(v.LIBRARY_NAME,"-main-content")),i.contentEl=i.mainContentEl.querySelector(".".concat(v.LIBRARY_NAME,"-content")),i.loaderEl=i.mainContentEl.querySelector(".".concat(v.LIBRARY_NAME,"-loader-overlay")),i.debugOverlayEl=i.el.querySelector(".".concat(v.LIBRARY_NAME,"-debug-overlay")),i.statusBarEl=i.el.querySelector(".".concat(v.LIBRARY_NAME,"-statusbar")),i.applyOptions(),i.setupEventListeners(),i.updateDebugOverlay(),i.options.onOpen&&i.on("open",i.options.onOpen),i.options.onClose&&i.on("close",i.options.onClose),i.options.onBeforeClose&&i.on("before-close",i.options.onBeforeClose),i.options.onFocus&&i.on("focus",i.options.onFocus),i.options.onBlur&&i.on("blur",i.options.onBlur),i.options.onMove&&i.on("move",i.options.onMove),i.options.onMoveStart&&i.on("move-start",i.options.onMoveStart),i.options.onMoveEnd&&i.on("move-end",i.options.onMoveEnd),i.options.onResize&&i.on("resize",i.options.onResize),i.options.onResizeStart&&i.on("resize-start",i.options.onResizeStart),i.options.onResizeEnd&&i.on("resize-end",i.options.onResizeEnd),i.options.onReload&&i.on("reload",i.options.onReload),i.emit("open",i),i}return(0,d.default)(t,e),(0,c.default)(t,[{key:"_calculateTransformOrigin",value:function(e){var t=0,n=0,i=this.el.getBoundingClientRect();if(!e&&this.manager.getGlobalConfig().animateFromTaskbar&&this.options._taskbarItem&&(e=this.options._taskbarItem),e instanceof HTMLElement){var r=e.getBoundingClientRect();t=r.left+r.width/2,n=r.top+r.height/2}else if("string"==typeof e){var o=document.querySelector(e);if(o){var a=o.getBoundingClientRect();t=a.left+a.width/2,n=a.top+a.height/2}}else if(e instanceof MouseEvent)t=e.clientX,n=e.clientY;else{if(!(e&&"object"===(0,s.default)(e)&&"x"in e&&"y"in e))return"50% 50%";t=e.x,n=e.y}var l=t-i.left,c=n-i.top;return"".concat(l,"px ").concat(c,"px")}},{key:"createDOM",value:function(){var e,t=document.createElement("div");t.className="".concat(v.LIBRARY_NAME,"-window"),t.id=this.id,t.setAttribute("role","application"),t.setAttribute("aria-labelledby","".concat(this.id,"-title")),"minimized"===this.state&&(t.setAttribute("inert",""),t.setAttribute("aria-hidden","true"));var n=[];this.options.windowOptions.resizableY&&n.push('<div class="'.concat(v.LIBRARY_NAME,"-resize-handle ").concat(v.LIBRARY_NAME,'-n"></div>'),'<div class="'.concat(v.LIBRARY_NAME,"-resize-handle ").concat(v.LIBRARY_NAME,'-s"></div>')),this.options.windowOptions.resizableX&&n.push('<div class="'.concat(v.LIBRARY_NAME,"-resize-handle ").concat(v.LIBRARY_NAME,'-w"></div>'),'<div class="'.concat(v.LIBRARY_NAME,"-resize-handle ").concat(v.LIBRARY_NAME,'-e"></div>')),this.options.windowOptions.resizableX&&this.options.windowOptions.resizableY&&n.push('<div class="'.concat(v.LIBRARY_NAME,"-resize-handle ").concat(v.LIBRARY_NAME,'-nw"></div>'),'<div class="'.concat(v.LIBRARY_NAME,"-resize-handle ").concat(v.LIBRARY_NAME,'-ne"></div>'),'<div class="'.concat(v.LIBRARY_NAME,"-resize-handle ").concat(v.LIBRARY_NAME,'-sw"></div>'),'<div class="'.concat(v.LIBRARY_NAME,"-resize-handle ").concat(v.LIBRARY_NAME,'-se"></div>'));var i=n.join(""),r=this.options.menu.length>0,o=this.options.tabs.length>0,a="merged"===this.options.menuStyle&&r,s="merged"===this.options.tabStyle&&o,l=(null!==(e=this.options.customControls)&&void 0!==e?e:[]).map(function(e){return'<button class="'.concat(v.LIBRARY_NAME,"-control-btn ").concat(v.LIBRARY_NAME,'-custom-control-btn" data-name="').concat(e.name,'" title="').concat(e.title||"",'" aria-label="').concat(e.title||e.name,'">').concat(e.html,"</button>")}).join(""),c='<button class="'.concat(v.LIBRARY_NAME,"-control-btn ").concat(v.LIBRARY_NAME,'-refresh-btn" title="Refresh Content" aria-label="Refresh Content"><i class="fas fa-sync-alt"></i></button>'),u='\n            <div class="'.concat(v.LIBRARY_NAME,'-controls">\n\t\t\t\t').concat(l,"\n\t\t\t\t").concat(c,"\n                ").concat(this.options.windowOptions.minimizable?'<input class="'.concat(v.LIBRARY_NAME,"-control-btn ").concat(v.LIBRARY_NAME,'-minimize-btn" type="button" value="＿" title="Minimize" aria-label="Minimize"/>'):"","\n                ").concat(this.options.windowOptions.maximizable?'<input class="'.concat(v.LIBRARY_NAME,"-control-btn ").concat(v.LIBRARY_NAME,'-maximize-btn" type="button" value="□" title="Maximize" aria-label="Maximize"/>'):"","\n                ").concat(this.options.windowOptions.closable?'<input class="'.concat(v.LIBRARY_NAME,"-control-btn ").concat(v.LIBRARY_NAME,'-close-btn" type="button" value="╳" title="Close" aria-label="Close"/>'):"","\n            </div>"),p='\n            <div class="'.concat(v.LIBRARY_NAME,'-icon"></div>\n            ').concat(a?'<div class="'.concat(v.LIBRARY_NAME,'-menu-bar"></div>'):"",'\n            <div id="').concat(this.id,'-title" class="').concat(v.LIBRARY_NAME,'-title"></div>\n            ').concat(s?'<div class="'.concat(v.LIBRARY_NAME,'-tab-bar"></div>'):"","\n            ").concat(u,"\n        "),d='\n            <div class="'.concat(v.LIBRARY_NAME,'-loader-overlay" style="display: none;">\n                <div class="').concat(v.LIBRARY_NAME,'-loader-spinner"></div>\n            </div>\n        '),f=this.options.statusBar.enabled?'<div class="'.concat(v.LIBRARY_NAME,'-statusbar"></div>'):"",h='<div class="'.concat(v.LIBRARY_NAME,'-debug-overlay"></div>');return t.innerHTML="\n\t\t\t".concat(h,'\n            <div class="').concat(v.LIBRARY_NAME,"-title-bar ").concat(v.LIBRARY_NAME,'-us-none">\n                ').concat(p,'\n            </div>\n            <div class="').concat(v.LIBRARY_NAME,'-main-content">\n                ').concat(!a&&r?'<div class="'.concat(v.LIBRARY_NAME,'-menu-bar" role="menubar"></div>'):"","\n                ").concat(!s&&o?'<div class="'.concat(v.LIBRARY_NAME,'-tab-bar" role="tablist"></div>'):"",'\n                <div class="').concat(v.LIBRARY_NAME,'-content"></div>\n\t\t\t\t').concat(d,"\n            </div>\n\t\t\t").concat(f,"\n            ").concat(i,"\n        "),t}},{key:"_renderInitialContent",value:function(){this.isContentLoaded||(this.options.splitView&&this.options.splitView.panes.length>0?this.createSplitView(this.contentEl,this.options.splitView):this.options.tabs.length>0?this.createTabs():this.renderContent(this.contentEl,this.options.content),this.isContentLoaded=!0)}},{key:"applyOptions",value:function(){this.setTitle(this.options.title),this.setIcon(this.options.icon),this.setSize(this.options.width,this.options.height),this.el.style.minWidth="".concat(this.options.minWidth,"px"),this.el.style.minHeight="".concat(this.options.minHeight,"px"),"left"===this.options.controlsPosition&&this.titleBarEl.classList.add("".concat(v.LIBRARY_NAME,"-controls-left")),this.options.lazyLoad?this.showLoader():this._renderInitialContent(),this.options.menu.length>0&&this.createMenu(),this.statusBarEl&&this.setStatusBarText(this.options.statusBar.text||"")}},{key:"showLoader",value:function(){this.options.showLoadingIndicator&&(this.loaderEl.style.display="flex")}},{key:"hideLoader",value:function(){this.loaderEl.style.display="none"}},{key:"renderContent",value:function(e,t){var n=this;if(e.innerHTML="",this.hideLoader(),"unloaded"!==this.virtualizationLevel)if(t.template){var i=document.querySelector(t.template);"TEMPLATE"===(null==i?void 0:i.tagName)?e.appendChild(i.content.cloneNode(!0)):(e.innerHTML="Error: Template not found or invalid.",console.warn("WinLet Warning: Template not found or invalid."))}else if(t.html)e.innerHTML=t.html;else if(m.default.isNonEmptyObject(t.iframe)&&(t.iframe.src||t.iframe.srcdoc)){this.showLoader();var r=document.createElement("iframe"),o=t.iframe;if(o.src&&(r.src=o.src),o.srcdoc){var a=o.srcdoc;if(o.loadWinLet){var s=this.manager.getGlobalConfig();if(s.libraryPath){var l='<script src="'.concat(s.libraryPath,'"><\/script>');a='<!DOCTYPE html><html><head><meta charset="UTF-8">'.concat(l).concat("<script>document.addEventListener('DOMContentLoaded', () => window.WinLet.init({ container: document.body }));<\/script>","</head><body>").concat(o.srcdoc,"</body></html>")}else console.warn("WinLet Warning: `loadWinLet` is true, but `libraryPath` is not set in global config.")}r.srcdoc=a}o.allow&&(r.allow=o.allow),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.loading&&(r.loading=o.loading),o.sandbox&&(Array.isArray(o.sandbox)||(o.sandbox=[o.sandbox]),o.sandbox.length>0&&r.setAttribute("sandbox",o.sandbox.join(" "))),r.addEventListener("load",function(){return n.hideLoader()}),r.addEventListener("error",function(){return n.hideLoader()}),e.appendChild(r)}else e.innerHTML=""}},{key:"closeAllMenus",value:function(){this.el.querySelectorAll(".".concat(v.LIBRARY_NAME,"-menu-item > .").concat(v.LIBRARY_NAME,"-menu-dropdown")).forEach(function(e){e.style.display="none"}),this.isMenuOpen=!1}},{key:"createMenu",value:function(){var e=this,t=this.el.querySelector(".".concat(v.LIBRARY_NAME,"-menu-bar"));t.innerHTML="",this.options.menu.forEach(function(n){var i,r=document.createElement("div");if(r.className="".concat(v.LIBRARY_NAME,"-menu-item ").concat(v.LIBRARY_NAME,"-us-none"),r.textContent=null!==(i=n.name)&&void 0!==i?i:"",r.setAttribute("role","menu"),n.items){var o=e.createDropdownMenu(n.items);r.addEventListener("click",function(t){t.stopPropagation();var n="block"===o.style.display;e.closeAllMenus(),n||(o.style.display="block",e.isMenuOpen=!0)},{passive:!1}),r.addEventListener("mouseenter",function(){e.isMenuOpen&&(e.closeAllMenus(),o.style.display="block",e.isMenuOpen=!0)},{passive:!0}),r.appendChild(o)}t.appendChild(r)})}},{key:"createDropdownMenu",value:function(e){var t=this,n=document.createElement("ul");return n.className="".concat(v.LIBRARY_NAME,"-menu-dropdown"),e.forEach(function(e){var i=document.createElement("li");if(e.separator)i.className="".concat(v.LIBRARY_NAME,"-separator");else{var r,o=null!==(r=e.name)&&void 0!==r?r:"";if(o="<span>".concat(o,"</span>"),t.options.enableShortcuts&&e.shortcut&&(o+='<span class="'.concat(v.LIBRARY_NAME,'-shortcut-text">(').concat(e.shortcut,")</span>")),i.innerHTML='<div class="'.concat(v.LIBRARY_NAME,'-menu-dropdown-item" role="menuitem">').concat(o,"</div>"),i.addEventListener("click",function(n){var i;n.stopPropagation(),t.closeAllMenus(),null===(i=e.action)||void 0===i||i.call(e,t)},{passive:!1}),e.items){i.classList.add("".concat(v.LIBRARY_NAME,"-has-submenu"));var a=t.createDropdownMenu(e.items);i.appendChild(a)}}n.appendChild(i)}),n}},{key:"createTabs",value:function(){var e,t=this,n=this.el.querySelector(".".concat(v.LIBRARY_NAME,"-tab-bar"));n.innerHTML="",this.tabs=[];var i=null!==(e=this.options.tabOptions)&&void 0!==e?e:{};this.options.tabs.forEach(function(e,n){t.createTabElement(e,n)}),i.addable&&(this.addTabBtn=document.createElement("div"),this.addTabBtn.className="".concat(v.LIBRARY_NAME,"-tab-add-btn"),this.addTabBtn.textContent="+",this.addTabBtn.addEventListener("click",function(e){var n,r=null===(n=i.onAdd)||void 0===n?void 0:n.call(i,t);r&&t.addTab(r)},{passive:!0}),n.appendChild(this.addTabBtn)),this.setupTabBarDropZone(),this.tabs.length>0&&this.activateTab(0)}},{key:"setupTabBarDropZone",value:function(){var e=this,t=this.el.querySelector(".".concat(v.LIBRARY_NAME,"-tab-bar"));t&&this.options.tabOptions.reorderable&&(t.addEventListener("dragover",function(e){var n;null!==(n=e.dataTransfer)&&void 0!==n&&n.types.includes("application/winlet-tab")&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),t.classList.add("".concat(v.LIBRARY_NAME,"-drag-over")))},{passive:!1}),t.addEventListener("dragleave",function(){t.classList.remove("".concat(v.LIBRARY_NAME,"-drag-over"))},{passive:!0}),t.addEventListener("drop",function(n){var i,r,o,a;n.preventDefault(),t.classList.remove("".concat(v.LIBRARY_NAME,"-drag-over"));var s=null===(i=n.dataTransfer)||void 0===i?void 0:i.getData("application/winlet-tab"),l=null===(r=n.dataTransfer)||void 0===r?void 0:r.getData("application/winlet-source-window-id"),c=null===(o=n.dataTransfer)||void 0===o?void 0:o.getData("text/plain");if(s&&l&&c){var u=null===(a=e.manager.container)||void 0===a?void 0:a.querySelector(".".concat(v.LIBRARY_NAME,"-tab.").concat(v.LIBRARY_NAME,"-dragging"));if(l!==e.id){var p=e.manager.getWindow(l);if(p){var d,f,h=p.options.tabOptions,b=e.options.tabOptions,x=null!==(d=h.mergeable)&&void 0!==d?d:h.detachable,m=null===(f=b.allowIncomingMerge)||void 0===f||f,g=!b.onMergeAttempt||b.onMergeAttempt(p,e);if(!x||!m||!g)return;var y=JSON.parse(s);e.addTab(y,!0),p.closeTab(parseInt(c,10))}}else u&&e.updateTabOrderFromDOM()}},{passive:!1}))}},{key:"createTabElement",value:function(e,t){var n,i=this,r=this.el.querySelector(".".concat(v.LIBRARY_NAME,"-tab-bar")),o=null!==(n=this.options.tabOptions)&&void 0!==n?n:{},a=document.createElement("div");a.className="".concat(v.LIBRARY_NAME,"-tab"),a.setAttribute("role","tab"),a.dataset.tabId=t.toString();var s=document.createElement("span");if(s.textContent=e.title,a.appendChild(s),r.insertBefore(a,this.addTabBtn),o.closable){var l=document.createElement("span");l.className="".concat(v.LIBRARY_NAME,"-tab-close-btn"),l.innerHTML="&times;",l.addEventListener("click",function(e){e.stopPropagation();var t=i.tabs.findIndex(function(e){return e.tabEl===a});-1!==t&&i.closeTab(t)},{passive:!1}),a.appendChild(l)}var c=document.createElement("div");c.className="".concat(v.LIBRARY_NAME,"-tab-content"),c.setAttribute("role","tabpanel"),this.contentEl.appendChild(c),this.renderContent(c,e.content),a.addEventListener("click",function(e){i.activateTab(+a.dataset.tabId)},{passive:!1}),this.tabs.splice(t,0,{tabEl:a,contentEl:c}),o.reorderable&&this.makeTabReorderable(a)}},{key:"makeTabReorderable",value:function(e){var t=this;e.draggable=!0,e.addEventListener("dragstart",function(n){if(n.dataTransfer.setData("text/plain",e.dataset.tabId),e.classList.add("".concat(v.LIBRARY_NAME,"-dragging")),t.options.tabOptions.detachable){var i=parseInt(e.dataset.tabId,10);if(!isNaN(i)&&t.options.tabs[i]){var r=t.options.tabs[i];n.dataTransfer.setData("application/winlet-tab",JSON.stringify(r)),n.dataTransfer.setData("application/winlet-source-window-id",t.id),t.manager.onTabDragStart(t.id)}}},{passive:!0}),e.addEventListener("dragend",function(){e.classList.remove("".concat(v.LIBRARY_NAME,"-dragging")),t.manager.onTabDragEnd()},{passive:!0}),e.addEventListener("dragover",function(n){var i;if((null===(i=t.manager.draggingTabInfo)||void 0===i?void 0:i.sourceWindowId)===t.id){n.preventDefault();var r=document.querySelector(".".concat(v.LIBRARY_NAME,"-tab.").concat(v.LIBRARY_NAME,"-dragging"));if(r&&r!==e){var o=e.getBoundingClientRect(),a=n.clientX>o.left+o.width/2,s=e.parentNode;a?s.insertBefore(r,e.nextSibling):s.insertBefore(r,e)}}},{passive:!1}),e.addEventListener("drop",function(e){e.preventDefault()},{passive:!1})}},{key:"closeTab",value:function(e){var t,n=null===(t=this.tabs[e])||void 0===t?void 0:t.tabEl.classList.contains("".concat(v.LIBRARY_NAME,"-active"));if(this.tabs[e].tabEl.remove(),this.tabs[e].contentEl.remove(),this.tabs.splice(e,1),this.options.tabs.splice(e,1),this.tabs.forEach(function(e,t){return e.tabEl.dataset.tabId=t.toString()}),this.tabs.length>0){if(n){var i=Math.max(0,e-1);this.activateTab(i)}}else this.close()}},{key:"activateTab",value:function(e){e<0||e>=this.tabs.length||(this.tabs.forEach(function(t,n){var i=n===e;t.tabEl.classList.toggle("".concat(v.LIBRARY_NAME,"-active"),i),t.tabEl.setAttribute("aria-selected",String(i)),t.contentEl.classList.toggle("".concat(v.LIBRARY_NAME,"-active"),i)}),this.searchBarEl&&this._performSearch())}},{key:"addTab",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.options.tabs.push(e);var n=this.options.tabs.length-1;this.createTabElement(e,n),t&&(this.activateTab(n),this.focus())}},{key:"getTabs",value:function(){return this.tabs}},{key:"updateTabOrderFromDOM",value:function(){var e=Array.from(this.el.querySelectorAll(".".concat(v.LIBRARY_NAME,"-tab-bar > .").concat(v.LIBRARY_NAME,"-tab"))),t=[],n=[],i=(0,a.default)(this.tabs),r=(0,a.default)(this.options.tabs);e.forEach(function(e){var o=i.findIndex(function(t){return t.tabEl===e});-1!==o&&(t.push(i[o]),n.push(r[o]))}),this.tabs=t,this.options.tabs=n,this.tabs.forEach(function(e,t){return e.tabEl.dataset.tabId=t.toString()})}},{key:"createSplitView",value:function(e,t){var n=this;e.innerHTML="";var i=document.createElement("div");i.className="".concat(v.LIBRARY_NAME,"-split-view ").concat(v.LIBRARY_NAME,"-split-view-").concat(t.direction),e.appendChild(i),t.panes.forEach(function(e,r){var o=document.createElement("div");if(o.className="".concat(v.LIBRARY_NAME,"-split-pane"),o.id=e.id,e.size?o.style.flex="0 0 ".concat(e.size):o.style.flex="1 1 0",e.minSize&&("horizontal"===t.direction?o.style.minWidth=e.minSize:o.style.minHeight=e.minSize),n.renderContent(o,e.content),i.appendChild(o),r<t.panes.length-1){var a=document.createElement("div");a.className="".concat(v.LIBRARY_NAME,"-split-resizer"),!1!==e.resizable?n.makePaneResizable(a,o,t.direction):a.style.pointerEvents="none",i.appendChild(a)}})}},{key:"makePaneResizable",value:function(e,t,n){e.addEventListener("pointerdown",function(e){e.preventDefault();var i=e.clientX,r=e.clientY,o=t.offsetWidth,a=t.offsetHeight,s=function(e){if("horizontal"===n){var s=o+(e.clientX-i);t.style.flexBasis="".concat(s,"px")}else{var l=a+(e.clientY-r);t.style.flexBasis="".concat(l,"px")}},l=function(){document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",l)};document.addEventListener("pointermove",s,{passive:!0}),document.addEventListener("pointerup",l,{passive:!0})},{passive:!1})}},{key:"setupEventListeners",value:function(){var e=this;this.el.addEventListener("click",function(){return e.focus()},!0),this.el.addEventListener("focusin",function(){return e.focus()},{passive:!0}),this.boundGlobalClickHandler=function(){e.isMenuOpen&&e.closeAllMenus()},document.addEventListener("click",this.boundGlobalClickHandler,{passive:!0});var t=this.el.querySelector(".".concat(v.LIBRARY_NAME,"-controls"));if(null==t||t.addEventListener("click",function(t){var n=t.target.closest(".".concat(v.LIBRARY_NAME,"-control-btn"));if(n)if(n.classList.contains("".concat(v.LIBRARY_NAME,"-close-btn"))){var i;if(t.stopPropagation(),e.options._isPopup)null===(i=e.popupCloseCallback)||void 0===i||i.call(e,v.CLOSE_BUTTON_RESULT);e.close()}else if(n.classList.contains("".concat(v.LIBRARY_NAME,"-maximize-btn")))t.stopPropagation(),e.toggleMaximize();else if(n.classList.contains("".concat(v.LIBRARY_NAME,"-minimize-btn")))t.stopPropagation(),e.minimize();else if(n.classList.contains("".concat(v.LIBRARY_NAME,"-refresh-btn")))t.stopPropagation(),e.unvirtualize();else if(n.classList.contains("".concat(v.LIBRARY_NAME,"-custom-control-btn"))){t.stopPropagation();var r=n.dataset.name,o=e.options.customControls.find(function(e){return e.name===r});null==o||o.action(e)}},{passive:!1}),this.options.windowOptions.movable&&this.makeMovable(),(this.options.windowOptions.resizableX||this.options.windowOptions.resizableY)&&this.makeResizable(),this.options.contextMenu.length>0){this.titleBarEl.addEventListener("contextmenu",function(t){t.target.closest(".".concat(v.LIBRARY_NAME,"-control-btn, .").concat(v.LIBRARY_NAME,"-menu-item, .").concat(v.LIBRARY_NAME,"-tab"))||(t.preventDefault(),e.manager.showContextMenu(t.clientX,t.clientY,e.options.contextMenu,e))},{passive:!1}),this.titleBarEl.addEventListener("pointerdown",function(t){"touch"===t.pointerType&&(e.contextMenuTimer=window.setTimeout(function(){e.contextMenuTimer=null,e.manager.showContextMenu(t.clientX,t.clientY,e.options.contextMenu,e)},e.MOBILE_CONTEXT_MENU_TIMEOUT))},{passive:!0});var n=function(){e.contextMenuTimer&&(clearTimeout(e.contextMenuTimer),e.contextMenuTimer=null)};this.titleBarEl.addEventListener("pointermove",n,{passive:!0}),this.titleBarEl.addEventListener("pointerup",n,{passive:!0}),this.titleBarEl.addEventListener("pointercancel",n,{passive:!0})}document.addEventListener("keydown",function(t){e.focused&&(e.options.search.enabled&&t.ctrlKey&&"f"===t.key&&(t.preventDefault(),e.openSearch()),"Escape"===t.key&&e.searchBarEl&&e.closeSearch())},{passive:!1})}},{key:"makeMovable",value:function(){var e=this;this.titleBarEl.addEventListener("pointerdown",function(t){if(!t.target.closest(".".concat(v.LIBRARY_NAME,"-control-btn, .").concat(v.LIBRARY_NAME,"-resize-handle, .").concat(v.LIBRARY_NAME,"-menu-item, .").concat(v.LIBRARY_NAME,"-tab, .").concat(v.LIBRARY_NAME,"-tab-add-btn"))&&0===t.button){t.preventDefault(),e.focus();var n,i,a,s=t.clientX,l=t.clientY,c=!1,u=null;if(e.options.windowOptions.useGhostWindow)(u=document.createElement("div")).className="".concat(v.LIBRARY_NAME,"-ghost-window"),null===(a=e.manager.container)||void 0===a||a.appendChild(u),u.style.left="".concat(e.el.offsetLeft,"px"),u.style.top="".concat(e.el.offsetTop,"px"),u.style.width="".concat(e.el.offsetWidth,"px"),u.style.height="".concat(e.el.offsetHeight,"px");e.el.classList.add("".concat(v.LIBRARY_NAME,"-is-dragging"));var p=function(r){var o,a;if(null!==(o=e.el)&&void 0!==o&&o.isConnected){if(!c){var p=Math.abs(r.clientX-s),d=Math.abs(r.clientY-l);if(!(p>e.DRAG_THRESHOLD||d>e.DRAG_THRESHOLD))return;if(c=!0,e.el.setPointerCapture(t.pointerId),e.contentEl.style.pointerEvents="none",e.emit("move-start",e),"maximized"===e.state){var f=e.lastState.width,h=t.clientX/e.el.offsetWidth,b=e.titleBarEl.getBoundingClientRect(),v=t.clientY-b.top,x=t.clientX-f*h,m=t.clientY-v;e.restore(),e.setPosition(x,m)}n=e.el.offsetLeft,i=e.el.offsetTop}var g=n+r.clientX-s,y=i+r.clientY-l;u?(u.style.left="".concat(g,"px"),u.style.top="".concat(y,"px")):e.setPosition(g,y),null===(a=e.throttledEmitMove)||void 0===a||a.call(e)}},d=function(){document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",d),u&&(e.setPosition(u.offsetLeft,u.offsetTop),u.remove()),c&&(e.el.releasePointerCapture(t.pointerId),e.contentEl.style.pointerEvents="auto",e.emit("move-end",e),(0,o.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=1,e.manager.updateVirtualization();case 1:return t.abrupt("return",t.sent);case 2:case"end":return t.stop()}},t)}))()),e.el.classList.remove("".concat(v.LIBRARY_NAME,"-is-dragging"))};document.addEventListener("pointermove",p,{passive:!0}),document.addEventListener("pointerup",d,{passive:!0})}},{passive:!1}),this.options.windowOptions.maximizable&&this.titleBarEl.addEventListener("dblclick",function(t){if(e.options.windowOptions.maximizableOnDblClick){if(t.target.closest(".".concat(v.LIBRARY_NAME,"-control-btn, .").concat(v.LIBRARY_NAME,"-menu-item, .").concat(v.LIBRARY_NAME,"-tab")))return;e.toggleMaximize()}})}},{key:"makeResizable",value:function(){var e=this;this.el.querySelectorAll(".".concat(v.LIBRARY_NAME,"-resize-handle")).forEach(function(t){t.addEventListener("pointerdown",function(n){if(0===n.button&&null!=t&&t.isConnected){n.preventDefault(),n.stopPropagation(),e.focus(),e.contentEl.style.pointerEvents="none",t.setPointerCapture(n.pointerId),e.el.classList.add("".concat(v.LIBRARY_NAME,"-is-resizing")),e.emit("resize-start",e);var i,a=null;if(e.options.windowOptions.useGhostWindow)(a=document.createElement("div")).className="".concat(v.LIBRARY_NAME,"-ghost-window"),null===(i=e.manager.container)||void 0===i||i.appendChild(a);var s=t.className.replace("".concat(v.LIBRARY_NAME,"-resize-handle "),""),l=n.clientX,c=n.clientY,u=e.el,p=u.offsetWidth,d=u.offsetHeight,f=u.offsetLeft,h=u.offsetTop,b=e.options,x=b.minWidth,m=b.minHeight,g=function(t){var n,i=p,r=d,o=f,u=h,b=t.clientX-l,g=t.clientY-c;s.includes("".concat(v.LIBRARY_NAME,"-e"))&&(i=Math.max(x,p+b)),s.includes("".concat(v.LIBRARY_NAME,"-w"))&&(i=Math.max(x,p-b),o=f+b),s.includes("".concat(v.LIBRARY_NAME,"-s"))&&(r=Math.max(m,d+g)),s.includes("".concat(v.LIBRARY_NAME,"-n"))&&(r=Math.max(m,d-g),u=h+g),a?(a.style.left="".concat(o,"px"),a.style.top="".concat(u,"px"),a.style.width="".concat(i,"px"),a.style.height="".concat(r,"px")):(e.setSize(i,r),e.setPosition(o,u)),null===(n=e.throttledEmitResize)||void 0===n||n.call(e)},y=function(){t.releasePointerCapture(n.pointerId),e.contentEl.style.pointerEvents="auto",a&&(e.setSize(a.offsetWidth,a.offsetHeight),e.setPosition(a.offsetLeft,a.offsetTop),a.remove()),document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y),e.emit("resize-end",e),e.updateDebugOverlay(),(0,o.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=1,e.manager.updateVirtualization();case 1:return t.abrupt("return",t.sent);case 2:case"end":return t.stop()}},t)}))(),e.el.classList.remove("".concat(v.LIBRARY_NAME,"-is-resizing"))};document.addEventListener("pointermove",g,{passive:!0}),document.addEventListener("pointerup",y,{passive:!0})}},{passive:!1})})}},{key:"isFontAwesome",value:function(e){var t=e.trim().split(/\s+/),n=t.some(function(e){return/^fa[bslr]?$/.test(e)}),i=t.some(function(e){return/^fa-[a-z0-9-]+$/.test(e)});return n&&i}},{key:"updateDebugOverlay",value:function(){if(this.debugOverlayEl){var e=this.getPosition(),t=this.getSize();this.debugOverlayEl.textContent="ID:    ".concat(this.id,"\nState: ").concat(this.state,"\nPos:   x:").concat(Math.round(e.x),", y:").concat(Math.round(e.y),"\nSize:  w:").concat(Math.round(t.width),", h:").concat(Math.round(t.height),"\nFocus: ").concat(this.focused,"\nz-idx: ").concat(this.el.style.zIndex,"\nVirt:  ").concat(this.virtualizationLevel).trim()}}},{key:"getUnsafeContentLevel",value:function(){return this.mainContentEl.querySelector("iframe, frame, video, audio, applet, embed, object")?"frozen":this.mainContentEl.querySelector("img, input, textarea, select, canvas, [contentEditable=true]")?"suspended":"unloaded"}},{key:"virtualize",value:(i=(0,o.default)(r.default.mark(function e(t){var n,i,o;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("auto"===t&&(t=this.getUnsafeContentLevel()),"none"!==t){e.next=1;break}return e.abrupt("return");case 1:if(n=this.virtualizationHierarchy.indexOf(this.virtualizationLevel),!((i=this.virtualizationHierarchy.indexOf(t))<=n)){e.next=2;break}return e.abrupt("return");case 2:this.cleanupVirtualizationStyles(),this.el.classList.add("".concat(v.LIBRARY_NAME,"-virtualization-lock")),"manual"===(this.options.virtualizationRestoreMode||this.manager.getGlobalConfig().virtualizationRestoreMode||"auto")&&this.options.showVirtualizationRefreshButton&&this.el.classList.add("".concat(v.LIBRARY_NAME,"-is-virtualized-manual")),this.virtualizationLevel=t,0===n&&i>0&&this.manager.updateTaskbarItem(this,"virtualized"),o=t,e.next="frozen"===o?3:"suspended"===o?4:"unloaded"===o?5:6;break;case 3:return this.el.classList.add("".concat(v.LIBRARY_NAME,"-is-frozen")),e.abrupt("continue",6);case 4:return this.el.classList.add("".concat(v.LIBRARY_NAME,"-is-suspended")),e.abrupt("continue",6);case 5:return this.el.classList.add("".concat(v.LIBRARY_NAME,"-is-virtualized")),this.tabs.length>0?this.tabs.forEach(function(e){e.contentEl.innerHTML=""}):this.contentEl.innerHTML="",e.abrupt("continue",6);case 6:this.updateDebugOverlay();case 7:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"unvirtualize",value:function(){var e=this;if("none"!==this.virtualizationLevel){this.el.classList.remove("".concat(v.LIBRARY_NAME,"-virtualization-lock"),"".concat(v.LIBRARY_NAME,"-is-virtualized-manual")),this.manager.updateTaskbarItem(this,"unvirtualized");var t=this.virtualizationLevel;this.virtualizationLevel="none",this.cleanupVirtualizationStyles(),"unloaded"===t&&(this.showLoader(),requestAnimationFrame(function(){e.isContentLoaded=!1,e._renderInitialContent(),e.hideLoader()})),this.updateDebugOverlay()}}},{key:"cleanupVirtualizationStyles",value:function(){this.el.classList.remove("".concat(v.LIBRARY_NAME,"-is-frozen"),"".concat(v.LIBRARY_NAME,"-is-suspended"),"".concat(v.LIBRARY_NAME,"-is-virtualized")),this.contentEl.style.display=""}},{key:"close",value:function(){var e=this.emit("before-close",this);null!=e&&e.includes(!1)||(this.boundGlobalClickHandler&&document.removeEventListener("click",this.boundGlobalClickHandler),this.emit("close",this),this.manager.destroyWindow(this.id))}},{key:"minimize",value:function(e){var t=this;if("none"!==this.virtualizationLevel&&this.unvirtualize(),"minimized"!==this.state){"normal"!==this.state&&this.restore();var n=function(){t.state="minimized",t.el.classList.add("".concat(v.LIBRARY_NAME,"-minimized")),t.el.classList.remove("".concat(v.LIBRARY_NAME,"-is-minimizing")),t.el.setAttribute("aria-hidden","true"),t.manager.updateTaskbarItem(t,"minimized"),t.blur();var e,n=t.manager.getGlobalConfig();n.enableVirtualization&&t.options.virtualizable&&(t.minimizeVirtualizeTimer&&clearTimeout(t.minimizeVirtualizeTimer),t.minimizeVirtualizeTimer=window.setTimeout(function(){t.virtualize("auto")},null!==(e=n.virtualizationDelay)&&void 0!==e?e:5e3));t.updateDebugOverlay(),t.manager.updateVirtualization()};if(this.el.setAttribute("inert",""),this.manager.getGlobalConfig().enableAnimations){var i=[null==e?void 0:e.origin,this.options.animationOrigin,this.manager.getGlobalConfig().animateFromTaskbar?this.options._taskbarItem:null].find(function(e){return null!=e});this.el.style.transformOrigin=this._calculateTransformOrigin(i),this.el.classList.add("".concat(v.LIBRARY_NAME,"-is-minimizing")),this.el.addEventListener("transitionend",n,{once:!0})}else n()}}},{key:"toggleMaximize",value:function(){"maximized"===this.state?this.restore():this.maximize()}},{key:"maximize",value:function(){var e=this;if("none"!==this.virtualizationLevel&&this.unvirtualize(),"maximized"!==this.state){"normal"!==this.state&&this.restore(),this.lastState={x:this.el.offsetLeft,y:this.el.offsetTop,width:this.el.offsetWidth,height:this.el.offsetHeight},this.state="maximized",this.el.classList.add("".concat(v.LIBRARY_NAME,"-maximized"));var t=function(){e.el.classList.remove("".concat(v.LIBRARY_NAME,"-is-maximizing")),e.setPosition(0,0),e.setSize("100%","100%"),e.updateDebugOverlay()};this.manager.getGlobalConfig().enableAnimations?(this.el.classList.add("".concat(v.LIBRARY_NAME,"-is-maximizing")),this.el.style.top="0px",this.el.style.left="0px",this.el.style.width="100%",this.el.style.height="100%",this.el.addEventListener("transitionend",t,{once:!0,passive:!0})):t();var n=this.el.querySelector(".".concat(v.LIBRARY_NAME,"-maximize-btn"));n&&(n.title="Restore",n.value="❏",n.setAttribute("aria-label","Restore"))}}},{key:"restore",value:function(e){var t=this;if(this.minimizeVirtualizeTimer&&(clearTimeout(this.minimizeVirtualizeTimer),this.minimizeVirtualizeTimer=null),"none"!==this.virtualizationLevel&&this.unvirtualize(),"minimized"===this.state){var n=function(){t.state="normal",t.el.classList.remove("".concat(v.LIBRARY_NAME,"-is-restoring-from-minimized")),t.el.style.transformOrigin="",t.updateDebugOverlay(),t.manager.updateVirtualization()};if(this.el.removeAttribute("aria-hidden"),this.el.removeAttribute("inert"),this.el.style.transition="",this.manager.getGlobalConfig().enableAnimations){var i=[null==e?void 0:e.origin,this.options.animationOrigin,this.manager.getGlobalConfig().animateFromTaskbar?this.options._taskbarItem:null].find(function(e){return null!=e});this.el.style.transformOrigin=this._calculateTransformOrigin(i),this.el.classList.remove("".concat(v.LIBRARY_NAME,"-minimized")),this.el.classList.add("".concat(v.LIBRARY_NAME,"-is-restoring-from-minimized")),this.el.addEventListener("transitionend",n,{once:!0})}else this.el.classList.remove("".concat(v.LIBRARY_NAME,"-minimized")),n();this.manager.updateTaskbarItem(this,"restored"),this.focus()}else if("maximized"===this.state){var a=function(){t.state="normal",t.el.classList.remove("".concat(v.LIBRARY_NAME,"-maximized"),"".concat(v.LIBRARY_NAME,"-is-restoring")),t.el.style.transition="";var e=t.el.querySelector(".".concat(v.LIBRARY_NAME,"-maximize-btn"));e&&(e.title="Maximize",e.value="□",e.setAttribute("aria-label","Maximize")),t.updateDebugOverlay()};this.manager.getGlobalConfig().enableAnimations?(this.el.style.transition="top 0.25s ease-in-out, left 0.25s ease-in-out, width 0.25s ease-in-out, height 0.25s ease-in-out",this.el.classList.add("".concat(v.LIBRARY_NAME,"-is-restoring")),this.setSize(this.lastState.width,this.lastState.height),this.setPosition(this.lastState.x,this.lastState.y),this.el.addEventListener("transitionend",a,{once:!0})):(this.setSize(this.lastState.width,this.lastState.height),this.setPosition(this.lastState.x,this.lastState.y),a())}this.updateDebugOverlay(),(0,o.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,t.manager.updateVirtualization();case 1:return e.abrupt("return",e.sent);case 2:case"end":return e.stop()}},e)}))()}},{key:"focus",value:function(){if(!this.focused){var e=this.options.virtualizationRestoreMode||this.manager.getGlobalConfig().virtualizationRestoreMode||"auto";"none"!==this.virtualizationLevel&&"manual"===e&&this.unvirtualize(),this.options.lazyLoad&&!this.isContentLoaded&&this._renderInitialContent(),this.parentWindow&&this.parentWindow.focus(),this.manager.focusWindow(this),this.focused=!0,this.el.classList.add("".concat(v.LIBRARY_NAME,"-active")),this.updateDebugOverlay(),this.emit("focus",this)}}},{key:"blur",value:function(){this.focused&&(this.focused=!1,this.el.classList.remove("".concat(v.LIBRARY_NAME,"-active")),this.updateDebugOverlay(),this.emit("blur",this))}},{key:"shake",value:function(){var e=this,t="".concat(v.LIBRARY_NAME,"-is-shaking");this.el.classList.contains(t)||(this.el.classList.add(t),this.el.addEventListener("animationend",function(){e.el.classList.remove(t)},{once:!0,passive:!0}))}},{key:"reload",value:function(){var e=this,t=this.emit("reload",this);if(null==t||!t.includes(!1)){var n=function(t,n){if(m.default.isNonEmptyObject(n.iframe)&&(n.iframe.src||n.iframe.srcdoc)){var i=t.querySelector("iframe");if(i&&i.src&&!n.iframe.srcdoc)try{var r;null===(r=i.contentWindow)||void 0===r||r.location.reload()}catch(i){console.warn("WinLet: Cross-origin iframe could not be reloaded directly. Recreating iframe element.",i),e.renderContent(t,n)}else e.renderContent(t,n)}else e.renderContent(t,n)};if(this.options.tabs.length>0){var i=this.tabs.findIndex(function(e){return e.tabEl.classList.contains("".concat(v.LIBRARY_NAME,"-active"))});if(i>-1){var r=this.tabs[i],o=this.options.tabs[i].content;n(r.contentEl,o)}}else n(this.contentEl,this.options.content)}}},{key:"getContent",value:function(){var e,t=this.tabs.findIndex(function(e){return e.tabEl.classList.contains("".concat(v.LIBRARY_NAME,"-active"))});return(e=t>-1?this.tabs[t].contentEl:this.contentEl).querySelector("iframe")||e}},{key:"getChildManager",value:function(){if(!this.childManager){this.childManager=new g.default({}),this.childManager.applyGlobalConfig({container:this.contentEl}),this.childManager.init()}return this.childManager}},{key:"setStatusBarText",value:function(e){this.statusBarEl&&(this.options.statusBar.allowHTML?this.statusBarEl.innerHTML=e:this.statusBarEl.textContent=e)}},{key:"openSearch",value:function(){var e=this;if(this.searchBarEl){var t=this.searchBarEl.querySelector(".".concat(v.LIBRARY_NAME,"-search-input"));return null==t||t.focus(),void(null==t||t.select())}this.searchBarEl=document.createElement("div"),this.searchBarEl.className="".concat(v.LIBRARY_NAME,"-search-bar");var n=this.options.search,i=n.showCaseSensitiveButton?'<button class="'.concat(v.LIBRARY_NAME,'-search-btn" data-action="case-sensitive" title="Case Sensitive">Aa</button>'):"",r=n.showRegexButton?'<button class="'.concat(v.LIBRARY_NAME,'-search-btn" data-action="regex" title="Use Regular Expression">.*</button>'):"",o=n.showWholeWordButton?'<button class="'.concat(v.LIBRARY_NAME,'-search-btn" data-action="whole-word" title="Match Whole Word">ab</button>'):"";this.searchBarEl.innerHTML='\n\t\t\t<input type="text" class="'.concat(v.LIBRARY_NAME,'-search-input" placeholder="Search...">\n\t\t\t<span class="').concat(v.LIBRARY_NAME,'-search-results">0/0</span>\n\t\t\t').concat(i,"\n\t\t\t").concat(r,"\n\t\t\t").concat(o,'\n\t\t\t<button class="').concat(v.LIBRARY_NAME,'-search-btn" data-action="prev" title="Previous Match">&uarr;</button>\n\t\t\t<button class="').concat(v.LIBRARY_NAME,'-search-btn" data-action="next" title="Next Match">&darr;</button>\n\t\t\t<button class="').concat(v.LIBRARY_NAME,'-search-btn" data-action="close" title="Close">&times;</button>\n\t\t'),this.contentEl.insertBefore(this.searchBarEl,this.contentEl.firstChild),this.updateSearchButtonState();var a=this.searchBarEl.querySelector(".".concat(v.LIBRARY_NAME,"-search-input"));a.focus(),a.addEventListener("input",function(){return e._performSearch()},{passive:!0}),a.addEventListener("keydown",function(t){"Enter"===t.key&&(t.preventDefault(),t.shiftKey?e.navigateSearch("prev"):e.navigateSearch("next"))},{passive:!1}),this.searchBarEl.addEventListener("click",function(t){var n=t.target.closest("[data-action]");if(n)switch(n.dataset.action){case"close":e.closeSearch();break;case"prev":e.navigateSearch("prev");break;case"next":e.navigateSearch("next");break;case"case-sensitive":e.searchOptionsState.caseSensitive=!e.searchOptionsState.caseSensitive,e.updateSearchButtonState(n,e.searchOptionsState.caseSensitive),e._performSearch();break;case"regex":e.searchOptionsState.regex=!e.searchOptionsState.regex,e.updateSearchButtonState(n,e.searchOptionsState.regex),e._performSearch();break;case"whole-word":e.searchOptionsState.wholeWord=!e.searchOptionsState.wholeWord,e.updateSearchButtonState(n,e.searchOptionsState.wholeWord),e._performSearch()}},{passive:!0})}},{key:"closeSearch",value:function(){this.searchBarEl&&(this.clearSearchHighlights(),this.searchBarEl.remove(),this.searchBarEl=null)}},{key:"navigateSearch",value:function(e){0!==this.searchResults.length&&(this.currentSearchIndex="next"===e?(this.currentSearchIndex+1)%this.searchResults.length:(this.currentSearchIndex-1+this.searchResults.length)%this.searchResults.length,this.updateSearchResults(this.currentSearchIndex+1,this.searchResults.length),this.highlightCurrentResult())}},{key:"highlightCurrentResult",value:function(){var e=this;this.searchResults.forEach(function(t,n){t.classList.toggle("".concat(v.LIBRARY_NAME,"-search-highlight-active"),n===e.currentSearchIndex)}),this.currentSearchIndex>-1&&this.searchResults[this.currentSearchIndex].scrollIntoView({behavior:"instant",block:"nearest"})}},{key:"clearSearchHighlights",value:function(){this.el.querySelectorAll(".".concat(v.LIBRARY_NAME,"-content, .").concat(v.LIBRARY_NAME,"-split-pane")).forEach(function(e){e.querySelectorAll(".".concat(v.LIBRARY_NAME,"-search-highlight")).forEach(function(e){var t=e.parentNode;t&&(t.replaceChild(document.createTextNode(e.textContent||""),e),t.normalize())})}),this.searchResults=[],this.currentSearchIndex=-1}},{key:"updateSearchResults",value:function(e,t){this.searchBarEl&&(this.searchBarEl.querySelector(".".concat(v.LIBRARY_NAME,"-search-results")).textContent="".concat(t>0?e:0,"/").concat(t))}},{key:"_performSearch",value:function(){if(this.searchBarEl){this.clearSearchHighlights();var e=this.searchBarEl.querySelector(".".concat(v.LIBRARY_NAME,"-search-input")),t=e.value;if(t.length<1)this.updateSearchResults(0,0);else{var n=this.contentEl,i=this.tabs.findIndex(function(e){return e.tabEl.classList.contains("".concat(v.LIBRARY_NAME,"-active"))});if(this.options.tabs.length>0&&-1!==i&&this.tabs[i]&&(n=this.tabs[i].contentEl),n){var r=this.options.search.targetSelector?n.querySelector(this.options.search.targetSelector):n;if(r){var o;this.searchOptionsState.regex||(t=m.default.escapeRegex(t)),this.searchOptionsState.wholeWord&&(t="\\b".concat(t,"\\b"));try{o=new RegExp(t,this.searchOptionsState.caseSensitive?"g":"gi"),e.style.borderColor=""}catch(t){return void(e.style.borderColor="red")}for(var a,s=[],l=[],c=document.createTreeWalker(r,NodeFilter.SHOW_TEXT,function(e){var t,n,i;return"SCRIPT"===(null===(t=e.parentElement)||void 0===t?void 0:t.tagName)||"STYLE"===(null===(n=e.parentElement)||void 0===n?void 0:n.tagName)||null!==(i=e.parentElement)&&void 0!==i&&i.classList.contains("".concat(v.LIBRARY_NAME,"-search-highlight"))?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT});a=c.nextNode();){var u,p=a;if(null!==(u=p.textContent)&&void 0!==u&&u.trim()){var d=p.textContent.match(o);d&&l.push({node:p,matches:d})}}for(var f=function(){var e=b[h],t=e.node,n=e.matches,i=t.parentNode;if(!i)return 1;t.textContent.split(o).forEach(function(e,r){if(e&&i.insertBefore(document.createTextNode(e),t),r<n.length){var o=document.createElement("span");o.className="".concat(v.LIBRARY_NAME,"-search-highlight"),o.textContent=n[r],i.insertBefore(o,t),s.push(o)}}),i.removeChild(t)},h=0,b=l;h<b.length;h++)f();this.searchResults=s,this.currentSearchIndex=this.searchResults.length>0?0:-1,this.updateSearchResults(this.currentSearchIndex+1,this.searchResults.length),this.highlightCurrentResult()}}}}}},{key:"updateSearchButtonState",value:function(e,t){if(this.searchBarEl)if(e&&"boolean"==typeof t)e.classList.toggle("".concat(v.LIBRARY_NAME,"-search-btn-active"),t);else{var n=this.searchOptionsState,i=this.searchBarEl.querySelector('[data-action="case-sensitive"]'),r=this.searchBarEl.querySelector('[data-action="regex"]'),o=this.searchBarEl.querySelector('[data-action="whole-word"]');null==i||i.classList.toggle("".concat(v.LIBRARY_NAME,"-search-btn-active"),n.caseSensitive),null==r||r.classList.toggle("".concat(v.LIBRARY_NAME,"-search-btn-active"),n.regex),null==o||o.classList.toggle("".concat(v.LIBRARY_NAME,"-search-btn-active"),n.wholeWord)}}},{key:"createWindow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.contentEl.querySelector("iframe");if(t&&t.contentWindow){var n={type:"winlet:createWindow",options:e};return t.contentWindow.postMessage(n,"*"),console.warn("WinLet: Window creation inside an iframe is asynchronous and does not return an instance directly."),null}var i=this.getChildManager();return e._parent=this,i.createWindow(e)}},{key:"createPopup",value:function(e){var t={_parent:this};return this.getChildManager().popup(Object.assign(e,t))}},{key:"createAsyncPopup",value:function(e){var t=this.getChildManager(),n=w(w({},e),{},{_parent:this});return t.popupAsync(n)}},{key:"capture",value:(n=(0,o.default)(r.default.mark(function e(){var t,n,i,o,a,s,l=this,c=arguments;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:"window","function"==typeof window.html2canvas){e.next=1;break}return n=new b.WinLetError("The capture() feature requires the 'html2canvas' library. Please include it from a CDN to use this feature. https://html2canvas.hertzen.com/"),console.warn(n),e.abrupt("return",Promise.reject(n));case 1:return i="content"===t?this.mainContentEl:this.el,e.prev=2,e.next=3,window.html2canvas(i,{allowTaint:!0,useCORS:!0,logging:!1,onclone:function(e){var t=e.querySelector("#".concat(l.id));t&&(t.classList.remove("".concat(v.LIBRARY_NAME,"-is-resizing"),"".concat(v.LIBRARY_NAME,"-is-dragging")),[".".concat(v.LIBRARY_NAME,"-resize-handle"),".".concat(v.LIBRARY_NAME,"-debug-overlay"),".".concat(v.LIBRARY_NAME,"-controls")].forEach(function(e){t.querySelectorAll(e).forEach(function(e){return e.remove()})}))}});case 3:return o=e.sent,e.abrupt("return",o.toDataURL("image/png"));case 4:return e.prev=4,s=e.catch(2),(a=new b.WinLetError("html2canvas failed to capture the window. Error: ".concat(s.message))).stack+="\n\n--- Caused by ---\n"+s.stack,console.error(a),e.abrupt("return",Promise.reject(a));case 5:case"end":return e.stop()}},e,this,[[2,4]])})),function(){return n.apply(this,arguments)})},{key:"print",value:function(){var e,t,n=this.getContent();if("IFRAME"!==n.tagName){var i=this.getSize(),a=document.createElement("iframe");a.style.position="absolute",a.style.opacity="0.01",a.style.border="0",a.style.top="0",a.style.left="0",a.style.width=i.width+"px",a.style.height=i.height+"px",a.style.zIndex="1",a.style.transform="scale(0.5)",a.style.pointerEvents="none",a.setAttribute("inert",""),document.body.appendChild(a);var s=null===(e=a.contentWindow)||void 0===e?void 0:e.document;if(!s)return console.error("WinLet: Could not create a document for printing."),void document.body.removeChild(a);s.open(),s.write("<!DOCTYPE html><html><head>"),s.write("<title>".concat(this.getTitle(),"</title>")),document.querySelectorAll('style, link[rel="stylesheet"]').forEach(function(e){s.write(e.outerHTML)}),s.write("</head><body>"),s.write(n.innerHTML),s.write("</body></html>"),s.close();var l,c,u=(l=(0,o.default)(r.default.mark(function e(){var t,n;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,new Promise(function(e){return setTimeout(e,300)});case 1:try{null===(t=a.contentWindow)||void 0===t||t.focus(),null===(n=a.contentWindow)||void 0===n||n.print()}catch(e){console.error("WinLet: Printing failed.",e)}finally{setTimeout(function(){document.body.removeChild(a)},500)}case 2:case"end":return e.stop()}},e)})),function(){return l.apply(this,arguments)});if("complete"===(null===(t=a.contentWindow)||void 0===t?void 0:t.document.readyState))u();else null===(c=a.contentWindow)||void 0===c||c.addEventListener("load",u)}else{var p=n;try{var d;if("complete"===document.readyState)null===(d=p.contentWindow)||void 0===d||d.print();else window.addEventListener("load",function(){var e;null===(e=p.contentWindow)||void 0===e||e.print()})}catch(e){console.error("WinLet: Could not print iframe content, possibly due to cross-origin restrictions.",e)}}}},{key:"getTitle",value:function(){return this.options.title}},{key:"setTitle",value:function(e){this.options.title=e,this.titleEl.textContent=m.default.sanitizeHTML(e),this.titleEl.setAttribute("aria-label",m.default.sanitizeHTML(e)),this.manager.updateTaskbarItem(this,"titleChanged")}},{key:"setIcon",value:function(e){if(this.options.icon=e,this.iconEl.innerHTML="",e){if(this.isFontAwesome(e)){var t=document.createElement("i");t.className=e,this.iconEl.appendChild(t)}else{var n=document.createElement("img");n.src=e,n.alt="window icon",this.iconEl.appendChild(n)}this.manager.updateTaskbarItem(this,"iconChanged")}else this.manager.updateTaskbarItem(this,"iconChanged")}},{key:"getPosition",value:function(){return"maximized"===this.state?{x:this.lastState.x,y:this.lastState.y}:{x:this.el.offsetLeft,y:this.el.offsetTop}}},{key:"setPosition",value:function(e,t){if(this.manager.container){var n,i,r=this.manager.container.getBoundingClientRect(),o=this.el.offsetWidth,a=this.el.offsetHeight;switch(e){case"left":n=0;break;case"center":n=(r.width-o)/2;break;case"right":n=r.width-o;break;default:n=e}switch(t){case"top":i=0;break;case"center":i=(r.height-a)/2;break;case"bottom":i=r.height-a;break;default:i=t}this.el.style.left="".concat(Math.min(Math.max(150-o,n),r.width-150),"px"),this.el.style.top="".concat(Math.min(Math.max(0,i),r.height-50),"px"),this.updateDebugOverlay()}else console.warn("WinLet Warning: setPosition called before manager is initialized.")}},{key:"getSize",value:function(){return"maximized"===this.state?{width:this.lastState.width,height:this.lastState.height}:{width:this.el.offsetWidth,height:this.el.offsetHeight}}},{key:"setSize",value:function(e,t){this.el.style.width="number"==typeof e?"".concat(e,"px"):e,this.el.style.height="number"==typeof t?"".concat(t,"px"):t,this.updateDebugOverlay()}},{key:"setOpacity",value:function(e){var t=Math.max(0,Math.min(1,e));this.options.windowOptions.opacity=t,this.el.style.opacity=t.toString()}},{key:"getOpacity",value:function(){return this.options.windowOptions.opacity}},{key:"setOptions",value:function(e){"boolean"==typeof e.ifExists&&(this.options.ifExists=e.ifExists),"string"==typeof e.title&&this.setTitle(e.title),"string"!=typeof e.icon&&null!==e.icon||this.setIcon(e.icon);var t=null;"number"!=typeof e.x&&"center"!==e.x&&"left"!==e.x&&"right"!==e.x||(t=e.x);var n=null;"number"!=typeof e.y&&"center"!==e.y&&"top"!==e.y&&"bottom"!==e.y||(n=e.y),null===t&&null===n||(null===t&&(t=this.getPosition().x),null===n&&(n=this.getPosition().y),this.setPosition(t,n));var i=null;"number"!=typeof e.width&&"string"!=typeof e.width||(i=e.width);var r=null;"number"!=typeof e.height&&"string"!=typeof e.height||(r=e.height),null===i&&null===r||(null===i&&(i=this.getSize().width),null===r&&(r=this.getSize().height),this.setSize(i,r));var o=e.windowOptions||{};"number"==typeof o.opacity&&this.setOpacity(o.opacity),"boolean"==typeof o.alwaysOnTop&&(this.options.windowOptions.alwaysOnTop=o.alwaysOnTop,this.el.classList.toggle("".concat(v.LIBRARY_NAME,"-always-on-top"),o.alwaysOnTop),this.focus()),"boolean"==typeof o.useGhostWindow&&(this.options.windowOptions.useGhostWindow=o.useGhostWindow)}}]);var n,i}(x.default)},{"../const/config":38,"../const/errors":39,"../const/types":40,"../libs/baseclass":44,"../libs/utils":45,"./window_manager":42,"@babel/runtime/helpers/asyncToGenerator":6,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20,"@babel/runtime/helpers/toConsumableArray":31,"@babel/runtime/helpers/typeof":34,"@babel/runtime/regenerator":37}],42:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("@babel/runtime/regenerator")),o=i(e("@babel/runtime/helpers/slicedToArray")),a=i(e("@babel/runtime/helpers/typeof")),s=i(e("@babel/runtime/helpers/asyncToGenerator")),l=i(e("@babel/runtime/helpers/classCallCheck")),c=i(e("@babel/runtime/helpers/createClass")),u=i(e("@babel/runtime/helpers/possibleConstructorReturn")),p=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits")),f=i(e("@babel/runtime/helpers/defineProperty")),h=e("../const/config"),b=e("../const/errors"),v=e("../const/types"),x=i(e("../libs/baseclass")),m=i(e("../libs/utils")),g=i(e("../style/styles")),y=e("../style/themes/dark"),w=e("../style/themes/default"),E=e("../style/themes/high-contrast"),A=i(e("./window"));function $(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return R(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(k=function(){return!!e})()}var L=n.default=function(e){function t(e){var n,i,r,o;return(0,l.default)(this,t),i=this,r=t,r=(0,p.default)(r),n=(0,u.default)(i,k()?Reflect.construct(r,o||[],(0,p.default)(i).constructor):r.apply(i,o)),(0,f.default)(n,"container",null),(0,f.default)(n,"workspaceEl",null),(0,f.default)(n,"windows",new Map),(0,f.default)(n,"zIndexCounter",1e3),(0,f.default)(n,"zIndexCounterOnTop",5e4),(0,f.default)(n,"activeWindow",null),(0,f.default)(n,"contextMenuEl",null),(0,f.default)(n,"_isInitialized",!1),(0,f.default)(n,"lastAutoPosition",null),(0,f.default)(n,"lastPopupPosition",null),(0,f.default)(n,"CASCADE_OFFSET",30),(0,f.default)(n,"draggingTabInfo",null),(0,f.default)(n,"taskbarEl",null),(0,f.default)(n,"themes",new Map),(0,f.default)(n,"activeTheme",null),(0,f.default)(n,"boundTabPressHandler",null),(0,f.default)(n,"bootstrapThemeObserver",null),(0,f.default)(n,"prefersDarkMatcher",null),(0,f.default)(n,"prefersColorSchemeListener",null),(0,f.default)(n,"highContrastMatcher",null),(0,f.default)(n,"highContrastListener",null),n.globalConfig=e,n.registerTheme(w.defaultTheme),n.registerTheme(y.darkTheme),n.registerTheme(E.highContrastTheme),n}return(0,d.default)(t,e),(0,c.default)(t,[{key:"isInitialized",get:function(){return this._isInitialized}},{key:"applyGlobalConfig",value:function(e){Object.assign(this.globalConfig,e),this.container&&(this.container.classList.toggle("".concat(v.LIBRARY_NAME,"-animations-disabled"),!this.globalConfig.enableAnimations),this.container.classList.toggle("".concat(v.LIBRARY_NAME,"-debug-mode-enabled"),!!this.globalConfig.enableDebugMode),this.globalConfig.enableTaskbar?(this.taskbarEl||this.createTaskbar(),this.updateTaskbarLayout()):this.taskbarEl&&(this.taskbarEl.remove(),this.taskbarEl=null,this.container.style.flexDirection="")),this.globalConfig.autoDetectBootstrapTheme?this.startBootstrapThemeObserver():this.stopBootstrapThemeObserver()}},{key:"getGlobalConfig",value:function(){return this.globalConfig}},{key:"init",value:function(){var e=this;if(!this._isInitialized){var t=null;if("string"==typeof this.globalConfig.container){if(!(t=document.querySelector(this.globalConfig.container)))throw new b.WinLetError('WinLet: The specified container "'.concat(this.globalConfig.container,'" was not found.'))}else this.globalConfig.container instanceof HTMLElement&&(t=this.globalConfig.container);if(!t){if(!document.body)throw new b.WinLetError("Cannot initialize before document.body is ready. Please call WinLet.init() after DOMContentLoaded.");t=document.body}if(!document.getElementById("".concat(v.LIBRARY_NAME,"-styles"))){var n=document.createElement("style");n.id="".concat(v.LIBRARY_NAME,"-styles"),n.innerHTML=this.getStyleData(),document.head.appendChild(n)}var i=t.querySelector(".".concat(v.LIBRARY_NAME,"-container"));if(i||((i=document.createElement("div")).className="".concat(v.LIBRARY_NAME,"-container"),t.appendChild(i)),this.container=i,this.workspaceEl=document.createElement("div"),this.workspaceEl.className="".concat(v.LIBRARY_NAME,"-workspace"),this.container.appendChild(this.workspaceEl),this.applyGlobalConfig(this.globalConfig),t!==document.body)this.container.classList.add("".concat(v.LIBRARY_NAME,"-is-nested")),"static"===window.getComputedStyle(t).position&&(t.style.position="relative");this.globalConfig.enableTaskbar&&(this.taskbarEl||this.createTaskbar()),this.globalConfig.theme?this.setTheme(this.globalConfig.theme):this.setTheme("default"),(0,s.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=1,e.updateVirtualization();case 1:return t.abrupt("return",t.sent);case 2:case"end":return t.stop()}},t)}))(),window.addEventListener("blur",function(){return requestAnimationFrame(function(){var t=document.activeElement;if("IFRAME"===(null==t?void 0:t.tagName)){var n=t.closest(".".concat(v.LIBRARY_NAME,"-window"));if(n){var i=e.windows.get(n.id);i&&e.activeWindow!==i&&i.focus()}}})}),document.addEventListener("pointerdown",function(){return requestAnimationFrame(function(){var t=document.activeElement;if("IFRAME"===(null==t?void 0:t.tagName)){var n=t.closest(".".concat(v.LIBRARY_NAME,"-window"));if(n){var i=e.windows.get(n.id);i&&e.activeWindow!==i&&i.focus()}}})},!0),document.addEventListener("pointerdown",function(t){if(t.target instanceof HTMLElement){var n=t.target.closest(".".concat(v.LIBRARY_NAME,"-context-menu"));if(n||e.hideContextMenu(),e.activeWindow&&!e.activeWindow.options.windowOptions.modal){var i=t.target.closest(".".concat(v.LIBRARY_NAME,"-window")),r=t.target.closest(".".concat(v.LIBRARY_NAME,"-taskbar"));if(!i&&!n&&!r){var o=e.activeWindow;e.activeWindow=null,o.blur()}}}}),window.addEventListener("message",function(t){if(t.data&&"winlet:createWindow"===t.data.type&&"object"===(0,a.default)(t.data.options)){var n,i=!1,r=null,o=$(e.windows.values());try{for(o.s();!(n=o.n()).done;){var s=n.value,l=s.el.querySelector("iframe");if(l&&l.contentWindow===t.source){i=!0,r=s;break}}}catch(e){o.e(e)}finally{o.f()}i?r?r.createWindow(t.data.options):e.createWindow(t.data.options):console.warn("WinLet: Untrusted source attempted to create a window.",t.origin)}}),this._isInitialized=!0,this.setupShortcutListeners(),this.workspaceEl.addEventListener("dragover",function(e){var t;null!==(t=e.dataTransfer)&&void 0!==t&&t.types.includes("application/winlet-tab")&&e.preventDefault()}),this.workspaceEl.addEventListener("drop",function(t){var n,i,r;if(!t.target.closest(".".concat(v.LIBRARY_NAME,"-window"))){t.preventDefault();var o=null===(n=t.dataTransfer)||void 0===n?void 0:n.getData("application/winlet-tab"),a=null===(i=t.dataTransfer)||void 0===i?void 0:i.getData("application/winlet-source-window-id"),s=null===(r=t.dataTransfer)||void 0===r?void 0:r.getData("text/plain");if(o&&a&&s){var l=e.windows.get(a);if(!l||!l.options.tabOptions.detachable)return;var c=JSON.parse(o),u={title:c.title,content:c.content},p=m.default.deepCopy(l.options);delete p.id,delete p.animationOrigin,delete p.content,delete p.tabs,delete p.splitView;var d=m.default.deepMerge(p,{tabs:[u],x:t.clientX,y:t.clientY,width:l.getSize().width,height:l.getSize().height});e.createWindow(d),l.closeTab(parseInt(s,10))}}})}}},{key:"setupShortcutListeners",value:function(){var e=this;document.addEventListener("keydown",function(t){var n,i;if(e.globalConfig.windowSwitchShortcut){var r=e.parseShortcut(e.globalConfig.windowSwitchShortcut);if(t.key.toLowerCase()===r.key.toLowerCase()&&t.ctrlKey===r.ctrl&&t.altKey===r.alt&&t.shiftKey===r.shift){t.preventDefault();var o=Array.from(e.windows.values()),a=e.activeWindow?o.findIndex(function(t){return t===e.activeWindow}):-1,s=o[(a+1)%o.length];return"minimized"===s.state&&s.restore(),void s.focus()}}var l=e.activeWindow;if(l&&l.options.enableShortcuts){if(t.ctrlKey&&t.shiftKey&&(null!==(n=null===(i=l.options.tabs)||void 0===i?void 0:i.length)&&void 0!==n?n:0)>0&&t.code.startsWith("Digit")){t.preventDefault(),t.stopPropagation();var c=parseInt(t.code.replace("Digit",""),10),u=l.getTabs().length,p=-1;return c>=1&&c<=8?p=c-1:9===c&&(p=u-1),void(p>=0&&p<u&&l.activateTab(p))}var d=function(n){var i,r=$(n);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o.shortcut){var a,s=e.parseShortcut(o.shortcut);if(t.key.toUpperCase()===s.key.toUpperCase()&&t.ctrlKey===s.ctrl&&t.altKey===s.alt&&t.shiftKey===s.shift)return t.preventDefault(),t.stopPropagation(),null===(a=o.action)||void 0===a||a.call(o,l),!0}if(o.items&&d(o.items))return!0}}catch(e){r.e(e)}finally{r.f()}return!1};d(l.options.menu)}},{passive:!1})}},{key:"ensureInitialized",value:function(){this._isInitialized||this.init()}},{key:"getStyleData",value:function(){return this.replaceStringVariable(g.default)}},{key:"replaceStringVariable",value:function(e){return e.replace(/\$\[(\w+)\]/g,function(e,t){return"prefix"===t?v.LIBRARY_NAME:t})}},{key:"createWindow",value:function(e){var n;this.ensureInitialized();var i=null!==(n=e.ifExists)&&void 0!==n?n:"focus";if(e.id&&"create"!==i){var r=this.getWindow(e.id);if(r){if("prevent"===i)return r;if("focus"===i)return"minimized"===r.state&&r.restore(),r.focus(),r}}var o=m.default.deepMerge(m.default.deepCopy(h.defaultConfig),e);if("auto"===o.x||"auto"===o.y){var a,s=o.width,l=o.height,c=this.workspaceEl.getBoundingClientRect(),u={x:(c.width-s)/2,y:(c.height-l)/2},p=!0;if(this.lastAutoPosition){var d,f=!1,b=$(this.windows.values());try{for(b.s();!(d=b.n()).done;){var v=d.value;if("normal"===v.state&&!v.options._isPopup){var x=v.getPosition();if(Math.abs(x.x-this.lastAutoPosition.x)<5&&Math.abs(x.y-this.lastAutoPosition.y)<5){f=!0;break}}}}catch(e){b.e(e)}finally{b.f()}f&&(p=!1)}((a=p?u:{x:this.lastAutoPosition.x+this.CASCADE_OFFSET,y:this.lastAutoPosition.y+this.CASCADE_OFFSET}).x+s>c.width||a.y+l>c.height)&&(a=u),o.x=a.x,o.y=a.y,o._isPopup||(this.lastAutoPosition={x:a.x,y:a.y})}var g=new A.default(o,this);return this.windows.set(g.id,g),t.allWindows.set(g.id,g),this.workspaceEl.appendChild(g.el),this.emit("window-created",g),this.taskbarEl&&this.createTaskbarItem(g),g.setPosition(o.x,o.y),o.windowOptions.focus?(this.focusWindow(g),g.focus()):(g.el.style.zIndex="".concat((g.options.windowOptions.alwaysOnTop?this.zIndexCounterOnTop:this.zIndexCounter)-1),this.updateVirtualization(),g.updateDebugOverlay()),g}},{key:"popup",value:function(e){var t,n,i,r,o=this;this.ensureInitialized();var a={Ok:[{text:"OK",value:1}],OkCancel:[{text:"OK",value:1},{text:"Cancel",value:2}],Yes:[{text:"Yes",value:6}],YesNo:[{text:"Yes",value:6},{text:"No",value:7}],YesNoCancel:[{text:"Yes",value:6},{text:"No",value:7},{text:"Cancel",value:2}],Retry:[{text:"Retry",value:4}],RetryCancel:[{text:"Retry",value:4},{text:"Cancel",value:2}],AbortRetryIgnore:[{text:"Abort",value:3},{text:"Retry",value:4},{text:"Ignore",value:5}]};r=Array.isArray(e.buttons)?e.buttons:a[e.buttons||"Ok"]||a.Ok;var s=null,l=function(t){s&&clearTimeout(s),s=null;try{var n;null===(n=e.onClose)||void 0===n||n.call(e,t)}catch(e){console.error(e)}},c='<div class="'.concat(v.LIBRARY_NAME,'-popup-message">').concat(m.default.sanitizeHTML(e.message),"</div>"),u=r.map(function(e,t){return'<input class="'.concat(v.LIBRARY_NAME,'-popup-button" data-index="').concat(t,'" type="button" value="').concat(m.default.sanitizeHTML(e.text),'" role="button"/>')}).join(""),p="".concat(c,'<div class="').concat(v.LIBRARY_NAME,'-popup-buttons" role="spinbutton">').concat(u,"</div>"),d={id:m.default.generateId("".concat(v.LIBRARY_NAME,"-popup")),title:e.title||"",icon:e.icon,virtualizable:!1,windowOptions:{resizableX:!1,resizableY:!1,movable:!0,closable:!0,minimizable:!1,maximizable:!1,maximizableOnDblClick:!1,modal:null===(t=e.modal)||void 0===t||t,alwaysOnTop:null!==(n=e.alwaysOnTop)&&void 0!==n&&n,focus:null===(i=e.focus)||void 0===i||i},enableShortcuts:!1,content:{html:p},_isPopup:!0};if(e.onFocus&&(d.onFocus=e.onFocus),e.onBlur&&(d.onBlur=e.onBlur),e.autoWidth){var f,h,b=document.createElement("span");b.style.visibility="hidden",b.style.position="absolute",b.style.whiteSpace="pre",b.className="".concat(v.LIBRARY_NAME,"-popup-message"),b.innerHTML=m.default.sanitizeHTML(e.message),null===(f=this.workspaceEl)||void 0===f||f.appendChild(b),d.width=b.offsetWidth+80,null===(h=this.workspaceEl)||void 0===h||h.removeChild(b)}else d.width=300;d.height=150;var x,g=d.width,y=d.height,w=this.workspaceEl.getBoundingClientRect(),E={x:(w.width-g)/2,y:(w.height-y)/2},A=!0;if(this.lastPopupPosition){var R,k=!1,L=$(this.windows.values());try{for(L.s();!(R=L.n()).done;){var M=R.value;if(M.options._isPopup&&"normal"===M.state){var _=M.getPosition();if(Math.abs(_.x-this.lastPopupPosition.x)<5&&Math.abs(_.y-this.lastPopupPosition.y)<5){k=!0;break}}}}catch(e){L.e(e)}finally{L.f()}k&&(A=!1)}((x=A?E:{x:this.lastPopupPosition.x+this.CASCADE_OFFSET,y:this.lastPopupPosition.y+this.CASCADE_OFFSET}).x+g>w.width||x.y+y>w.height)&&(x=E),d.x=x.x,d.y=x.y;var z=this.createWindow(d);return this.lastPopupPosition=x,z.popupCloseCallback=l,z.el.querySelectorAll(".".concat(v.LIBRARY_NAME,"-popup-button")).forEach(function(e){e.addEventListener("click",function(){var t=parseInt(e.dataset.index,10),n=r[t].value;l(n),z.close()})}),e.timeout&&e.timeout>0&&(s=window.setTimeout(function(){o.windows.has(z.id)&&(l(v.TIMEOUT_RESULT),z.close())},e.timeout)),z}},{key:"popupAsync",value:function(e){var t=this,n=m.default.deepCopy(e);return new Promise(function(e){var i=n.onClose;n.onClose=function(t){null==i||i(t),e(t)},t.popup(n)})}},{key:"destroyWindow",value:function(e){var n=this;this.ensureInitialized();var i=this.windows.get(e);if(i){if(i.options._taskbarItem&&i.options._taskbarItem.remove(),i.options.windowOptions.modal&&this.deactivateFocusTrap(),this.emit("window-destroyed",i),i.el.remove(),this.windows.delete(e),t.allWindows.delete(e),this.activeWindow===i){this.activeWindow=null;var o=Array.from(this.windows.values()).pop();o&&this.focusWindow(o)}(0,s.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,n.updateVirtualization();case 1:return e.abrupt("return",e.sent);case 2:case"end":return e.stop()}},e)}))()}}},{key:"focusWindow",value:function(e){var t,n,i=this;this.ensureInitialized(),(this.activeWindow!==e||e.options.windowOptions.modal)&&(null===(t=this.activeWindow)||void 0===t||t.blur(),e.options.windowOptions.modal&&this.globalConfig.enableFocusTrapping?this.activateFocusTrap(e):this.deactivateFocusTrap(),this.activeWindow=e,e.el.style.zIndex="".concat(e.options.windowOptions.alwaysOnTop?++this.zIndexCounterOnTop:++this.zIndexCounter),this.windows.forEach(function(e){var t;return null===(t=e.options._taskbarItem)||void 0===t?void 0:t.classList.remove("".concat(v.LIBRARY_NAME,"-active"))}),null===(n=e.options._taskbarItem)||void 0===n||n.classList.add("".concat(v.LIBRARY_NAME,"-active")),(0,s.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=1,i.updateVirtualization();case 1:return e.abrupt("return",e.sent);case 2:case"end":return e.stop()}},e)}))())}},{key:"getWindow",value:function(e){return this.ensureInitialized(),this.windows.get(e)}},{key:"getWindowFromElement",value:function(e){this.ensureInitialized();var n=e.closest(".".concat(v.LIBRARY_NAME,"-window"));if(null!=n&&n.id)return t.allWindows.get(n.id)}},{key:"getActiveWindow",value:function(){return this.ensureInitialized(),this.activeWindow}},{key:"onTabDragStart",value:function(e){var t;null===(t=this.workspaceEl)||void 0===t||t.classList.add("".concat(v.LIBRARY_NAME,"-is-tab-dragging")),this.draggingTabInfo={sourceWindowId:e}}},{key:"onTabDragEnd",value:function(){var e;null===(e=this.workspaceEl)||void 0===e||e.classList.remove("".concat(v.LIBRARY_NAME,"-is-tab-dragging")),this.draggingTabInfo=null}},{key:"showContextMenu",value:function(e,t,n,i){var r=this;this.ensureInitialized(),this.hideContextMenu(),this.contextMenuEl=document.createElement("ul"),this.contextMenuEl.className="".concat(v.LIBRARY_NAME,"-context-menu"),n.forEach(function(e){var t,n=document.createElement("li");e.separator?n.className="".concat(v.LIBRARY_NAME,"-separator"):(n.textContent=null!==(t=e.name)&&void 0!==t?t:"",n.addEventListener("click",function(t){var n;t.stopPropagation(),null===(n=e.action)||void 0===n||n.call(e,i),r.hideContextMenu()}));r.contextMenuEl.appendChild(n)}),this.workspaceEl.appendChild(this.contextMenuEl);var o=this.contextMenuEl,a=o.offsetWidth,s=o.offsetHeight,l=window,c=l.innerWidth,u=l.innerHeight;this.contextMenuEl.style.left="".concat(e+a>c?c-a:e,"px"),this.contextMenuEl.style.top="".concat(t+s>u?u-s:t,"px")}},{key:"hideContextMenu",value:function(){var e;null===(e=this.contextMenuEl)||void 0===e||e.remove(),this.contextMenuEl=null}},{key:"registerTheme",value:function(e){this.themes.set(e.name,e)}},{key:"getRegisteredThemes",value:function(){return Array.from(this.themes.keys())}},{key:"setTheme",value:function(e){var t="string"==typeof e?this.themes.get(e.toLowerCase()):e;if(t)if(this.container){if(this.activeTheme)for(var n=0,i=Object.entries(this.activeTheme.variables);n<i.length;n++){var r=(0,o.default)(i[n],2),a=r[0];r[1];a in t.variables||this.container.style.removeProperty(this.replaceStringVariable(a))}this.activeTheme=t;for(var s=0,l=Object.entries(t.variables);s<l.length;s++){var c=(0,o.default)(l[s],2),u=c[0],p=c[1];this.container.style.setProperty(this.replaceStringVariable(u),this.replaceStringVariable(p))}}else console.warn("WinLet: Container not found.");else console.warn('WinLet: Theme "'.concat(e,'" not found.'))}},{key:"getTheme",value:function(){return this.activeTheme}},{key:"createTaskbar",value:function(){this.container&&(this.taskbarEl=document.createElement("div"),this.taskbarEl.className="".concat(v.LIBRARY_NAME,"-taskbar ").concat(v.LIBRARY_NAME,"-us-none"),this.updateTaskbarLayout(),this.container.appendChild(this.taskbarEl))}},{key:"updateTaskbarLayout",value:function(){if(this.taskbarEl&&this.container){var e=(this.globalConfig.taskbar||{}).position||"bottom";switch(e){case"top":case"bottom":case"left":case"right":break;default:throw new b.WinLetError("Invalid taskbar position: ".concat(e))}this.taskbarEl.className="".concat(v.LIBRARY_NAME,"-taskbar ").concat(v.LIBRARY_NAME,"-us-none"),this.taskbarEl.classList.add("".concat(v.LIBRARY_NAME,"-taskbar-").concat(e)),this.taskbarEl.isConnected||this.container.appendChild(this.taskbarEl),this.container.style.flexDirection="",this.taskbarEl.style.order="",this.workspaceEl&&(this.workspaceEl.style.order=""),this.container.style.paddingTop="0",this.container.style.paddingBottom="0",this.container.style.paddingLeft="0",this.container.style.paddingRight="0";var t=window.getComputedStyle(this.taskbarEl),n=t.height,i=t.width;switch(e){case"top":this.container.style.paddingTop=n,this.container.style.flexDirection="column-reverse",this.taskbarEl.style.order="1",this.workspaceEl&&(this.workspaceEl.style.order="2");break;case"bottom":this.container.style.paddingBottom=n,this.container.style.flexDirection="column",this.taskbarEl.style.order="2",this.workspaceEl&&(this.workspaceEl.style.order="1");break;case"left":this.container.style.paddingLeft=i,this.container.style.flexDirection="row-reverse",this.taskbarEl.style.order="1",this.workspaceEl&&(this.workspaceEl.style.order="2");break;case"right":this.container.style.paddingRight=i,this.container.style.flexDirection="row",this.taskbarEl.style.order="2",this.workspaceEl&&(this.workspaceEl.style.order="1")}}}},{key:"createTaskbarItem",value:function(e){var t=this;if(this.taskbarEl){var n=document.createElement("div");n.className="".concat(v.LIBRARY_NAME,"-taskbar-item"),n.textContent=e.getTitle(),n.title=e.getTitle(),n.dataset.windowId=e.id,this.updateTaskbarItemContent(n,e),n.addEventListener("click",function(){"minimized"===e.state?e.restore({origin:n}):t.activeWindow===e?e.minimize({origin:n}):e.focus()}),e.options._taskbarItem=n,this.taskbarEl.appendChild(n)}}},{key:"updateTaskbarItemContent",value:function(e,t){var n=t.options,i=n.icon,r=n.taskbarOptions;e.innerHTML="",e.title=t.getTitle();var o=(null==r?void 0:r.showIconOnly)&&i;if(e.classList.toggle("".concat(v.LIBRARY_NAME,"-icon-only"),!!o),o){var a=document.createElement("div");if(a.className="".concat(v.LIBRARY_NAME,"-taskbar-item-icon"),t.isFontAwesome(i)){var s=document.createElement("i");s.className=i,a.appendChild(s)}else{var l=document.createElement("img");l.src=i,l.alt=t.getTitle(),a.appendChild(l)}e.appendChild(a)}else e.textContent=t.getTitle()}},{key:"updateTaskbarItem",value:function(e,t){var n=e.options._taskbarItem;if(n)switch(t){case"minimized":n.classList.add("".concat(v.LIBRARY_NAME,"-minimized"));break;case"restored":n.classList.remove("".concat(v.LIBRARY_NAME,"-minimized"));break;case"titleChanged":case"iconChanged":this.updateTaskbarItemContent(n,e);break;case"virtualized":this.globalConfig.indicateVirtualizationInTaskbar&&n.classList.add("".concat(v.LIBRARY_NAME,"-virtualized"));break;case"unvirtualized":n.classList.remove("".concat(v.LIBRARY_NAME,"-virtualized"))}}},{key:"activateFocusTrap",value:function(e){this.deactivateFocusTrap(),this.boundTabPressHandler=function(t){if("Tab"===t.key){t.preventDefault();var n=Array.from(e.el.querySelectorAll('a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])')).filter(function(e){return!e.hasAttribute("disabled")&&!e.closest(".minimized")});if(0===n.length)return;var i=n.indexOf(document.activeElement),r=t.shiftKey?i-1:i+1;r>=n.length&&(r=0),r<0&&(r=n.length-1),n[r].focus()}},document.addEventListener("keydown",this.boundTabPressHandler)}},{key:"deactivateFocusTrap",value:function(){this.boundTabPressHandler&&(document.removeEventListener("keydown",this.boundTabPressHandler),this.boundTabPressHandler=null)}},{key:"parseShortcut",value:function(e){var t=e.split("+"),n=t.pop()||"";return{ctrl:t.includes("Ctrl"),alt:t.includes("Alt"),shift:t.includes("Shift"),key:n}}},{key:"updateVirtualization",value:(n=(0,s.default)(r.default.mark(function e(){var t,n,i,o,a,s,l,c,u,p,d,f,h,b,v,x,m,g,y,w;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.globalConfig.enableVirtualization&&this.workspaceEl){e.next=1;break}return e.abrupt("return");case 1:if(n=null!==(t=this.globalConfig.virtualizationThreshold)&&void 0!==t?t:5,!(this.windows.size<=n)){e.next=2;break}i=$(this.windows.values());try{for(i.s();!(o=i.n()).done;)"none"!==(a=o.value).virtualizationLevel&&"minimized"!==a.state&&a.unvirtualize()}catch(e){i.e(e)}finally{i.f()}return e.abrupt("return");case 2:s=Array.from(this.windows.values()).sort(function(e,t){return parseInt(e.el.style.zIndex||"0",10)-parseInt(t.el.style.zIndex||"0",10)}),l=this.workspaceEl.getBoundingClientRect(),c=0;case 3:if(!(c<s.length)){e.next=16;break}if((u=s[c]).options.virtualizable&&("normal"===u.state||"minimized"===u.state)&&u!==this.activeWindow){e.next=4;break}return u.unvirtualize(),e.abrupt("continue",15);case 4:if(!((p=u.el.getBoundingClientRect()).width<=1||p.height<=1)){e.next=5;break}return u.virtualize("auto"),e.abrupt("continue",15);case 5:d=[{x:p.left+1,y:p.top+1},{x:p.right-1,y:p.top+1},{x:p.right-1,y:p.bottom-1},{x:p.left+1,y:p.bottom-1},{x:p.left+.5*p.width,y:p.top+.5*p.height}],f=!1,h=0,b=d;case 6:if(!(h<b.length)){e.next=13;break}if((v=b[h]).x>=l.left&&v.x<l.right&&v.y>=l.top&&v.y<l.bottom){e.next=7;break}return e.abrupt("continue",12);case 7:x=!1,m=c+1;case 8:if(!(m<s.length)){e.next=11;break}if(!("normal"!==(y=s[m]).state||(null!==(g=y.getOpacity())&&void 0!==g?g:1)<.9)){e.next=9;break}return e.abrupt("continue",10);case 9:if(w=y.el.getBoundingClientRect(),!(v.x>=w.left&&v.x<w.right&&v.y>=w.top&&v.y<w.bottom)){e.next=10;break}return x=!0,e.abrupt("continue",11);case 10:m++,e.next=8;break;case 11:if(x){e.next=12;break}return f=!0,e.abrupt("continue",13);case 12:h++,e.next=6;break;case 13:if(!f){e.next=14;break}"auto"===(u.options.virtualizationRestoreMode||this.globalConfig.virtualizationRestoreMode||"auto")&&u.unvirtualize(),e.next=15;break;case 14:return e.next=15,u.virtualize("auto");case 15:c++,e.next=3;break;case 16:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"startBootstrapThemeObserver",value:function(){var e=this;if(!this.bootstrapThemeObserver&&this.container){this.highContrastMatcher=window.matchMedia("(prefers-contrast: more)"),this.highContrastListener=function(t){t.matches?(e.stopAutoThemeListener(),e.setTheme("high-contrast")):e.applyBootstrapTheme(document.documentElement.getAttribute("data-bs-theme"))},this.highContrastMatcher.addEventListener("change",this.highContrastListener);var t=document.documentElement;this.bootstrapThemeObserver=new MutationObserver(function(t){var n;if(null===(n=e.highContrastMatcher)||void 0===n||!n.matches){var i,r=$(t);try{for(r.s();!(i=r.n()).done;){var o=i.value;if("attributes"===o.type&&"data-bs-theme"===o.attributeName){var a=o.target.getAttribute("data-bs-theme");e.applyBootstrapTheme(a)}}}catch(e){r.e(e)}finally{r.f()}}}),this.bootstrapThemeObserver.observe(t,{attributes:!0,attributeFilter:["data-bs-theme"]}),this.highContrastMatcher.matches?this.setTheme("high-contrast"):this.applyBootstrapTheme(t.getAttribute("data-bs-theme"))}}},{key:"stopBootstrapThemeObserver",value:function(){this.bootstrapThemeObserver&&(this.bootstrapThemeObserver.disconnect(),this.bootstrapThemeObserver=null),this.highContrastMatcher&&this.highContrastListener&&this.highContrastMatcher.removeEventListener("change",this.highContrastListener),this.stopAutoThemeListener()}},{key:"applyBootstrapTheme",value:function(e){this.stopAutoThemeListener(),"dark"===e?this.setTheme("dark"):"auto"===e?this.startAutoThemeListener():this.setTheme("default")}},{key:"startAutoThemeListener",value:function(){var e=this;!this.prefersColorSchemeListener&&window.matchMedia&&(this.prefersDarkMatcher=window.matchMedia("(prefers-color-scheme: dark)"),this.prefersColorSchemeListener=function(t){e.setTheme(t.matches?"dark":"default")},this.prefersDarkMatcher.addEventListener("change",this.prefersColorSchemeListener),this.setTheme(this.prefersDarkMatcher.matches?"dark":"default"))}},{key:"stopAutoThemeListener",value:function(){this.prefersDarkMatcher&&this.prefersColorSchemeListener&&this.prefersDarkMatcher.removeEventListener("change",this.prefersColorSchemeListener),this.prefersDarkMatcher=null,this.prefersColorSchemeListener=null}}]);var n}(x.default);(0,f.default)(L,"allWindows",new Map)},{"../const/config":38,"../const/errors":39,"../const/types":40,"../libs/baseclass":44,"../libs/utils":45,"../style/styles":46,"../style/themes/dark":47,"../style/themes/default":48,"../style/themes/high-contrast":49,"./window":41,"@babel/runtime/helpers/asyncToGenerator":6,"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/getPrototypeOf":11,"@babel/runtime/helpers/inherits":12,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/possibleConstructorReturn":20,"@babel/runtime/helpers/slicedToArray":30,"@babel/runtime/helpers/typeof":34,"@babel/runtime/regenerator":37}],43:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=e("./const/config"),a=e("./const/types"),s=i(e("./function/window_manager")),l=i(e("./libs/utils")),c=e("./version"),u={windowSwitchShortcut:"Ctrl+`",libraryPath:(null===(r=document)||void 0===r||null===(r=r.currentScript)||void 0===r?void 0:r.src)||"",enableAnimations:!0,animateFromTaskbar:!0,enableFocusTrapping:!0,enableVirtualization:!0,indicateVirtualizationInTaskbar:!0,virtualizationThreshold:5,virtualizationDelay:1e4,taskbar:{position:"bottom"},autoDetectBootstrapTheme:!0,enableDebugMode:!1},p=new s.default(u),d={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d.setGlobalConfig(e),p.init()},createWindow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p.createWindow(e)},on:function(e,t,n){p.on(e,t,n)},off:function(e,t){p.off(e,t)},emit:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return p.emit.apply(p,[e].concat(n))},createPopup:function(e){return p.popup(e)},createAsyncPopup:function(e){return p.popupAsync(e)},getWindow:function(e){return p.getWindow(e)},getWindowFromElement:function(e){return p.getWindowFromElement(e)},getActiveWindow:function(){return p.getActiveWindow()},updateTaskbarItem:function(e,t){p.updateTaskbarItem(e,t)},setDefaultConfig:function(e){l.default.deepMerge(o.defaultConfig,e)},setGlobalConfig:function(e){p.isInitialized&&e.container&&(console.warn("WinLet: The container cannot be changed after initialization."),delete e.container),Object.assign(u,e),p.applyGlobalConfig(u)},registerTheme:function(e){p.registerTheme(e)},getRegisteredThemes:function(){return p.getRegisteredThemes()},setTheme:function(e){p.setTheme(e)},getTheme:function(){return p.getTheme()},get version(){return c.LIB_VERSION},POPUP_TIMEOUT_RESULT:a.TIMEOUT_RESULT,POPUP_CLOSE_BUTTON_RESULT:a.CLOSE_BUTTON_RESULT};"undefined"!=typeof window&&(window.WinLet=d);n.default=d},{"./const/config":38,"./const/types":40,"./function/window_manager":42,"./libs/utils":45,"./version":50,"@babel/runtime/helpers/interopRequireDefault":13}],44:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("@babel/runtime/helpers/toConsumableArray")),o=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass"));n.default=(0,a.default)(function e(){(0,o.default)(this,e),this.events=new Map},[{key:"on",value:function(e,t,n){var i=this;this.events.has(e)||this.events.set(e,[]);var r=t;null!=n&&n.once&&(r=function(){i.off(e,t),t.apply(void 0,arguments)}),this.events.get(e).push({handler:r,original:t})}},{key:"off",value:function(e,t){var n=this.events.get(e);if(n){var i=n.findIndex(function(e){return e.original===t});i>-1&&n.splice(i,1)}}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=this.events.get(e);if(o){var a=[];return(0,r.default)(o).forEach(function(t){try{a.push(t.handler.apply(t,n))}catch(t){console.error('Error in event handler for "'.concat(String(e),'":'),t)}}),a}}}])},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/toConsumableArray":31}],45:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("@babel/runtime/helpers/toConsumableArray")),o=i(e("@babel/runtime/helpers/defineProperty")),a=i(e("@babel/runtime/helpers/typeof")),s=i(e("@babel/runtime/helpers/classCallCheck")),l=i(e("@babel/runtime/helpers/createClass"));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}n.default=(0,l.default)(function e(){(0,s.default)(this,e)},null,[{key:"generateId",value:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"win","-").concat(Math.random().toString(36).substring(2,9))}},{key:"deepCopy",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new WeakMap;if(null===e||"object"!==(0,a.default)(e))return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Map){var i=new Map;return e.forEach(function(e,r){i.set(t.deepCopy(r,n),t.deepCopy(e,n))}),i}if(e instanceof Set){var r=new Set;return e.forEach(function(e){r.add(t.deepCopy(e,n))}),r}if(Array.isArray(e)){if(n.has(e))return n.get(e);var o=[];n.set(e,o);var s,l=u(e);try{for(l.s();!(s=l.n()).done;){var c=s.value;o.push(this.deepCopy(c,n))}}catch(e){l.e(e)}finally{l.f()}return o}if(n.has(e))return n.get(e);if(e instanceof HTMLElement)return e;if(e instanceof RegExp)return e;var p={};for(var d in n.set(e,p),e)Object.prototype.hasOwnProperty.call(e,d)&&(p[d]=this.deepCopy(e[d],n));return p}},{key:"deepMerge",value:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){(0,o.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i],a=e[i];Array.isArray(r)?n[i]=r:n[i]=r instanceof Object&&"function"!=typeof r&&a instanceof Object?this.deepMerge(a,r):r}return n}},{key:"isNonEmptyObject",value:function(e){if(!e)return!1;for(var t in e)return!0;return!1}},{key:"sanitizeHTML",value:function(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}},{key:"escapeRegex",value:function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"throttle",value:function(e,t){var n=null,i=null;return function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];i=a,null===n&&(n=window.setTimeout(function(){i&&e.apply(void 0,(0,r.default)(i)),n=null},t))}}}])},{"@babel/runtime/helpers/classCallCheck":7,"@babel/runtime/helpers/createClass":9,"@babel/runtime/helpers/defineProperty":10,"@babel/runtime/helpers/interopRequireDefault":13,"@babel/runtime/helpers/toConsumableArray":31,"@babel/runtime/helpers/typeof":34}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default='\n/* ========================================================================\n    1. 基本設定・変数\n   ======================================================================== */\n:root {\n    /* 基本色・シャドウ */\n    --$[prefix]-text-color: #000;\n    --$[prefix]-bg: #f0f0f0;\n    --$[prefix]-border: #a0a0a0;\n    --$[prefix]-shadow-color-light: rgba(0,0,0,0.15);\n    --$[prefix]-shadow-color-strong: rgba(0,0,0,0.3);\n    --$[prefix]-shadow-color-active: rgba(0,0,0,0.45);\n\n    /* タイトルバー */\n    --$[prefix]-title-bar-height: 32px;\n    --$[prefix]-title-bar-bg: #e0e0e0;\n    --$[prefix]-title-bar-active-bg: #0078d7;\n    --$[prefix]-title-text-color: #000;\n    --$[prefix]-title-text-active-color: #fff;\n\n    /* コントロールボタン */\n    --$[prefix]-control-bg: #d0d0d0;\n    --$[prefix]-control-hover-bg: #e5e5e5;\n    --$[prefix]-control-close-hover-bg: #e81123;\n    --$[prefix]-control-close-hover-color: #fff;\n\n    /* メニュー */\n    --$[prefix]-menu-bg: #fff;\n    --$[prefix]-menu-border: #ccc;\n    --$[prefix]-menu-item-color: #000;\n    --$[prefix]-menu-item-hover-bg: #0078d7;\n    --$[prefix]-menu-item-hover-color: #fff;\n    --$[prefix]-shortcut-text-color: #666;\n\n    /* タブ */\n    --$[prefix]-tab-bg: #dcdcdc;\n    --$[prefix]-tab-active-bg: #f0f0f0;\n    --$[prefix]-tab-border: #b0b0b0;\n    --$[prefix]-tab-bar-bg: #e1e1e1;\n    --$[prefix]-tab-close-btn-hover-bg: #ccc;\n    --$[prefix]-tab-active-close-btn-hover-bg: #ddd;\n\n    /* 検索ハイライト */\n    --$[prefix]-search-highlight-bg: yellow;\n    --$[prefix]-search-highlight-active-bg: orange;\n\n    /* ポップアップボタン */\n    --$[prefix]-popup-button-hover-bg: #e9e9e9;\n    --$[prefix]-popup-button-hover-border-color: #bbb;\n\n    /* リサイズハンドル */\n    --$[prefix]-resize-handle-size: 8px;\n    --$[prefix]-resize-handle-offset: -4px;\n\n    /* タスクバー */\n    --$[prefix]-taskbar-bg: rgba(240, 240, 240, 0.9);\n    --$[prefix]-taskbar-border: #a0a0a0;\n    --$[prefix]-taskbar-item-bg: #d0d0d0;\n    --$[prefix]-taskbar-item-active-bg: #0078d7;\n    --$[prefix]-taskbar-item-active-color: #fff;\n    --$[prefix]-taskbar-height: 40px;\n    --$[prefix]-taskbar-width: 40px;\n\n    /* ローディングインジケーター */\n    --$[prefix]-loader-bg: rgba(255, 255, 255, 0.7);\n    --$[prefix]-loader-color: var(--$[prefix]-title-bar-active-bg);\n\n    /* その他 */\n    --$[prefix]-scrollbar-thumb-bg: rgba(100, 100, 100, 0.5);\n}\n\n/* ========================================================================\n    2. ユーティリティクラス\n   ========================================================================= */\n/**\n * テキスト選択を無効化\n */\n.$[prefix]-us-none {\n    user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n}\n/**\n * テキスト選択を有効化\n */\n.$[prefix]-us-auto {\n    user-select: auto;\n    -webkit-user-select: auto;\n    -ms-user-select: auto;\n}\n\n/* ========================================================================\n    3. コンテナ\n   ========================================================================= */\n/**\n * 全てのウィンドウを内包する最上位コンテナ\n */\n.$[prefix]-container {\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n    pointer-events: none;\n    overflow: hidden;\n    z-index: 999;\n    display: flex;\n    pointer-events: none;\n}\n.$[prefix]-container > * {\n    pointer-events: all; /* 子要素(workspace, taskbar)のイベントは有効化 */\n}\n/**\n * 特定の要素内にネストされた場合のコンテナ\n */\n.$[prefix]-container.$[prefix]-is-nested {\n    position: absolute;\n}\n\n.$[prefix]-workspace {\n    position: relative;\n    flex-grow: 1; /* 残りのスペースをすべて占有 */\n    overflow: hidden; /* ウィンドウがはみ出さないように */\n    min-width: 0; /* flexアイテムの縮小問題を回避 */\n    min-height: 0; /* flexアイテムの縮小問題を回避 */\n    pointer-events: none;\n}\n/**\n * タブのドラッグ中にポインターイベントを有効化し、ドロップを受け付ける\n */\n.$[prefix]-workspace.$[prefix]-is-tab-dragging {\n    pointer-events: auto;\n}\n\n/* ========================================================================\n    4. 仮想化技術\n   ======================================================================== */\n/**\n * 仮想化(アンロード)されたウィンドウ\n */\n.$[prefix]-window.$[prefix]-is-virtualized > .$[prefix]-main-content {\n    display: none;\n}\n.$[prefix]-window.$[prefix]-is-virtualized::after {\n    content: "Unloaded";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    color: var(--$[prefix]-border);\n    font-size: 1.5em;\n    font-weight: bold;\n    pointer-events: none;\n}\n\n/**\n * 中断されたウィンドウ\n */\n.$[prefix]-window.$[prefix]-is-suspended > .$[prefix]-main-content {\n    display: none;\n}\n.$[prefix]-window.$[prefix]-is-suspended::after {\n    content: "Suspended";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    color: var(--$[prefix]-border);\n    font-size: 1.5em;\n    font-weight: bold;\n    pointer-events: none;\n    z-index: 15;\n}\n\n/**\n * フリーズされたウィンドウ\n */\n.$[prefix]-window.$[prefix]-is-frozen > .$[prefix]-main-content {\n    pointer-events: none; /* コンテンツの操作を無効化 */\n}\n.$[prefix]-window.$[prefix]-is-frozen > .$[prefix]-main-content iframe {\n    visibility: hidden;\n}\n.$[prefix]-window.$[prefix]-is-frozen::after {\n    content: "Frozen";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    color: var(--$[prefix]-border);\n    background: rgba(128, 128, 128, 0.1);\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 1.5em;\n    font-weight: bold;\n    pointer-events: none;\n    z-index: 15; /* ローダーより手前 */\n}\n\n/**\n * 仮想化時の操作制限\n */\n.$[prefix]-window.$[prefix]-virtualization-lock .$[prefix]-menu-bar,\n.$[prefix]-window.$[prefix]-virtualization-lock .$[prefix]-tab-bar,\n.$[prefix]-window.$[prefix]-virtualization-lock .$[prefix]-custom-control-btn {\n    pointer-events: none;\n    opacity: 0.5;\n}\n/* ========================================================================\n    5. ウィンドウ\n   ======================================================================== */\n/* --- ウィンドウ基本スタイル --- */\n.$[prefix]-window {\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    min-width: 200px;\n    min-height: 150px;\n    border: 1px solid var(--$[prefix]-border);\n    background-color: var(--$[prefix]-bg);\n    box-shadow: 0 5px 15px var(--$[prefix]-shadow-color-strong);\n    box-sizing: border-box;\n    border-radius: 5px;\n    overflow: hidden;\n    pointer-events: all;\n    transition: opacity 0.25s, transform 0.25s;\n    touch-action: none;\n}\n\n/* --- ウィンドウ状態別スタイル --- */\n/**\n * 最小化中のウィンドウ\n */\n.$[prefix]-window.$[prefix]-is-minimizing {\n    transform: scale(0);\n    opacity: 0;\n    pointer-events: none;\n}\n\n/**\n * 最小化完了状態のウィンドウ\n */\n.$[prefix]-window.$[prefix]-minimized {\n    /* アニメーションの最終状態を維持 */\n    transform: scale(0);\n    opacity: 0;\n    /* 表示と操作を無効化 */\n    display: none;\n    pointer-events: none;\n}\n/**\n * 最大化されたウィンドウ\n */\n.$[prefix]-window.$[prefix]-maximized {\n    border-radius: 0;\n}\n/**\n * 最大化状態ではリサイズハンドルを非表示\n */\n.$[prefix]-window.$[prefix]-maximized > .$[prefix]-resize-handle {\n    display: none;\n}\n/**\n * 復元中のアニメーション（現在は状態を示すマーカーとしてのみ利用）\n */\n.$[prefix]-window.$[prefix]-is-restoring {\n    /* The transition is now handled by the base .winlet-window class */\n}\n\n/**\n * ドラッグ中・リサイズ中のトランジションを短縮し、操作性を向上\n */\n.$[prefix]-window.$[prefix]-is-dragging,\n.$[prefix]-window.$[prefix]-is-resizing {\n    transition: opacity 0.1s, transform 0.1s;\n}\n\n/**\n * アクティブ（フォーカスされている）ウィンドウ\n */\n.$[prefix]-window.$[prefix]-active {\n    box-shadow: 0 8px 25px var(--$[prefix]-shadow-color-active); /* アクティブ時のシャドウ */\n}\n/**\n * アクティブ（フォーカスされている）ウィンドウのタイトルバー\n */\n.$[prefix]-window.$[prefix]-active .$[prefix]-title-bar {\n    background-color: var(--$[prefix]-title-bar-active-bg);\n    color: var(--$[prefix]-title-text-active-color);\n}\n.$[prefix]-window.$[prefix]-active .$[prefix]-title-bar .$[prefix]-title {\n    color: var(--$[prefix]-title-text-active-color);\n}\n\n/* --- ウィンドウ特殊スタイル --- */\n/**\n * 「常に手前に表示」が有効なウィンドウ\n */\n.$[prefix]-window.$[prefix]-always-on-top .$[prefix]-title-bar {\n    background-image: repeating-linear-gradient(\n        -45deg,\n        transparent,\n        transparent 4px,\n        rgba(255, 255, 255, 0.05) 4px,\n        rgba(255, 255, 255, 0.05) 8px\n    );\n}\n\n/**\n * ウィンドウシェイクアニメーション\n */\n@keyframes $[prefix]-shake {\n    10%, 90% { transform: translate3d(-1px, 0, 0); }\n    20%, 80% { transform: translate3d(2px, 0, 0); }\n    30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }\n    40%, 60% { transform: translate3d(4px, 0, 0); }\n}\n.$[prefix]-window.$[prefix]-is-shaking {\n    animation: $[prefix]-shake 0.82s cubic-bezier(.36,.07,.19,.97) both;\n}\n\n/* ========================================================================\n    6. ゴーストウィンドウ\n   ======================================================================== */\n/**\n * ドラッグ・リサイズ時に表示される輪郭\n */\n.$[prefix]-ghost-window {\n    position: absolute;\n    box-sizing: border-box;\n    border: 2px dashed var(--$[prefix]-title-bar-active-bg);\n    background-color: rgba(0, 120, 215, 0.1);\n    z-index: 99999;\n    pointer-events: none;\n}\n\n/* ========================================================================\n    7. タイトルバー\n   ======================================================================== */\n/* --- タイトルバー基本スタイル --- */\n.$[prefix]-title-bar {\n    display: flex;\n    align-items: center;\n    height: var(--$[prefix]-title-bar-height);\n    background-color: var(--$[prefix]-title-bar-bg);\n    color: var(--$[prefix]-title-text-color);\n    cursor: move;\n    flex-shrink: 0;\n    touch-action: none;\n}\n/**\n * コントロールが左側にある場合のタイトルバー\n */\n.$[prefix]-title-bar.$[prefix]-controls-left {\n    flex-direction: row-reverse;\n}\n\n/* --- アイコン・タイトル --- */\n.$[prefix]-icon {\n    min-width: calc(var(--$[prefix]-title-bar-height) * 0.75);\n    height: calc(var(--$[prefix]-title-bar-height) * 0.75);\n    margin: 0 4px;\n    pointer-events: none;\n    flex-shrink: 0;\n}\n\n.$[prefix]-icon:empty {\n    display: none;\n}\n\n.$[prefix]-icon i {\n    font-size: calc(var(--$[prefix]-title-bar-height) * 0.5);\n    line-height: calc(var(--$[prefix]-title-bar-height) * 0.75);\n    text-align: center;\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n.$[prefix]-icon img {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n.$[prefix]-title {\n    flex-grow: 1;\n    padding: 0 8px;\n    font-family: sans-serif;\n    font-size: calc(var(--$[prefix]-title-bar-height) * 0.44);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    pointer-events: none;\n}\n\n.$[prefix]-title-bar.$[prefix]-controls-left .$[prefix]-title {\n    text-align: right;\n}\n\n/* --- コントロールボタン --- */\n.$[prefix]-controls {\n    display: flex;\n    height: 100%;\n    margin-left: auto;\n    flex-shrink: 0;\n}\n\n.$[prefix]-title-bar.$[prefix]-controls-left .$[prefix]-controls {\n    margin-left: 0;\n    margin-right: auto;\n    flex-direction: row-reverse;\n}\n\n.$[prefix]-control-btn {\n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n    width: calc(var(--$[prefix]-title-bar-height) * 1.3);\n    height: 100%;\n    border: none;\n    border-radius: 0;\n    box-sizing: border-box;\n    background-color: transparent;\n    font-size: calc(var(--$[prefix]-title-bar-height) * 0.5);\n    cursor: pointer;\n    text-align: center;\n    vertical-align: middle;\n    font-family: sans-serif;\n    transition: background-color 0.2s;\n    touch-action: auto;\n    padding: 0;\n    margin: 0;\n    color: inherit;\n}\n\n.$[prefix]-custom-control-btn > * {\n    pointer-events: none;\n}\n\n.$[prefix]-control-btn:hover {\n    background-color: var(--$[prefix]-control-hover-bg);\n}\n\n.$[prefix]-control-btn.$[prefix]-close-btn:hover {\n    background-color: var(--$[prefix]-control-close-hover-bg);\n    color: var(--$[prefix]-control-close-hover-color);\n}\n\n.$[prefix]-refresh-btn {\n    display: none;\n}\n\n.$[prefix]-window.$[prefix]-is-virtualized-manual .$[prefix]-refresh-btn {\n    display: inline-flex;\n}\n\n/* ========================================================================\n    8. メインコンテンツエリア\n   ======================================================================== */\n.$[prefix]-main-content {\n    all: initial;\n    position: relative;\n    display:flex;\n    color: var(--$[prefix]-text-color);\n    flex-direction:column;\n    flex-grow:1;\n    overflow:hidden;\n}\n\n.$[prefix]-content {\n    display: flex;\n    flex-direction: column;\n    flex-grow: 1;\n    position: relative;\n    overflow: auto;\n    touch-action: auto;\n}\n\n.$[prefix]-content iframe {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    border: none;\n}\n\n/* --- ローディングインジケーター --- */\n.$[prefix]-loader-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: var(--$[prefix]-loader-bg);\n    display: none;\n    justify-content: center;\n    align-items: center;\n    z-index: 20;\n}\n@keyframes $[prefix]-spinner-rotation {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n}\n.$[prefix]-loader-spinner {\n    width: 48px;\n    height: 48px;\n    border-radius: 50%;\n    border: 5px solid #fff;\n    border-bottom-color: var(--$[prefix]-loader-color);\n    animation: $[prefix]-spinner-rotation 1s linear infinite;\n}\n\n.$[prefix]-canvas-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: none;\n    z-index: 10;\n}\n.$[prefix]-canvas-overlay img {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n}\n\n/* ========================================================================\n    9. メニューバー\n   ======================================================================== */\n.$[prefix]-menu-bar {\n    color: var(--$[prefix]-menu-item-color);\n    display: flex;\n    background-color: var(--$[prefix]-bg);\n    padding: 2px;\n    flex-shrink: 0;\n    border-bottom: 1px solid var(--$[prefix]-border);\n    touch-action: auto;\n}\n\n.$[prefix]-menu-item {\n    font-family: sans-serif;\n    font-size: clamp(0px , calc(var(--winlet-title-bar-height) * 0.6), 14px);\n    padding: 4px 8px;\n    cursor: default;\n    position: relative;\n}\n\n.$[prefix]-menu-item:hover {\n    background-color: var(--$[prefix]-menu-item-hover-bg);\n    color: var(--$[prefix]-menu-item-hover-color);\n}\n\n/* --- ドロップダウンメニュー --- */\n.$[prefix]-menu-dropdown {\n    color: var(--$[prefix]-menu-item-color);\n    display: none;\n    position: absolute;\n    top: 100%;\n    left: 0;\n    background-color: var(--$[prefix]-menu-bg);\n    border: 1px solid var(--$[prefix]-menu-border);\n    box-shadow: 0 2px 8px var(--$[prefix]-shadow-color-light);\n    list-style: none;\n    margin: 0;\n    padding: 4px 0;\n    min-width: 150px;\n    z-index: 10;\n    touch-action: auto;\n}\n\n.$[prefix]-menu-dropdown li {\n    padding: 0 20px;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.$[prefix]-menu-dropdown li:hover {\n    background-color: var(--$[prefix]-menu-item-hover-bg);\n    color: var(--$[prefix]-menu-item-hover-color);\n}\n\n.$[prefix]-menu-dropdown li.$[prefix]-separator {\n    height: 1px;\n    background-color: var(--$[prefix]-menu-border);\n    margin: 4px 0;\n    padding: 0;\n}\n\n.$[prefix]-menu-dropdown-item {\n    display: flex;\n    line-height: 1.6em;\n    flex-wrap: nowrap;\n    justify-content: space-between;\n    width: 100%;\n    white-space: nowrap;\n}\n\n/* --- サブメニュー --- */\n.$[prefix]-menu-dropdown li.$[prefix]-has-submenu {\n    position: relative;\n}\n.$[prefix]-menu-dropdown li.$[prefix]-has-submenu::after {\n    content: \'▶\';\n    position: absolute;\n    top: 50%;\n    right: 10px;\n    margin-top: calc(var(--winlet-title-bar-height) * -0.5);\n    font-size: 0.8em;\n    color: inherit;\n}\n/**\n * ネストされたサブメニューの表示位置\n */\n.$[prefix]-menu-dropdown li.$[prefix]-has-submenu > .$[prefix]-menu-dropdown {\n    top: -5px; /* liのpaddingを考慮 */\n    left: 100%;\n}\n/**\n * サブメニューはホバーで開く\n */\n.$[prefix]-menu-dropdown li.$[prefix]-has-submenu:hover > .$[prefix]-menu-dropdown {\n    display: block;\n}\n\n/* --- ショートカットテキスト --- */\n.$[prefix]-shortcut-text {\n    color: var(--$[prefix]-shortcut-text-color);\n    margin-left: 1em;\n}\n.$[prefix]-menu-dropdown li:hover .$[prefix]-shortcut-text {\n    color: inherit;\n}\n\n/* --- タブ --- */\n.$[prefix]-tab-bar {\n    color: var(--$[prefix]-menu-item-color);\n    overflow-x: auto;\n    overflow-y: hidden;\n    -ms-overflow-style: -ms-autohiding-scrollbar;\n    scrollbar-width: thin;\n    display: flex;\n    background-color: var(--$[prefix]-tab-bar-bg);\n    flex-shrink: 0;\n    align-items: flex-end;\n    touch-action: auto;\n}\n\n.$[prefix]-tab-bar::-webkit-scrollbar{\n    width: 6px;\n    height: 6px;\n}\n\n.$[prefix]-tab-bar::-webkit-scrollbar-thumb {\n    background-color: var(--$[prefix]-scrollbar-thumb-bg);\n    border-radius: 3px;\n}\n\n.$[prefix]-tab-bar::-webkit-scrollbar-track {\n    background-color: transparent;\n}\n\n/* --- タブ --- */\n.$[prefix]-tab {\n    white-space: nowrap;\n    padding: 8px 16px;\n    font-family: sans-serif;\n    font-size: 14px;\n    cursor: pointer;\n    border-right: 1px solid var(--$[prefix]-tab-border);\n    background-color: var(--$[prefix]-tab-bg);\n}\n\n.$[prefix]-tab.$[prefix]-active {\n    background-color: var(--$[prefix]-tab-active-bg);\n    border-bottom: 2px solid var(--$[prefix]-title-bar-active-bg);\n}\n\n.$[prefix]-tab.$[prefix]-active .$[prefix]-tab-close-btn:hover {\n    background-color: var(--$[prefix]-tab-active-close-btn-hover-bg);\n}\n\n/**\n * ドラッグ中のタブのスタイル\n */\n.$[prefix]-tab.$[prefix]-dragging {\n    opacity: 0.5;\n}\n\n/* --- タブ関連ボタン --- */\n/**\n * タブの閉じるボタン\n */\n.$[prefix]-tab-close-btn {\n    margin-left: 8px;\n    padding: 0 4px;\n    border-radius: 50%;\n    cursor: pointer;\n    font-weight: bold;\n    font-size: 14px;\n    line-height: 1;\n}\n.$[prefix]-tab-close-btn:hover {\n    background-color: var(--$[prefix]-tab-close-btn-hover-bg);\n}\n\n/**\n * タブ追加ボタン\n */\n.$[prefix]-tab-add-btn {\n    padding: 8px;\n    font-size: 14px;\n    cursor: pointer;\n    border-bottom: 1px solid var(--$[prefix]-tab-border);\n}\n.$[prefix]-tab-add-btn:hover {\n    background-color: var(--$[prefix]-title-bar-bg);\n}\n\n/* --- タブコンテンツ --- */\n.$[prefix]-tab-content {\n    display: none;\n}\n\n.$[prefix]-tab-content.$[prefix]-active {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n/* ========================================================================\n    10. 分割ビュー (Split View)\n   ======================================================================== */\n.$[prefix]-split-view {\n    display: flex;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n}\n.$[prefix]-split-view-horizontal {\n    flex-direction: row;\n}\n.$[prefix]-split-view-vertical {\n    flex-direction: column;\n}\n.$[prefix]-split-pane {\n    position: relative;\n    overflow: auto;\n}\n.$[prefix]-split-resizer {\n    background-color: var(--$[prefix]-border);\n    flex-shrink: 0;\n    z-index: 1;\n    transition: background-color 0.2s;\n}\n.$[prefix]-split-resizer:hover {\n    background-color: var(--$[prefix]-title-bar-active-bg);\n}\n.$[prefix]-split-view-horizontal > .$[prefix]-split-resizer {\n    width: 4px;\n    cursor: col-resize;\n}\n.$[prefix]-split-view-vertical > .$[prefix]-split-resizer {\n    height: 4px;\n    cursor: row-resize;\n}\n\n/* ========================================================================\n    11. ステータスバー (Status Bar)\n   ======================================================================== */\n.$[prefix]-statusbar {\n    flex-shrink: 0;\n    height: 24px;\n    line-height: 24px;\n    padding: 0 8px;\n    background-color: var(--$[prefix]-title-bar-bg);\n    border-top: 1px solid var(--$[prefix]-border);\n    font-size: 12px;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    user-select: none;\n}\n\n/* ========================================================================\n    12. ウィンドウ内検索 (In-window Search)\n   ======================================================================== */\n.$[prefix]-search-bar {\n    position: absolute;\n    top: 0;\n    right: 0;\n    background-color: var(--$[prefix]-bg);\n    border: 1px solid var(--$[prefix]-border);\n    box-shadow: var(--$[prefix]-shadow-color-light) -2px 2px 5px;\n    padding: 4px;\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    border-radius: 3px;\n    z-index: 80;\n}\n.$[prefix]-search-input {\n    border: 1px solid var(--$[prefix]-border);\n    padding: 2px 4px;\n    width: 150px;\n}\n.$[prefix]-search-results {\n    font-size: 12px;\n    padding: 0 4px;\n}\n.$[prefix]-search-btn {\n    border: 1px solid var(--$[prefix]-border);\n    background-color: var(--$[prefix]-bg);\n    cursor: pointer;\n    padding: 2px 4px;\n    font-size: 12px;\n    min-width: 22px;\n}\n.$[prefix]-search-btn:hover {\n    background-color: var(--$[prefix]-popup-button-hover-bg);\n}\n.$[prefix]-search-btn-active {\n    background-color: var(--$[prefix]-title-bar-active-bg);\n    color: var(--$[prefix]-title-bar-active-color);\n}\n.$[prefix]-search-highlight {\n    background-color: var(--$[prefix]-search-highlight-bg);\n    color: black;\n}\n.$[prefix]-search-highlight-active {\n    background-color: var(--$[prefix]-search-highlight-active-bg);\n}\n\n/* ========================================================================\n    13. リサイズハンドル\n   ======================================================================== */\n.$[prefix]-resize-handle {\n    position: absolute;\n    z-index: 5;\n    touch-action: none;\n}\n\n.$[prefix]-resize-handle.n { top: var(--$[prefix]-resize-handle-offset); left: 0; right: 0; height: var(--$[prefix]-resize-handle-size); cursor: n-resize; }\n.$[prefix]-resize-handle.s { bottom: var(--$[prefix]-resize-handle-offset); left: 0; right: 0; height: var(--$[prefix]-resize-handle-size); cursor: s-resize; }\n.$[prefix]-resize-handle.w { top: 0; bottom: 0; left: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); cursor: w-resize; }\n.$[prefix]-resize-handle.e { top: 0; bottom: 0; right: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); cursor: e-resize; }\n.$[prefix]-resize-handle.nw { top: var(--$[prefix]-resize-handle-offset); left: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); height: var(--$[prefix]-resize-handle-size); cursor: nw-resize; }\n.$[prefix]-resize-handle.ne { top: var(--$[prefix]-resize-handle-offset); right: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); height: var(--$[prefix]-resize-handle-size); cursor: ne-resize; }\n.$[prefix]-resize-handle.sw { bottom: var(--$[prefix]-resize-handle-offset); left: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); height: var(--$[prefix]-resize-handle-size); cursor: sw-resize; }\n.$[prefix]-resize-handle.se { bottom: var(--$[prefix]-resize-handle-offset); right: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); height: var(--$[prefix]-resize-handle-size); cursor: se-resize; }\n\n/* ========================================================================\n    14. コンテキストメニュー\n   ======================================================================== */\n.$[prefix]-context-menu {\n    color: var(--$[prefix]-menu-item-color);\n    pointer-events: all;\n    position: fixed;\n    z-index: 10000;\n    background-color: var(--$[prefix]-menu-bg);\n    border: 1px solid var(--$[prefix]-menu-border);\n    box-shadow: 0 2px 8px var(--$[prefix]-shadow-color-light);\n    list-style: none;\n    margin: 0;\n    padding: 4px 0;\n    min-width: 160px;\n}\n.$[prefix]-context-menu li {\n    padding: 6px 24px;\n    font-family: sans-serif;\n    font-size: 14px;\n    cursor: pointer;\n}\n.$[prefix]-context-menu li:hover {\n    background-color: var(--$[prefix]-menu-item-hover-bg);\n    color: var(--$[prefix]-menu-item-hover-color);\n}\n.$[prefix]-context-menu li.$[prefix]-separator {\n    height: 1px;\n    background-color: var(--$[prefix]-menu-border);\n    margin: 4px 0;\n    padding: 0;\n}\n\n/* ========================================================================\n    15. ポップアップ\n   ======================================================================== */\n.$[prefix]-popup-window .$[prefix]-content {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    padding: 20px;\n    box-sizing: border-box;\n}\n.$[prefix]-popup-message {\n    font-family: sans-serif;\n    font-size: 14px;\n    line-height: 1.5;\n    flex-grow: 1;\n    word-wrap: break-word;\n}\n.$[prefix]-popup-buttons {\n    display: flex;\n    justify-content: flex-end;\n    gap: 10px;\n    margin-top: 20px;\n    flex-shrink: 0;\n    touch-action: auto;\n}\n.$[prefix]-popup-button {\n    color: var(--$[prefix]-menu-item-color);\n    min-width: 80px;\n    padding: 8px 12px;\n    margin: 0;\n    border: 1px solid var(--$[prefix]-menu-border);\n    border-radius: 3px;\n    background-color: var(--$[prefix]-bg);\n    cursor: pointer;\n    font-size: 14px;\n    box-shadow: 0 1px 1px var(--$[prefix]-shadow-color-light);\n}\n.$[prefix]-popup-button:hover {\n    border-color: var(--$[prefix]-popup-button-hover-border-color);\n    background-color: var(--$[prefix]-popup-button-hover-bg);\n}\n.$[prefix]-popup-button:active {\n    background-color: var(--$[prefix]-tab-bg);\n}\n\n/* ========================================================================\n    16. 統合スタイル (Merged Styles)\n   ======================================================================== */\n/* --- メニュー/タブ統合時の基本タイトルバー --- */\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-title-bar,\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-title-bar {\n    height: auto;\n    align-items: flex-end;\n    padding: 0;\n}\n\n/* --- メニュー統合スタイル --- */\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-icon {\n    margin-block: auto;\n}\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-title {\n    flex-grow: 1;\n    margin-block: auto;\n}\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-menu-bar {\n    border-bottom: none;\n    background: transparent;\n    padding: 0 6px;\n    align-self: center;\n}\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-menu-item {\n    line-height: var(--$[prefix]-title-bar-height);\n    padding-top: 0;\n    padding-bottom: 0;\n}\n/* アクティブウィンドウの統合メニューの文字色 */\n.$[prefix]-window.$[prefix]-menu-style-merged.$[prefix]-active:not(.$[prefix]-tab-style-merged) .$[prefix]-menu-item {\n    color: var(--winlet-menu-item-hover-color);\n}\n.$[prefix]-window.$[prefix]-menu-style-merged.$[prefix]-active:not(.$[prefix]-tab-style-merged) .$[prefix]-menu-item:hover {\n    background-color: var(--$[prefix]-title-bar-bg);\n    color: var(--$[prefix]-menu-item-color);\n}\n\n/* --- タブ統合スタイル (Chrome風) --- */\n.$[prefix]-window.$[prefix]-tab-style-merged.$[prefix]-window.$[prefix]-active .$[prefix]-title-bar {\n    background-color: var(--$[prefix]-title-bar-bg);\n}\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-title {\n    display: none;\n}\n\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab-bar {\n    background-color: transparent;\n    flex-grow: 1;\n    flex-shrink: 1;\n    min-width: 0;\n    align-items: flex-end;\n    height: calc(var(--$[prefix]-title-bar-height) + 4px);\n    margin: 0;\n    order: 1; /* controlsより前に配置 */\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n}\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab-bar::-webkit-scrollbar{\n    display: none;\n}\n.$[prefix]-window.$[prefix]-title-bar.$[prefix]-controls-left .$[prefix]-tab-bar {\n    order: -1;\n}\n\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab {\n    border: 1px solid var(--$[prefix]-border);\n    border-bottom: none;\n    border-radius: 6px 6px 0 0;\n    margin-top: 4px;\n    margin-left: -1px;\n    position: relative;\n    bottom: -1px;\n}\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab.$[prefix]-active {\n    background-color: var(--$[prefix]-bg);\n    border-color: var(--$[prefix]-border);\n    border-bottom: 1px solid var(--$[prefix]-bg);\n    z-index: 2;\n}\n\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab-add-btn {\n    border: none;\n    align-self: center;\n}\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-main-content {\n    border-top: none;\n}\n\n/* --- 統合時のコントロールボタン --- */\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-controls,\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-controls {\n    align-self: flex-start;\n    order: 2;\n}\n\n/* ========================================================================\n    17. タスクバー\n   ======================================================================== */\n.$[prefix]-taskbar {\n    position: absolute;\n    background-color: var(--$[prefix]-taskbar-bg);\n    box-sizing: border-box;\n    display: flex;\n    align-items: center;\n    padding: 0 5px;\n    z-index: 50000;\n    flex-shrink: 0;\n    display: flex;\n    gap: 5px;\n    overflow: auto;\n    scrollbar-width: none;\n    -ms-overflow-style: none;\n    backdrop-filter: blur(5px);\n    pointer-events: all;\n}\n.$[prefix]-taskbar::-webkit-scrollbar{\n    display: none;\n}\n\n/* --- 位置 --- */\n.$[prefix]-taskbar.$[prefix]-taskbar-bottom {\n    bottom: 0;\n    left: 0;\n    border-top: 1px solid var(--$[prefix]-taskbar-border);\n}\n.$[prefix]-taskbar.$[prefix]-taskbar-top {\n    top: 0;\n    left: 0;\n    border-bottom: 1px solid var(--$[prefix]-taskbar-border);\n}\n.$[prefix]-taskbar.$[prefix]-taskbar-left {\n    top: 0;\n    left: 0;\n    border-right: 1px solid var(--$[prefix]-taskbar-border);\n}\n.$[prefix]-taskbar.$[prefix]-taskbar-right {\n    top: 0;\n    right: 0;\n    border-left: 1px solid var(--$[prefix]-taskbar-border);\n}\n\n.$[prefix]-taskbar.$[prefix]-taskbar-bottom,\n.$[prefix]-taskbar.$[prefix]-taskbar-top {\n    --$[prefix]-taskbar-icon-size: var(--$[prefix]-taskbar-height);\n    width: 100%;\n    height: var(--$[prefix]-taskbar-height);\n    flex-direction: row;\n}\n.$[prefix]-taskbar.$[prefix]-taskbar-left,\n.$[prefix]-taskbar.$[prefix]-taskbar-right {\n    --$[prefix]-taskbar-icon-size: var(--$[prefix]-taskbar-width);\n    width: var(--$[prefix]-taskbar-width);\n    height: 100%;\n    flex-direction: column;\n}\n\n\n.$[prefix]-taskbar-item {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: auto;\n    height: calc(var(--winlet-taskbar-icon-size) - 6px);\n    padding: 0 10px;\n    border-radius: 3px;\n    background-color: var(--$[prefix]-taskbar-item-bg);\n    cursor: pointer;\n    flex-shrink: 0;\n    max-width: 150px;\n    transition: background-color 0.2s;\n    font-family: sans-serif;\n    font-size: 14px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    box-sizing: border-box;\n}\n/* 縦向きタスクバーのアイテム */\n.$[prefix]-taskbar.$[prefix]-taskbar-left .$[prefix]-taskbar-item,\n.$[prefix]-taskbar.$[prefix]-taskbar-right .$[prefix]-taskbar-item {\n    width: calc(var(--winlet-taskbar-icon-size) - 6px);\n    height: auto;\n    min-height: 40px;\n    max-width: none;\n    padding: 10px 0;\n    writing-mode: vertical-rl;\n}\n\n.$[prefix]-taskbar-item-icon {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n.$[prefix]-taskbar-item-icon img {\n    width: calc(var(--winlet-taskbar-icon-size) - 6px);\n    height: calc(var(--winlet-taskbar-icon-size) - 6px);\n    object-fit: contain;\n}\n.$[prefix]-taskbar-item-icon i {\n    font-size: calc((var(--winlet-taskbar-icon-size) - 12px) * 0.8);\n    line-height: calc(var(--winlet-taskbar-icon-size) - 18px);\n    text-align: center;\n    object-fit: contain;\n}\n.$[prefix]-taskbar-item.$[prefix]-icon-only {\n    width: calc(var(--winlet-taskbar-icon-size) - 6px);\n    height: calc(var(--winlet-taskbar-icon-size) - 6px);\n    padding: 6px;\n}\n/* 縦向きアイコンモード */\n.$[prefix]-taskbar.$[prefix]-taskbar-left .$[prefix]-taskbar-item.$[prefix]-icon-only,\n.$[prefix]-taskbar.$[prefix]-taskbar-right .$[prefix]-taskbar-item.$[prefix]-icon-only {\n    width: calc(var(--winlet-taskbar-icon-size) - 6px);\n    height: calc(var(--winlet-taskbar-icon-size) - 6px);\n}\n\n.$[prefix]-taskbar-item.$[prefix]-active {\n    background-color: var(--$[prefix]-taskbar-item-active-bg);\n    color: var(--$[prefix]-taskbar-item-active-color);\n}\n.$[prefix]-taskbar-item.$[prefix]-minimized {\n    opacity: 0.7;\n}\n\n/**\n * 仮想化されたウィンドウを示すタスクバーアイテム\n */\n.$[prefix]-taskbar-item.$[prefix]-virtualized {\n    filter: grayscale(80%);\n    opacity: 0.7;\n    font-style: italic;\n}\n.$[prefix]-taskbar-item.$[prefix]-virtualized .$[prefix]-taskbar-item-icon img {\n    width: calc(var(--winlet-taskbar-icon-size) - 9px);\n    height: calc(var(--winlet-taskbar-icon-size) - 9px);\n}\n.$[prefix]-taskbar-item.$[prefix]-virtualized .$[prefix]-taskbar-item-icon i {\n    font-size: calc((var(--winlet-taskbar-icon-size) - 18px) * 0.8);\n    line-height: calc(var(--winlet-taskbar-icon-size) - 27px);\n}\n\n/* ========================================================================\n    18. モバイル・タッチデバイス対応\n   ======================================================================== */\n@media (pointer: coarse), (max-width: 768px) {\n    /* リサイズハンドルとコントロールボタンを大きくして操作しやすくする */\n    :root {\n        --$[prefix]-resize-handle-size: 16px;\n        --$[prefix]-resize-handle-offset: -8px;\n    }\n    .$[prefix]-control-btn {\n        width: calc(var(--$[prefix]-title-bar-height) * 1.5);\n    }\n}\n\n/* ========================================================================\n    19. ハイコントラストモード対応\n   ======================================================================== */\n/* high-contrast.tsと合わせる */\n@media (prefers-contrast: more) {\n    .$[prefix]-window,\n    .$[prefix]-window.$[prefix]-active {\n        box-shadow: none;\n    }\n    .$[prefix]-window.$[prefix]-active {\n        border: 2px solid var(--$[prefix]-title-bar-active-bg);\n    }\n}\n\n/* ========================================================================\n    20. アニメーション無効化\n   ======================================================================== */\n.$[prefix]-container.$[prefix]-animations-disabled .$[prefix]-window,\n.$[prefix]-container.$[prefix]-animations-disabled .$[prefix]-window.$[prefix]-minimized,\n.$[prefix]-container.$[prefix]-animations-disabled .$[prefix]-window.$[prefix]-maximized,\n.$[prefix]-container.$[prefix]-animations-disabled .$[prefix]-window.$[prefix]-is-restoring {\n    transition: none;\n}\n\n/* ========================================================================\n    21. デバッグモード\n   ======================================================================== */\n.$[prefix]-debug-overlay {\n    display: none;\n    position: absolute;\n    top: calc(var(--$[prefix]-title-bar-height) + 5px);\n    left: 5px;\n    background: rgba(0,0,0,0.5);\n    color: #fff;\n    padding: 5px;\n    border-radius: 3px;\n    font-family: monospace;\n    font-size: 12px;\n    line-height: 1.4;\n    pointer-events: none;\n    z-index: 100;\n    white-space: pre;\n}\n\n.$[prefix]-container.$[prefix]-debug-mode-enabled .$[prefix]-debug-overlay {\n    display: block;\n}\n'},{}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.darkTheme=void 0;n.darkTheme={name:"dark",variables:{"--$[prefix]-text-color":"#e0e0e0","--$[prefix]-bg":"#2d2d2d","--$[prefix]-border":"#555","--$[prefix]-shadow-color-light":"rgba(0,0,0,0.3)","--$[prefix]-shadow-color-strong":"rgba(0,0,0,0.5)","--$[prefix]-shadow-color-active":"rgba(0,0,0,0.7)","--$[prefix]-title-bar-bg":"#3c3c3c","--$[prefix]-title-text-color":"#e0e0e0","--$[prefix]-title-text-active-color":"#fff","--$[prefix]-control-bg":"#4a4a4a","--$[prefix]-control-hover-bg":"#5a5a5a","--$[prefix]-menu-bg":"#252525","--$[prefix]-menu-border":"#444","--$[prefix]-menu-item-color":"#e0e0e0","--$[prefix]-shortcut-text-color":"#b0b0b0","--$[prefix]-tab-bg":"#383838","--$[prefix]-tab-active-bg":"#2d2d2d","--$[prefix]-tab-border":"#505050","--$[prefix]-tab-bar-bg":"#383838","--$[prefix]-tab-close-btn-hover-bg":"#5a5a5a","--$[prefix]-tab-active-close-btn-hover-bg":"#6a6a6a","--$[prefix]-popup-button-hover-bg":"#5a5a5a","--$[prefix]-popup-button-hover-border-color":"#777","--$[prefix]-taskbar-bg":"rgba(45, 45, 45, 0.9)","--$[prefix]-taskbar-border":"#555","--$[prefix]-taskbar-item-bg":"#5a5a5a","--$[prefix]-scrollbar-thumb-bg":"rgba(180, 180, 180, 0.5)"}}},{}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.defaultTheme=void 0;n.defaultTheme={name:"default",variables:{"--$[prefix]-text-color":"#000","--$[prefix]-bg":"#f0f0f0","--$[prefix]-border":"#a0a0a0","--$[prefix]-shadow-color-light":"rgba(0,0,0,0.15)","--$[prefix]-shadow-color-strong":"rgba(0,0,0,0.3)","--$[prefix]-shadow-color-active":"rgba(0,0,0,0.45)","--$[prefix]-title-bar-bg":"#e0e0e0","--$[prefix]-title-bar-active-bg":"#0078d7","--$[prefix]-title-text-color":"#000","--$[prefix]-title-text-active-color":"#fff","--$[prefix]-control-bg":"#d0d0d0","--$[prefix]-control-hover-bg":"#e5e5e5","--$[prefix]-control-close-hover-bg":"#e81123","--$[prefix]-control-close-hover-color":"#fff","--$[prefix]-menu-bg":"#fff","--$[prefix]-menu-border":"#ccc","--$[prefix]-menu-item-color":"#000","--$[prefix]-menu-item-hover-bg":"#0078d7","--$[prefix]-menu-item-hover-color":"#fff","--$[prefix]-shortcut-text-color":"#666","--$[prefix]-tab-bg":"#dcdcdc","--$[prefix]-tab-active-bg":"#f0f0f0","--$[prefix]-tab-border":"#b0b0b0","--$[prefix]-tab-bar-bg":"#e1e1e1","--$[prefix]-tab-close-btn-hover-bg":"#ccc","--$[prefix]-tab-active-close-btn-hover-bg":"#ddd","--$[prefix]-search-highlight-bg":"yellow","--$[prefix]-search-highlight-active-bg":"orange","--$[prefix]-popup-button-hover-bg":"#e9e9e9","--$[prefix]-popup-button-hover-border-color":"#bbb","--$[prefix]-taskbar-bg":"rgba(240, 240, 240, 0.9)","--$[prefix]-taskbar-border":"#a0a0a0","--$[prefix]-taskbar-item-bg":"#d0d0d0","--$[prefix]-taskbar-item-active-bg":"#0078d7","--$[prefix]-taskbar-item-active-color":"#fff","--$[prefix]-loader-bg":"rgba(255, 255, 255, 0.7)","--$[prefix]-loader-color":"var(--$[prefix]-title-bar-active-bg)","--$[prefix]-scrollbar-thumb-bg":"rgba(100, 100, 100, 0.5)"}}},{}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.highContrastTheme=void 0;n.highContrastTheme={name:"high-contrast",variables:{"--$[prefix]-text-color":"#fff","--$[prefix]-bg":"#000","--$[prefix]-border":"#fff","--$[prefix]-shadow-color-light":"transparent","--$[prefix]-shadow-color-strong":"transparent","--$[prefix]-shadow-color-active":"transparent","--$[prefix]-title-bar-bg":"#000","--$[prefix]-title-bar-active-bg":"#0000ff","--$[prefix]-title-text-color":"#fff","--$[prefix]-title-text-active-color":"#000","--$[prefix]-control-bg":"#000","--$[prefix]-control-hover-bg":"#444","--$[prefix]-control-close-hover-bg":"#ff0000","--$[prefix]-control-close-hover-color":"#fff","--$[prefix]-menu-bg":"#000","--$[prefix]-menu-border":"#fff","--$[prefix]-menu-item-color":"#fff","--$[prefix]-menu-item-hover-bg":"#0000ff","--$[prefix]-menu-item-hover-color":"#fff","--$[prefix]-tab-bg":"#000","--$[prefix]-tab-active-bg":"#000","--$[prefix]-tab-border":"#fff","--$[prefix]-taskbar-bg":"rgba(0, 0, 0, 0.9)","--$[prefix]-taskbar-border":"#fff","--$[prefix]-taskbar-item-bg":"#000","--$[prefix]-taskbar-item-active-bg":"#0000ff","--$[prefix]-taskbar-item-active-color":"#fff"}}},{}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LIB_VERSION=void 0;n.LIB_VERSION="v1.0.3.0"},{}]},{},[43]);
//# sourceMappingURL=winlet.min.js.map