!function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){return r(t[a][1][e]||e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){t.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i},t.exports.__esModule=!0,t.exports.default=t.exports},{}],2:[function(e,t,n){var i=e("./arrayLikeToArray.js");t.exports=function(e){if(Array.isArray(e))return i(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayLikeToArray.js":1}],3:[function(e,t,n){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],4:[function(e,t,n){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],5:[function(e,t,n){var i=e("./isNativeReflectConstruct.js"),r=e("./setPrototypeOf.js");t.exports=function(e,t,n){if(i())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,t);var a=new(e.bind.apply(e,o));return n&&r(a,n.prototype),a},t.exports.__esModule=!0,t.exports.default=t.exports},{"./isNativeReflectConstruct.js":12,"./setPrototypeOf.js":16}],6:[function(e,t,n){var i=e("./toPropertyKey.js");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}t.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPropertyKey.js":19}],7:[function(e,t,n){var i=e("./toPropertyKey.js");t.exports=function(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPropertyKey.js":19}],8:[function(e,t,n){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],9:[function(e,t,n){var i=e("./setPrototypeOf.js");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./setPrototypeOf.js":16}],10:[function(e,t,n){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],11:[function(e,t,n){t.exports=function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],12:[function(e,t,n){function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(t.exports=i=function(){return!!e},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],13:[function(e,t,n){t.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{}],14:[function(e,t,n){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],15:[function(e,t,n){var i=e("./typeof.js").default,r=e("./assertThisInitialized.js");t.exports=function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./assertThisInitialized.js":3,"./typeof.js":20}],16:[function(e,t,n){function i(e,n){return t.exports=i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},t.exports.__esModule=!0,t.exports.default=t.exports,i(e,n)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],17:[function(e,t,n){var i=e("./arrayWithoutHoles.js"),r=e("./iterableToArray.js"),o=e("./unsupportedIterableToArray.js"),a=e("./nonIterableSpread.js");t.exports=function(e){return i(e)||r(e)||o(e)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayWithoutHoles.js":2,"./iterableToArray.js":13,"./nonIterableSpread.js":14,"./unsupportedIterableToArray.js":21}],18:[function(e,t,n){var i=e("./typeof.js").default;t.exports=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./typeof.js":20}],19:[function(e,t,n){var i=e("./typeof.js").default,r=e("./toPrimitive.js");t.exports=function(e){var t=r(e,"string");return"symbol"==i(t)?t:t+""},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPrimitive.js":18,"./typeof.js":20}],20:[function(e,t,n){function i(e){return t.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],21:[function(e,t,n){var i=e("./arrayLikeToArray.js");t.exports=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayLikeToArray.js":1}],22:[function(e,t,n){var i=e("./getPrototypeOf.js"),r=e("./setPrototypeOf.js"),o=e("./isNativeFunction.js"),a=e("./construct.js");function s(e){var n="function"==typeof Map?new Map:void 0;return t.exports=s=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,i(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports,s(e)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},{"./construct.js":5,"./getPrototypeOf.js":8,"./isNativeFunction.js":11,"./setPrototypeOf.js":16}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.defaultConfig=void 0;n.defaultConfig={id:null,ifExists:"focus",title:"New Window",icon:null,x:"auto",y:"auto",width:500,height:400,minWidth:200,minHeight:150,resizableX:!0,resizableY:!0,movable:!0,closable:!0,minimizable:!0,maximizable:!0,maximizableOnDblClick:!0,enableShortcuts:!0,controlsPosition:"right",content:{html:"",iframe:{src:"",srcdoc:"",allow:"",referrerPolicy:"",loading:"lazy",sandbox:"",loadWinLet:!1},template:""},menu:[],menuStyle:"default",tabs:[],tabStyle:"default",tabOptions:{reorderable:!1,closable:!1,addable:!1,detachable:!1,mergeable:!1,allowIncomingMerge:!1,onAdd:void 0,onMergeAttempt:void 0},contextMenu:[],focus:!0,onOpen:function(){},onClose:function(){},onFocus:function(){},onBlur:function(){},onResize:function(){},onMove:function(){},onReload:function(){},_isPopup:!1,_parent:null}},{}],24:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.WinLetError=n.WinLetBaseError=n.SimpleError=void 0;var r=i(e("@babel/runtime/helpers/createClass")),o=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/possibleConstructorReturn")),s=i(e("@babel/runtime/helpers/getPrototypeOf")),l=i(e("@babel/runtime/helpers/inherits")),c=i(e("@babel/runtime/helpers/wrapNativeSuper"));function u(e,t,n){return t=(0,s.default)(t),(0,a.default)(e,d()?Reflect.construct(t,n||[],(0,s.default)(e).constructor):t.apply(e,n))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(d=function(){return!!e})()}var p=n.WinLetBaseError=function(e){function t(e){var n;(0,o.default)(this,t),(n=u(this,t,[e])).name=n.constructor.name;var i=Error;return i.captureStackTrace&&i.captureStackTrace(n,n.constructor),n}return(0,l.default)(t,e),(0,r.default)(t)}((0,c.default)(Error)),f=n.SimpleError=function(e){function t(e){return(0,o.default)(this,t),u(this,t,[e])}return(0,l.default)(t,e),(0,r.default)(t)}(p);n.WinLetError=function(e){function t(){return(0,o.default)(this,t),u(this,t,arguments)}return(0,l.default)(t,e),(0,r.default)(t)}(f)},{"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":6,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":15,"@babel/runtime/helpers/wrapNativeSuper":22}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TIMEOUT_RESULT=n.LIBRARY_NAME=n.CLOSE_BUTTON_RESULT=void 0;n.LIBRARY_NAME="winlet",n.TIMEOUT_RESULT=Symbol("timeout"),n.CLOSE_BUTTON_RESULT=Symbol("close")},{}],26:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("@babel/runtime/helpers/toConsumableArray")),o=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/getPrototypeOf")),c=i(e("@babel/runtime/helpers/inherits")),u=i(e("@babel/runtime/helpers/defineProperty")),d=e("../const/config"),p=e("../const/errors"),f=e("../const/types"),h=i(e("../libs/baseclass")),b=i(e("../libs/utils")),v=i(e("./window_manager"));function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}n.default=function(e){function t(e,n){var i,r,a,c;if((0,o.default)(this,t),r=this,a=t,a=(0,l.default)(a),i=(0,s.default)(r,m()?Reflect.construct(a,c||[],(0,l.default)(r).constructor):a.apply(r,c)),(0,u.default)(i,"state","normal"),(0,u.default)(i,"lastState",{x:0,y:0,width:0,height:0}),(0,u.default)(i,"focused",!1),(0,u.default)(i,"DRAG_THRESHOLD",5),(0,u.default)(i,"tabs",[]),(0,u.default)(i,"addTabBtn",null),(0,u.default)(i,"isMenuOpen",!1),(0,u.default)(i,"boundGlobalClickHandler",null),(0,u.default)(i,"MOBILE_CONTEXT_MENU_TIMEOUT",700),(0,u.default)(i,"contextMenuTimer",null),(0,u.default)(i,"popupCloseCallback",null),(0,u.default)(i,"childManager",null),i.id=e.id||b.default.generateId("window"),e.id){var h=document.getElementById(e.id);if(h&&h.classList.contains("".concat(f.LIBRARY_NAME,"-window")))throw new p.WinLetError('WinLet: Window with ID "'.concat(e.id,'" already exists. New window will not be created.'))}return i.manager=n,i.options=b.default.deepMerge(d.defaultConfig,e),i.parentWindow=e._parent||null,i.el=i.createDOM(),i.options._isPopup&&i.el.classList.add("".concat(f.LIBRARY_NAME,"-popup-window")),"merged"===i.options.tabStyle&&i.el.classList.add("".concat(f.LIBRARY_NAME,"-tab-style-merged")),"merged"===i.options.menuStyle&&i.el.classList.add("".concat(f.LIBRARY_NAME,"-menu-style-merged")),i.titleBarEl=i.el.querySelector(".".concat(f.LIBRARY_NAME,"-title-bar")),i.iconEl=i.el.querySelector(".".concat(f.LIBRARY_NAME,"-icon")),i.titleEl=i.el.querySelector(".".concat(f.LIBRARY_NAME,"-title")),i.contentEl=i.el.querySelector(".".concat(f.LIBRARY_NAME,"-content")),i.applyOptions(),i.setupEventListeners(),i.options.onOpen(i),i}return(0,c.default)(t,e),(0,a.default)(t,[{key:"createDOM",value:function(){var e=document.createElement("div");e.className="".concat(f.LIBRARY_NAME,"-window"),e.id=this.id;var t=[];this.options.resizableY&&t.push('<div class="'.concat(f.LIBRARY_NAME,'-resize-handle n"></div>'),'<div class="'.concat(f.LIBRARY_NAME,'-resize-handle s"></div>')),this.options.resizableX&&t.push('<div class="'.concat(f.LIBRARY_NAME,'-resize-handle w"></div>'),'<div class="'.concat(f.LIBRARY_NAME,'-resize-handle e"></div>')),this.options.resizableX&&this.options.resizableY&&t.push('<div class="'.concat(f.LIBRARY_NAME,'-resize-handle nw"></div>'),'<div class="'.concat(f.LIBRARY_NAME,'-resize-handle ne"></div>'),'<div class="'.concat(f.LIBRARY_NAME,'-resize-handle sw"></div>'),'<div class="'.concat(f.LIBRARY_NAME,'-resize-handle se"></div>'));var n=t.join(""),i=this.options.menu.length>0,r=this.options.tabs.length>0,o="merged"===this.options.menuStyle&&i,a="merged"===this.options.tabStyle&&r,s='\n            <div class="'.concat(f.LIBRARY_NAME,'-controls">\n                ').concat(this.options.minimizable?'<input class="'.concat(f.LIBRARY_NAME,"-control-btn ").concat(f.LIBRARY_NAME,'-minimize-btn" type="button" value="＿" title="Minimize" />'):"","\n                ").concat(this.options.maximizable?'<input class="'.concat(f.LIBRARY_NAME,"-control-btn ").concat(f.LIBRARY_NAME,'-maximize-btn" type="button" value="□" title="Maximize" />'):"","\n                ").concat(this.options.closable?'<input class="'.concat(f.LIBRARY_NAME,"-control-btn ").concat(f.LIBRARY_NAME,'-close-btn" type="button" value="╳" title="Close">'):"","\n            </div>"),l='\n            <div class="'.concat(f.LIBRARY_NAME,'-icon"></div>\n            ').concat(o?'<div class="'.concat(f.LIBRARY_NAME,'-menu-bar"></div>'):"",'\n            <div class="').concat(f.LIBRARY_NAME,'-title"></div>\n            ').concat(a?'<div class="'.concat(f.LIBRARY_NAME,'-tab-bar"></div>'):"","\n            ").concat(s,"\n        ");return e.innerHTML='\n            <div class="'.concat(f.LIBRARY_NAME,"-title-bar ").concat(f.LIBRARY_NAME,'-us-none">\n                ').concat(l,'\n            </div>\n            <div class="').concat(f.LIBRARY_NAME,'-main-content">\n                ').concat(!o&&i?'<div class="'.concat(f.LIBRARY_NAME,'-menu-bar"></div>'):"","\n                ").concat(!a&&r?'<div class="'.concat(f.LIBRARY_NAME,'-tab-bar"></div>'):"",'\n                <div class="').concat(f.LIBRARY_NAME,'-content"></div>\n            </div>\n            ').concat(n,"\n        "),e}},{key:"applyOptions",value:function(){this.setTitle(this.options.title),this.setIcon(this.options.icon),this.setSize(this.options.width,this.options.height),this.el.style.minWidth="".concat(this.options.minWidth,"px"),this.el.style.minHeight="".concat(this.options.minHeight,"px"),"left"===this.options.controlsPosition&&this.titleBarEl.classList.add("controls-left"),this.options.tabs.length>0?this.createTabs():this.renderContent(this.contentEl,this.options.content),this.options.menu.length>0&&this.createMenu()}},{key:"renderContent",value:function(e,t){if(e.innerHTML="",t.template){var n=document.querySelector(t.template);"TEMPLATE"===(null==n?void 0:n.tagName)?e.appendChild(n.content.cloneNode(!0)):(e.innerHTML="Error: Template not found or invalid.",console.warn("WinLet Warning: Template not found or invalid."))}else if(t.html)e.innerHTML=t.html;else if(b.default.isNonEmptyObject(t.iframe)){var i=document.createElement("iframe"),r=t.iframe;if(r.src&&(i.src=r.src),r.srcdoc){var o=r.srcdoc;if(r.loadWinLet){var a=this.manager.getGlobalConfig();if(a.libraryPath){var s='<script src="'.concat(a.libraryPath,'"><\/script>');o='<!DOCTYPE html><html><head><meta charset="UTF-8">'.concat(s).concat("<script>document.addEventListener('DOMContentLoaded', () => window.WinLet.init({ container: document.body }));<\/script>","</head><body>").concat(r.srcdoc,"</body></html>")}else console.warn("WinLet Warning: `loadWinLet` is true, but `libraryPath` is not set in global config.")}i.srcdoc=o}r.allow&&(i.allow=r.allow),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.loading&&(i.loading=r.loading),r.sandbox&&(Array.isArray(r.sandbox)||(r.sandbox=[r.sandbox]),r.sandbox.length>0&&i.setAttribute("sandbox",r.sandbox.join(" "))),e.appendChild(i)}}},{key:"closeAllMenus",value:function(){this.el.querySelectorAll(".".concat(f.LIBRARY_NAME,"-menu-item > .").concat(f.LIBRARY_NAME,"-menu-dropdown")).forEach(function(e){e.style.display="none"}),this.isMenuOpen=!1}},{key:"createMenu",value:function(){var e=this,t=this.el.querySelector(".".concat(f.LIBRARY_NAME,"-menu-bar"));t.innerHTML="",this.options.menu.forEach(function(n){var i,r=document.createElement("div");if(r.className="".concat(f.LIBRARY_NAME,"-menu-item ").concat(f.LIBRARY_NAME,"-us-none"),r.textContent=null!==(i=n.name)&&void 0!==i?i:"",n.items){var o=e.createDropdownMenu(n.items);r.addEventListener("click",function(t){t.stopPropagation();var n="block"===o.style.display;e.closeAllMenus(),n||(o.style.display="block",e.isMenuOpen=!0)}),r.addEventListener("mouseenter",function(){e.isMenuOpen&&(e.closeAllMenus(),o.style.display="block",e.isMenuOpen=!0)}),r.appendChild(o)}t.appendChild(r)})}},{key:"createDropdownMenu",value:function(e){var t=this,n=document.createElement("ul");return n.className="".concat(f.LIBRARY_NAME,"-menu-dropdown"),e.forEach(function(e){var i=document.createElement("li");if(e.separator)i.className="separator";else{var r,o=null!==(r=e.name)&&void 0!==r?r:"";if(o="<span>".concat(o,"</span>"),t.options.enableShortcuts&&e.shortcut&&(o+='<span class="'.concat(f.LIBRARY_NAME,'-shortcut-text">(').concat(e.shortcut,")</span>")),i.innerHTML='<div class="'.concat(f.LIBRARY_NAME,'-menu-dropdown-item">').concat(o,"</div>"),i.addEventListener("click",function(n){var i;n.stopPropagation(),t.closeAllMenus(),null===(i=e.action)||void 0===i||i.call(e,t)}),e.items){i.classList.add("has-submenu");var a=t.createDropdownMenu(e.items);i.appendChild(a)}}n.appendChild(i)}),n}},{key:"createTabs",value:function(){var e,t=this,n=this.el.querySelector(".".concat(f.LIBRARY_NAME,"-tab-bar"));n.innerHTML="",this.tabs=[];var i=null!==(e=this.options.tabOptions)&&void 0!==e?e:{};this.options.tabs.forEach(function(e,n){t.createTabElement(e,n)}),i.addable&&(this.addTabBtn=document.createElement("div"),this.addTabBtn.className="".concat(f.LIBRARY_NAME,"-tab-add-btn"),this.addTabBtn.textContent="+",this.addTabBtn.addEventListener("click",function(e){var n,r=null===(n=i.onAdd)||void 0===n?void 0:n.call(i,t);r&&t.addTab(r)}),n.appendChild(this.addTabBtn)),this.setupTabBarDropZone(),this.tabs.length>0&&this.activateTab(0)}},{key:"setupTabBarDropZone",value:function(){var e=this,t=this.el.querySelector(".".concat(f.LIBRARY_NAME,"-tab-bar"));t&&this.options.tabOptions.reorderable&&(t.addEventListener("dragover",function(e){var n;null!==(n=e.dataTransfer)&&void 0!==n&&n.types.includes("application/winlet-tab")&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),t.classList.add("drag-over"))}),t.addEventListener("dragleave",function(){t.classList.remove("drag-over")}),t.addEventListener("drop",function(n){var i,r,o,a;n.preventDefault(),t.classList.remove("drag-over");var s=null===(i=n.dataTransfer)||void 0===i?void 0:i.getData("application/winlet-tab"),l=null===(r=n.dataTransfer)||void 0===r?void 0:r.getData("application/winlet-source-window-id"),c=null===(o=n.dataTransfer)||void 0===o?void 0:o.getData("text/plain");if(s&&l&&c){var u=null===(a=e.manager.container)||void 0===a?void 0:a.querySelector(".".concat(f.LIBRARY_NAME,"-tab.dragging"));if(l!==e.id){var d=e.manager.getWindow(l);if(d){var p,h,b=d.options.tabOptions,v=e.options.tabOptions,m=null!==(p=b.mergeable)&&void 0!==p?p:b.detachable,x=null===(h=v.allowIncomingMerge)||void 0===h||h,g=!v.onMergeAttempt||v.onMergeAttempt(d,e);if(!m||!x||!g)return;var y=JSON.parse(s);e.addTab(y,!0),d.closeTab(parseInt(c,10))}}else u&&e.updateTabOrderFromDOM()}}))}},{key:"createTabElement",value:function(e,t){var n,i=this,r=this.el.querySelector(".".concat(f.LIBRARY_NAME,"-tab-bar")),o=null!==(n=this.options.tabOptions)&&void 0!==n?n:{},a=document.createElement("div");a.className="".concat(f.LIBRARY_NAME,"-tab"),a.dataset.tabId=t.toString();var s=document.createElement("span");if(s.textContent=e.title,a.appendChild(s),r.insertBefore(a,this.addTabBtn),o.closable){var l=document.createElement("span");l.className="".concat(f.LIBRARY_NAME,"-tab-close-btn"),l.innerHTML="&times;",l.addEventListener("click",function(e){e.stopPropagation();var t=i.tabs.findIndex(function(e){return e.tabEl===a});-1!==t&&i.closeTab(t)}),a.appendChild(l)}var c=document.createElement("div");c.className="".concat(f.LIBRARY_NAME,"-tab-content"),this.contentEl.appendChild(c),this.renderContent(c,e.content),a.addEventListener("click",function(e){i.activateTab(+a.dataset.tabId)}),this.tabs.splice(t,0,{tabEl:a,contentEl:c}),o.reorderable&&this.makeTabReorderable(a)}},{key:"makeTabReorderable",value:function(e){var t=this;e.draggable=!0,e.addEventListener("dragstart",function(n){if(n.dataTransfer.setData("text/plain",e.dataset.tabId),e.classList.add("dragging"),t.options.tabOptions.detachable){var i=parseInt(e.dataset.tabId,10);if(!isNaN(i)&&t.options.tabs[i]){var r=t.options.tabs[i];n.dataTransfer.setData("application/winlet-tab",JSON.stringify(r)),n.dataTransfer.setData("application/winlet-source-window-id",t.id),t.manager.onTabDragStart(t.id)}}}),e.addEventListener("dragend",function(){e.classList.remove("dragging"),t.manager.onTabDragEnd()}),e.addEventListener("dragover",function(n){var i;if((null===(i=t.manager.draggingTabInfo)||void 0===i?void 0:i.sourceWindowId)===t.id){n.preventDefault();var r=document.querySelector(".".concat(f.LIBRARY_NAME,"-tab.dragging"));if(r&&r!==e){var o=e.getBoundingClientRect(),a=n.clientX>o.left+o.width/2,s=e.parentNode;a?s.insertBefore(r,e.nextSibling):s.insertBefore(r,e)}}},{passive:!1}),e.addEventListener("drop",function(e){e.preventDefault()},{passive:!1})}},{key:"closeTab",value:function(e){var t,n=null===(t=this.tabs[e])||void 0===t?void 0:t.tabEl.classList.contains("active");if(this.tabs[e].tabEl.remove(),this.tabs[e].contentEl.remove(),this.tabs.splice(e,1),this.options.tabs.splice(e,1),this.tabs.forEach(function(e,t){return e.tabEl.dataset.tabId=t.toString()}),this.tabs.length>0){if(n){var i=Math.max(0,e-1);this.activateTab(i)}}else this.close()}},{key:"activateTab",value:function(e){this.tabs.forEach(function(t,n){t.tabEl.classList.toggle("active",n===e),t.contentEl.classList.toggle("active",n===e)})}},{key:"addTab",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.options.tabs.push(e);var n=this.options.tabs.length-1;this.createTabElement(e,n),t&&(this.activateTab(n),this.focus())}},{key:"getTabs",value:function(){return this.tabs}},{key:"updateTabOrderFromDOM",value:function(){var e=Array.from(this.el.querySelectorAll(".".concat(f.LIBRARY_NAME,"-tab-bar > .").concat(f.LIBRARY_NAME,"-tab"))),t=[],n=[],i=(0,r.default)(this.tabs),o=(0,r.default)(this.options.tabs);e.forEach(function(e){var r=i.findIndex(function(t){return t.tabEl===e});-1!==r&&(t.push(i[r]),n.push(o[r]))}),this.tabs=t,this.options.tabs=n,this.tabs.forEach(function(e,t){return e.tabEl.dataset.tabId=t.toString()})}},{key:"setupEventListeners",value:function(){var e=this;this.el.addEventListener("click",function(){return e.focus()},!0),this.el.addEventListener("focusin",function(){return e.focus()}),this.boundGlobalClickHandler=function(){e.isMenuOpen&&e.closeAllMenus()},document.addEventListener("click",this.boundGlobalClickHandler);var t=this.el.querySelector(".".concat(f.LIBRARY_NAME,"-close-btn"));null==t||t.addEventListener("click",function(t){var n;(t.stopPropagation(),e.options._isPopup)&&(null===(n=e.popupCloseCallback)||void 0===n||n.call(e,f.CLOSE_BUTTON_RESULT));e.close()});var n=this.el.querySelector(".".concat(f.LIBRARY_NAME,"-maximize-btn"));null==n||n.addEventListener("click",function(t){t.stopPropagation(),e.toggleMaximize()});var i=this.el.querySelector(".".concat(f.LIBRARY_NAME,"-minimize-btn"));if(null==i||i.addEventListener("click",function(t){t.stopPropagation(),e.minimize()}),this.options.movable&&this.makeMovable(),(this.options.resizableX||this.options.resizableY)&&this.makeResizable(),this.options.contextMenu.length>0){this.el.addEventListener("contextmenu",function(t){t.preventDefault(),e.manager.showContextMenu(t.clientX,t.clientY,e.options.contextMenu,e)},{passive:!1}),this.el.addEventListener("pointerdown",function(t){"touch"===t.pointerType&&(e.contextMenuTimer=window.setTimeout(function(){e.contextMenuTimer=null,e.manager.showContextMenu(t.clientX,t.clientY,e.options.contextMenu,e)},e.MOBILE_CONTEXT_MENU_TIMEOUT))});var r=function(){e.contextMenuTimer&&(clearTimeout(e.contextMenuTimer),e.contextMenuTimer=null)};this.el.addEventListener("pointermove",r),this.el.addEventListener("pointerup",r),this.el.addEventListener("pointercancel",r)}}},{key:"makeMovable",value:function(){var e=this;this.titleBarEl.addEventListener("pointerdown",function(t){if(!t.target.closest(".".concat(f.LIBRARY_NAME,"-control-btn, .").concat(f.LIBRARY_NAME,"-resize-handle, .").concat(f.LIBRARY_NAME,"-menu-item, .").concat(f.LIBRARY_NAME,"-tab, .").concat(f.LIBRARY_NAME,"-tab-add-btn"))&&0===t.button){t.preventDefault(),e.focus();var n,i,r=t.clientX,o=t.clientY,a=!1,s=function(s){var l;if(null!==(l=e.el)&&void 0!==l&&l.isConnected){if(!a){var c=Math.abs(s.clientX-r),u=Math.abs(s.clientY-o);if(!(c>e.DRAG_THRESHOLD||u>e.DRAG_THRESHOLD))return;if(a=!0,e.el.setPointerCapture(t.pointerId),e.contentEl.style.pointerEvents="none","maximized"===e.state){var d=e.lastState.width,p=t.clientX/e.el.offsetWidth,f=e.titleBarEl.getBoundingClientRect(),h=t.clientY-f.top,b=t.clientX-d*p,v=t.clientY-h;e.restore(),e.setPosition(b,v)}n=e.el.offsetLeft,i=e.el.offsetTop}var m=n+s.clientX-r,x=i+s.clientY-o;e.setPosition(m,x)}};document.addEventListener("pointermove",s),document.addEventListener("pointerup",function(){document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",s),a&&(e.el.releasePointerCapture(t.pointerId),e.contentEl.style.pointerEvents="auto",e.options.onMove(e))})}},{passive:!1}),this.options.maximizable&&this.titleBarEl.addEventListener("dblclick",function(t){if(e.options.maximizableOnDblClick){if(t.target.closest(".".concat(f.LIBRARY_NAME,"-control-btn, .").concat(f.LIBRARY_NAME,"-menu-item, .").concat(f.LIBRARY_NAME,"-tab")))return;e.toggleMaximize()}})}},{key:"makeResizable",value:function(){var e=this;this.el.querySelectorAll(".".concat(f.LIBRARY_NAME,"-resize-handle")).forEach(function(t){t.addEventListener("pointerdown",function(n){if(0===n.button&&null!=t&&t.isConnected){n.preventDefault(),n.stopPropagation(),e.focus(),e.contentEl.style.pointerEvents="none",t.setPointerCapture(n.pointerId);var i=t.className.replace("".concat(f.LIBRARY_NAME,"-resize-handle "),""),r=n.clientX,o=n.clientY,a=e.el,s=a.offsetWidth,l=a.offsetHeight,c=a.offsetLeft,u=a.offsetTop,d=e.options,p=d.minWidth,h=d.minHeight,b=function(t){var n=s,a=l,d=c,f=u,b=t.clientX-r,v=t.clientY-o;i.includes("e")&&(n=Math.max(p,s+b)),i.includes("w")&&(n=Math.max(p,s-b),d=c+b),i.includes("s")&&(a=Math.max(h,l+v)),i.includes("n")&&(a=Math.max(h,l-v),f=u+v),e.setSize(n,a),e.setPosition(d,f)},v=function(){t.releasePointerCapture(n.pointerId),e.contentEl.style.pointerEvents="auto",document.removeEventListener("pointermove",b),document.removeEventListener("pointerup",v),e.options.onResize(e)};document.addEventListener("pointermove",b),document.addEventListener("pointerup",v)}},{passive:!1})})}},{key:"isFontAwesome",value:function(e){var t=e.trim().split(/\s+/),n=t.some(function(e){return/^fa[bslr]?$/.test(e)}),i=t.some(function(e){return/^fa-[a-z0-9-]+$/.test(e)});return n&&i}},{key:"close",value:function(){this.boundGlobalClickHandler&&document.removeEventListener("click",this.boundGlobalClickHandler),this.options.onClose(this),this.manager.destroyWindow(this.id)}},{key:"minimize",value:function(){"minimized"!==this.state&&("normal"!==this.state&&this.restore(),this.state="minimized",this.el.classList.add("minimized"),this.blur())}},{key:"toggleMaximize",value:function(){"maximized"===this.state?this.restore():this.maximize()}},{key:"maximize",value:function(){if("maximized"!==this.state){"normal"!==this.state&&this.restore(),this.lastState={x:this.el.offsetLeft,y:this.el.offsetTop,width:this.el.offsetWidth,height:this.el.offsetHeight},this.state="maximized",this.el.classList.add("maximized"),this.setPosition(0,0),this.setSize("100%","100%");var e=this.el.querySelector(".".concat(f.LIBRARY_NAME,"-maximize-btn"));e&&(e.title="Restore",e.value="❏")}}},{key:"restore",value:function(){if("minimized"===this.state)this.state="normal",this.el.classList.remove("minimized"),this.focus();else if("maximized"===this.state){this.state="normal",this.el.classList.remove("maximized"),this.setSize(this.lastState.width,this.lastState.height),this.setPosition(this.lastState.x,this.lastState.y);var e=this.el.querySelector(".".concat(f.LIBRARY_NAME,"-maximize-btn"));e&&(e.title="Maximize",e.value="□")}}},{key:"focus",value:function(){this.focused||(this.parentWindow&&this.parentWindow.focus(),this.manager.focusWindow(this),this.focused=!0,this.el.classList.add("active"),this.options.onFocus(this))}},{key:"blur",value:function(){this.focused&&(this.focused=!1,this.el.classList.remove("active"),this.options.onBlur(this))}},{key:"reload",value:function(){var e=this;if(!1!==this.options.onReload(this)){var t=function(t,n){if(b.default.isNonEmptyObject(n.iframe)){var i=t.querySelector("iframe");if(i&&i.src&&!n.iframe.srcdoc)try{var r;null===(r=i.contentWindow)||void 0===r||r.location.reload()}catch(i){console.warn("WinLet: Cross-origin iframe could not be reloaded directly. Recreating iframe element.",i),e.renderContent(t,n)}else e.renderContent(t,n)}else e.renderContent(t,n)};if(this.options.tabs.length>0){var n=this.tabs.findIndex(function(e){return e.tabEl.classList.contains("active")});if(n>-1){var i=this.tabs[n],r=this.options.tabs[n].content;t(i.contentEl,r)}}else t(this.contentEl,this.options.content)}}},{key:"getContent",value:function(){var e,t=this.tabs.findIndex(function(e){return e.tabEl.classList.contains("active")});return(e=t>-1?this.tabs[t].contentEl:this.contentEl).querySelector("iframe")||e}},{key:"getChildManager",value:function(){if(!this.childManager){this.childManager=new v.default({}),this.childManager.applyGlobalConfig({container:this.contentEl}),this.childManager.init()}return this.childManager}},{key:"createWindow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.contentEl.querySelector("iframe");if(t&&t.contentWindow){var n={type:"winlet:createWindow",options:e};return t.contentWindow.postMessage(n,"*"),console.warn("WinLet: Window creation inside an iframe is asynchronous and does not return an instance directly."),null}var i=this.getChildManager();return e._parent=this,i.createWindow(e)}},{key:"createPopup",value:function(e){var t={_parent:this};return this.getChildManager().popup(Object.assign(e,t))}},{key:"getTitle",value:function(){return this.options.title}},{key:"setTitle",value:function(e){this.options.title=e,this.titleEl.textContent=b.default.sanitizeHTML(e)}},{key:"setIcon",value:function(e){if(this.options.icon=e,this.iconEl.innerHTML="",e)if(this.isFontAwesome(e)){var t=document.createElement("i");t.className=e,this.iconEl.appendChild(t)}else{var n=document.createElement("img");n.src=e,n.alt="window icon",this.iconEl.appendChild(n)}}},{key:"getPosition",value:function(){return"maximized"===this.state?{x:this.lastState.x,y:this.lastState.y}:{x:this.el.offsetLeft,y:this.el.offsetTop}}},{key:"setPosition",value:function(e,t){if(this.manager.container){var n,i,r=this.manager.container.getBoundingClientRect(),o=this.el.offsetWidth,a=this.el.offsetHeight;switch(e){case"left":n=0;break;case"center":n=(r.width-o)/2;break;case"right":n=r.width-o;break;default:n=e}switch(t){case"top":i=0;break;case"center":i=(r.height-a)/2;break;case"bottom":i=r.height-a;break;default:i=t}this.el.style.left="".concat(Math.min(Math.max(150-o,n),r.width-20),"px"),this.el.style.top="".concat(Math.min(Math.max(0,i),r.height-50),"px")}else console.warn("WinLet Warning: setPosition called before manager is initialized.")}},{key:"getSize",value:function(){return"maximized"===this.state?{width:this.lastState.width,height:this.lastState.height}:{width:this.el.offsetWidth,height:this.el.offsetHeight}}},{key:"setSize",value:function(e,t){this.el.style.width="number"==typeof e?"".concat(e,"px"):e,this.el.style.height="number"==typeof t?"".concat(t,"px"):t}}])}(h.default)},{"../const/config":23,"../const/errors":24,"../const/types":25,"../libs/baseclass":29,"../libs/utils":30,"./window_manager":27,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":6,"@babel/runtime/helpers/defineProperty":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":15,"@babel/runtime/helpers/toConsumableArray":17}],27:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("@babel/runtime/helpers/typeof")),o=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/getPrototypeOf")),c=i(e("@babel/runtime/helpers/inherits")),u=i(e("@babel/runtime/helpers/defineProperty")),d=e("../const/config"),p=e("../const/errors"),f=e("../const/types"),h=i(e("../libs/baseclass")),b=i(e("../libs/utils")),v=i(e("../style/styles")),m=i(e("./window"));function x(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function y(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y=function(){return!!e})()}var w=n.default=function(e){function t(e){var n,i,r,a;return(0,o.default)(this,t),i=this,r=t,r=(0,l.default)(r),n=(0,s.default)(i,y()?Reflect.construct(r,a||[],(0,l.default)(i).constructor):r.apply(i,a)),(0,u.default)(n,"container",null),(0,u.default)(n,"windows",new Map),(0,u.default)(n,"zIndexCounter",1e3),(0,u.default)(n,"activeWindow",null),(0,u.default)(n,"contextMenuEl",null),(0,u.default)(n,"_isInitialized",!1),(0,u.default)(n,"lastAutoPosition",null),(0,u.default)(n,"lastPopupPosition",null),(0,u.default)(n,"CASCADE_OFFSET",30),(0,u.default)(n,"draggingTabInfo",null),n.globalConfig=e,n}return(0,c.default)(t,e),(0,a.default)(t,[{key:"isInitialized",get:function(){return this._isInitialized}},{key:"applyGlobalConfig",value:function(e){Object.assign(this.globalConfig,e)}},{key:"getGlobalConfig",value:function(){return this.globalConfig}},{key:"init",value:function(){var e=this;if(!this._isInitialized){var t=null;if("string"==typeof this.globalConfig.container){if(!(t=document.querySelector(this.globalConfig.container)))throw new p.WinLetError('WinLet: The specified container "'.concat(this.globalConfig.container,'" was not found.'))}else this.globalConfig.container instanceof HTMLElement&&(t=this.globalConfig.container);if(!t){if(!document.body)throw new p.WinLetError("Cannot initialize before document.body is ready. Please call WinLet.init() after DOMContentLoaded.");t=document.body}if(!document.getElementById("".concat(f.LIBRARY_NAME,"-styles"))){var n=document.createElement("style");n.id="".concat(f.LIBRARY_NAME,"-styles"),n.innerHTML=this.getStyleData(),document.head.appendChild(n)}var i=t.querySelector(".".concat(f.LIBRARY_NAME,"-container"));if(i||((i=document.createElement("div")).className="".concat(f.LIBRARY_NAME,"-container"),t.appendChild(i)),this.container=i,t!==document.body)this.container.classList.add("".concat(f.LIBRARY_NAME,"-is-nested")),"static"===window.getComputedStyle(t).position&&(t.style.position="relative");window.addEventListener("blur",function(){return requestAnimationFrame(function(){var t=document.activeElement;if("IFRAME"===(null==t?void 0:t.tagName)){var n=t.closest(".".concat(f.LIBRARY_NAME,"-window"));if(n){var i=e.windows.get(n.id);i&&e.activeWindow!==i&&i.focus()}}})}),document.addEventListener("pointerdown",function(){return requestAnimationFrame(function(){var t=document.activeElement;if("IFRAME"===(null==t?void 0:t.tagName)){var n=t.closest(".".concat(f.LIBRARY_NAME,"-window"));if(n){var i=e.windows.get(n.id);i&&e.activeWindow!==i&&i.focus()}}})},!0),this.container.addEventListener("pointerdown",function(t){if(t.target===e.container&&e.activeWindow){var n=e.activeWindow;e.activeWindow=null,n.blur()}}),document.addEventListener("click",function(){return e.hideContextMenu()}),window.addEventListener("message",function(t){if(t.data&&"winlet:createWindow"===t.data.type&&"object"===(0,r.default)(t.data.options)){var n,i=!1,o=null,a=x(e.windows.values());try{for(a.s();!(n=a.n()).done;){var s=n.value,l=s.el.querySelector("iframe");if(l&&l.contentWindow===t.source){i=!0,o=s;break}}}catch(e){a.e(e)}finally{a.f()}i?o?o.createWindow(t.data.options):e.createWindow(t.data.options):console.warn("WinLet: Untrusted source attempted to create a window.",t.origin)}}),this._isInitialized=!0,this.setupShortcutListeners(),this.container.addEventListener("dragover",function(e){var t;null!==(t=e.dataTransfer)&&void 0!==t&&t.types.includes("application/winlet-tab")&&e.preventDefault()}),this.container.addEventListener("drop",function(t){var n,i,r;if(!t.target.closest(".".concat(f.LIBRARY_NAME,"-window"))){t.preventDefault();var o=null===(n=t.dataTransfer)||void 0===n?void 0:n.getData("application/winlet-tab"),a=null===(i=t.dataTransfer)||void 0===i?void 0:i.getData("application/winlet-source-window-id"),s=null===(r=t.dataTransfer)||void 0===r?void 0:r.getData("text/plain");if(o&&a&&s){var l=e.windows.get(a);if(!l||!l.options.tabOptions.detachable)return;var c=JSON.parse(o),u={title:c.title,content:c.content},d=b.default.deepMerge(l.options,{tabs:[u],x:t.clientX,y:t.clientY,width:l.getSize().width,height:l.getSize().height});e.createWindow(d),l.closeTab(parseInt(s,10))}}})}}},{key:"setupShortcutListeners",value:function(){var e=this;document.addEventListener("keydown",function(t){var n,i;if(e.globalConfig.windowSwitchShortcut){var r=e.parseShortcut(e.globalConfig.windowSwitchShortcut);if(t.key.toLowerCase()===r.key.toLowerCase()&&t.ctrlKey===r.ctrl&&t.altKey===r.alt&&t.shiftKey===r.shift){t.preventDefault();var o=Array.from(e.windows.values()),a=e.activeWindow?o.findIndex(function(t){return t===e.activeWindow}):-1,s=o[(a+1)%o.length];return"minimized"===s.state&&s.restore(),void s.focus()}}var l=e.activeWindow;if(l&&l.options.enableShortcuts){if(t.ctrlKey&&t.shiftKey&&(null!==(n=null===(i=l.options.tabs)||void 0===i?void 0:i.length)&&void 0!==n?n:0)>0&&t.code.startsWith("Digit")){t.preventDefault(),t.stopPropagation();var c=parseInt(t.code.replace("Digit",""),10),u=l.getTabs().length,d=-1;return c>=1&&c<=8?d=c-1:9===c&&(d=u-1),void(d>=0&&d<u&&l.activateTab(d))}var p=function(n){var i,r=x(n);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o.shortcut){var a,s=e.parseShortcut(o.shortcut);if(t.key.toUpperCase()===s.key.toUpperCase()&&t.ctrlKey===s.ctrl&&t.altKey===s.alt&&t.shiftKey===s.shift)return t.preventDefault(),t.stopPropagation(),null===(a=o.action)||void 0===a||a.call(o,l),!0}if(o.items&&p(o.items))return!0}}catch(e){r.e(e)}finally{r.f()}return!1};p(l.options.menu)}},{passive:!1})}},{key:"ensureInitialized",value:function(){this._isInitialized||this.init()}},{key:"getStyleData",value:function(){return v.default.replace(/\$\[(\w+)\]/g,function(e,t){return"prefix"===t?f.LIBRARY_NAME:t})}},{key:"createWindow",value:function(e){var n;this.ensureInitialized();var i=null!==(n=e.ifExists)&&void 0!==n?n:"focus";if(e.id&&"create"!==i){var r=this.getWindow(e.id);if(r){if("prevent"===i)return r;if("focus"===i)return"minimized"===r.state&&r.restore(),r.focus(),r}}var o=b.default.deepMerge(d.defaultConfig,e);if("auto"===o.x||"auto"===o.y){var a,s,l=o.width,c=o.height,u=this.container.getBoundingClientRect();null===this.lastAutoPosition?(a=0,s=0):(a=this.lastAutoPosition.x+this.CASCADE_OFFSET,s=this.lastAutoPosition.y+this.CASCADE_OFFSET),a+l>u.width&&(a=0),s+c>u.height&&(s=0),o.x=a,o.y=s,this.lastAutoPosition={x:a,y:s}}var p=new m.default(o,this);return this.windows.set(p.id,p),t.allWindows.set(p.id,p),this.container.appendChild(p.el),p.setPosition(o.x,o.y),o.focus?(this.focusWindow(p),p.focus()):p.el.style.zIndex="".concat(++this.zIndexCounter),p}},{key:"popup",value:function(e){var t,n=this;this.ensureInitialized();var i={Ok:[{text:"OK",value:1}],OkCancel:[{text:"OK",value:1},{text:"Cancel",value:2}],Yes:[{text:"Yes",value:6}],YesNo:[{text:"Yes",value:6},{text:"No",value:7}],YesNoCancel:[{text:"Yes",value:6},{text:"No",value:7},{text:"Cancel",value:2}],Retry:[{text:"Retry",value:4}],RetryCancel:[{text:"Retry",value:4},{text:"Cancel",value:2}],AbortRetryIgnore:[{text:"Abort",value:3},{text:"Retry",value:4},{text:"Ignore",value:5}]};t=Array.isArray(e.buttons)?e.buttons:i[e.buttons||"Ok"]||i.Ok;var r=null,o=function(t){var n;r&&clearTimeout(r),r=null,null===(n=e.onClose)||void 0===n||n.call(e,t)},a='<div class="'.concat(f.LIBRARY_NAME,'-popup-message">').concat(b.default.sanitizeHTML(e.message),"</div>"),s=t.map(function(e,t){return'<input class="'.concat(f.LIBRARY_NAME,'-popup-button" data-index="').concat(t,'" type="button" value="').concat(b.default.sanitizeHTML(e.text),'"/>')}).join(""),l="".concat(a,'<div class="').concat(f.LIBRARY_NAME,'-popup-buttons">').concat(s,"</div>"),c={id:"popup-".concat(b.default.generateId()),title:e.title||"",icon:e.icon,resizableX:!1,resizableY:!1,movable:!0,closable:!0,minimizable:!1,maximizable:!1,maximizableOnDblClick:!1,enableShortcuts:!1,content:{html:l},focus:e.focus,_isPopup:!0};if(e.onFocus&&(c.onFocus=e.onFocus),e.onBlur&&(c.onBlur=e.onBlur),e.autoWidth){var u,d,p=document.createElement("span");p.style.visibility="hidden",p.style.position="absolute",p.style.whiteSpace="pre",p.className="".concat(f.LIBRARY_NAME,"-popup-message"),p.innerHTML=b.default.sanitizeHTML(e.message),null===(u=this.container)||void 0===u||u.appendChild(p),c.width=p.offsetWidth+80,null===(d=this.container)||void 0===d||d.removeChild(p)}else c.width=300;c.height=150,c.x="center",c.y="center";var h=this.createWindow(c),v=h.getPosition();return this.lastPopupPosition&&this.lastPopupPosition.x===v.x&&this.lastPopupPosition.y===v.y&&(h.setPosition(this.lastPopupPosition.x+this.CASCADE_OFFSET,this.lastPopupPosition.y+this.CASCADE_OFFSET),v=h.getPosition()),this.lastPopupPosition=v,h.popupCloseCallback=o,h.el.querySelectorAll(".".concat(f.LIBRARY_NAME,"-popup-button")).forEach(function(e){e.addEventListener("click",function(){var n=parseInt(e.dataset.index,10),i=t[n].value;o(i),h.close()})}),e.timeout&&e.timeout>0&&(r=window.setTimeout(function(){n.windows.has(h.id)&&(o(f.TIMEOUT_RESULT),h.close())},e.timeout)),h}},{key:"destroyWindow",value:function(e){this.ensureInitialized();var n=this.windows.get(e);if(n&&(n.el.remove(),this.windows.delete(e),t.allWindows.delete(e),this.activeWindow===n)){this.activeWindow=null;var i=Array.from(this.windows.values()).pop();i&&this.focusWindow(i)}}},{key:"focusWindow",value:function(e){var t;this.ensureInitialized(),this.activeWindow!==e&&(null===(t=this.activeWindow)||void 0===t||t.blur(),this.activeWindow=e,e.el.style.zIndex="".concat(++this.zIndexCounter))}},{key:"getWindow",value:function(e){return this.ensureInitialized(),this.windows.get(e)}},{key:"getWindowFromElement",value:function(e){this.ensureInitialized();var n=e.closest(".".concat(f.LIBRARY_NAME,"-window"));if(null!=n&&n.id)return t.allWindows.get(n.id)}},{key:"getActiveWindow",value:function(){return this.ensureInitialized(),this.activeWindow}},{key:"onTabDragStart",value:function(e){var t;null===(t=this.container)||void 0===t||t.classList.add("".concat(f.LIBRARY_NAME,"-is-tab-dragging")),this.draggingTabInfo={sourceWindowId:e}}},{key:"onTabDragEnd",value:function(){var e;null===(e=this.container)||void 0===e||e.classList.remove("".concat(f.LIBRARY_NAME,"-is-tab-dragging")),this.draggingTabInfo=null}},{key:"showContextMenu",value:function(e,t,n,i){var r=this;this.ensureInitialized(),this.hideContextMenu(),this.contextMenuEl=document.createElement("ul"),this.contextMenuEl.className="".concat(f.LIBRARY_NAME,"-context-menu"),n.forEach(function(e){var t,n=document.createElement("li");e.separator?n.className="separator":(n.textContent=null!==(t=e.name)&&void 0!==t?t:"",n.addEventListener("click",function(t){var n;t.stopPropagation(),null===(n=e.action)||void 0===n||n.call(e,i),r.hideContextMenu()}));r.contextMenuEl.appendChild(n)}),this.container.appendChild(this.contextMenuEl);var o=this.contextMenuEl,a=o.offsetWidth,s=o.offsetHeight,l=window,c=l.innerWidth,u=l.innerHeight;this.contextMenuEl.style.left="".concat(e+a>c?c-a:e,"px"),this.contextMenuEl.style.top="".concat(t+s>u?u-s:t,"px")}},{key:"hideContextMenu",value:function(){var e;null===(e=this.contextMenuEl)||void 0===e||e.remove(),this.contextMenuEl=null}},{key:"parseShortcut",value:function(e){var t=e.split("+"),n=t.pop()||"";return{ctrl:t.includes("Ctrl"),alt:t.includes("Alt"),shift:t.includes("Shift"),key:n}}}])}(h.default);(0,u.default)(w,"allWindows",new Map)},{"../const/config":23,"../const/errors":24,"../const/types":25,"../libs/baseclass":29,"../libs/utils":30,"../style/styles":31,"./window":26,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":6,"@babel/runtime/helpers/defineProperty":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":15,"@babel/runtime/helpers/typeof":20}],28:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=e("./const/config"),a=e("./const/types"),s=i(e("./function/window_manager")),l=i(e("./libs/utils")),c=e("./version"),u={windowSwitchShortcut:"Ctrl+`",libraryPath:(null===(r=document)||void 0===r||null===(r=r.currentScript)||void 0===r?void 0:r.src)||""},d=new s.default(u),p={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p.setGlobalConfig(e),d.init()},createWindow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d.createWindow(e)},createPopup:function(e){return d.popup(e)},getWindow:function(e){return d.getWindow(e)},getWindowFromElement:function(e){return d.getWindowFromElement(e)},getActiveWindow:function(){return d.getActiveWindow()},setDefaultConfig:function(e){l.default.deepMerge(o.defaultConfig,e)},setGlobalConfig:function(e){d.isInitialized&&e.container&&(console.warn("WinLet: The container cannot be changed after initialization."),delete e.container),Object.assign(u,e),d.applyGlobalConfig(u)},get version(){return c.LIB_VERSION},POPUP_TIMEOUT_RESULT:a.TIMEOUT_RESULT,POPUP_CLOSE_BUTTON_RESULT:a.CLOSE_BUTTON_RESULT};"undefined"!=typeof window&&(window.WinLet=p);n.default=p},{"./const/config":23,"./const/types":25,"./function/window_manager":27,"./libs/utils":30,"./version":32,"@babel/runtime/helpers/interopRequireDefault":10}],29:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("@babel/runtime/helpers/createClass")),o=i(e("@babel/runtime/helpers/classCallCheck"));n.default=(0,r.default)(function e(){(0,o.default)(this,e)})},{"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":6,"@babel/runtime/helpers/interopRequireDefault":10}],30:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("@babel/runtime/helpers/defineProperty")),o=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/getPrototypeOf")),c=i(e("@babel/runtime/helpers/inherits")),u=i(e("./baseclass"));function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function p(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p=function(){return!!e})()}n.default=function(e){function t(){return(0,o.default)(this,t),e=this,n=t,i=arguments,n=(0,l.default)(n),(0,s.default)(e,p()?Reflect.construct(n,i||[],(0,l.default)(e).constructor):n.apply(e,i));var e,n,i}return(0,c.default)(t,e),(0,a.default)(t,null,[{key:"generateId",value:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"win","-").concat(Math.random().toString(36).substring(2,9))}},{key:"deepMerge",value:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){(0,r.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=t[i],a=e[i];Array.isArray(o)?n[i]=o:n[i]=o instanceof Object&&"function"!=typeof o&&a instanceof Object?this.deepMerge(a,o):o}return n}},{key:"isNonEmptyObject",value:function(e){if(!e)return!1;for(var t in e)return!0;return!1}},{key:"sanitizeHTML",value:function(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}}])}(u.default)},{"./baseclass":29,"@babel/runtime/helpers/classCallCheck":4,"@babel/runtime/helpers/createClass":6,"@babel/runtime/helpers/defineProperty":7,"@babel/runtime/helpers/getPrototypeOf":8,"@babel/runtime/helpers/inherits":9,"@babel/runtime/helpers/interopRequireDefault":10,"@babel/runtime/helpers/possibleConstructorReturn":15}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default="\n:root {\n    --$[prefix]-bg: #f0f0f0;\n    --$[prefix]-border: #a0a0a0;\n    --$[prefix]-title-bar-height: 32px;\n    --$[prefix]-title-bar-bg: #e0e0e0;\n    --$[prefix]-title-bar-active-bg: #0078d7;\n    --$[prefix]-title-text-color: #000;\n    --$[prefix]-title-text-active-color: #fff;\n    --$[prefix]-control-bg: #d0d0d0;\n    --$[prefix]-control-hover-bg: #e5e5e5;\n    --$[prefix]-control-close-hover-bg: #e81123;\n    --$[prefix]-control-close-hover-color: #fff;\n    --$[prefix]-menu-bg: #fff;\n    --$[prefix]-menu-border: #ccc;\n    --$[prefix]-menu-item-color: #000;\n    --$[prefix]-menu-item-hover-bg: #0078d7;\n    --$[prefix]-menu-item-hover-color: #fff;\n    --$[prefix]-tab-bg: #dcdcdc;\n    --$[prefix]-tab-active-bg: #f0f0f0;\n    --$[prefix]-tab-border: #b0b0b0;\n    --$[prefix]-resize-handle-size: 8px;\n    --$[prefix]-resize-handle-offset: -4px;\n}\n\n.$[prefix]-us-none {\n    user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n}\n\n.$[prefix]-us-auto {\n    user-select: auto;\n    -webkit-user-select: auto;\n    -ms-user-select: auto;\n}\n\n\n.$[prefix]-container {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n    overflow: hidden;\n    z-index: 999;\n}\n\n.$[prefix]-container.$[prefix]-is-nested {\n    position: absolute;\n}\n\n.$[prefix]-container.$[prefix]-is-tab-dragging {\n    pointer-events: auto;\n}\n\n.$[prefix]-window {\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    min-width: 200px;\n    min-height: 150px;\n    border: 1px solid var(--$[prefix]-border);\n    background-color: var(--$[prefix]-bg);\n    box-shadow: 0 5px 15px rgba(0,0,0,0.3);\n    border-radius: 5px;\n    overflow: hidden;\n    pointer-events: all;\n    transition: opacity 0.1s, transform 0.1s;\n    touch-action: none;\n}\n\n.$[prefix]-window.minimized {\n    display: none;\n}\n\n.$[prefix]-window.maximized {\n    border-radius: 0;\n    border: none;\n}\n\n.$[prefix]-window.maximized > .$[prefix]-resize-handle {\n    display: none;\n}\n\n/* Focus State */\n.$[prefix]-window.active .$[prefix]-title-bar {\n    background-color: var(--$[prefix]-title-bar-active-bg);\n    color: var(--$[prefix]-title-text-active-color);\n}\n.$[prefix]-window.active .$[prefix]-title-bar .$[prefix]-title {\n    color: var(--$[prefix]-title-text-active-color);\n}\n\n.$[prefix]-title-bar {\n    display: flex;\n    align-items: center;\n    height: var(--$[prefix]-title-bar-height);\n    background-color: var(--$[prefix]-title-bar-bg);\n    color: var(--$[prefix]-title-text-color);\n    cursor: move;\n    flex-shrink: 0;\n    touch-action: none;\n}\n\n.$[prefix]-title-bar.controls-left {\n    flex-direction: row-reverse;\n}\n\n.$[prefix]-icon {\n    min-width: calc(var(--$[prefix]-title-bar-height) * 0.75);\n    height: calc(var(--$[prefix]-title-bar-height) * 0.75);\n    margin: 0 4px;\n    pointer-events: none;\n    flex-shrink: 0;\n}\n\n.$[prefix]-icon:empty {\n    display: none;\n}\n\n.$[prefix]-icon i {\n    font-size: calc(var(--$[prefix]-title-bar-height) * 0.5);\n    line-height: calc(var(--$[prefix]-title-bar-height) * 0.75);\n    text-align: center;\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n.$[prefix]-icon img {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n.$[prefix]-title {\n    flex-grow: 1;\n    padding: 0 8px;\n    font-family: sans-serif;\n    font-size: calc(var(--$[prefix]-title-bar-height) * 0.44);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    pointer-events: none;\n}\n\n.$[prefix]-title-bar.controls-left .$[prefix]-title {\n    text-align: right;\n}\n\n.$[prefix]-controls {\n    display: flex;\n    height: 100%;\n    margin-left: auto;\n    flex-shrink: 0;\n}\n\n.$[prefix]-title-bar.controls-left .$[prefix]-controls {\n    margin-left: 0;\n    margin-right: auto;\n    flex-direction: row-reverse;\n}\n\n.$[prefix]-control-btn {\n    width: calc(var(--$[prefix]-title-bar-height) * 1.3);\n    height: 100%;\n    border: none;\n    box-sizing: border-box;\n    background-color: transparent;\n    font-size: calc(var(--$[prefix]-title-bar-height) * 0.5);\n    cursor: pointer;\n    text-align: center;\n    vertical-align: middle;\n    font-family: sans-serif;\n    transition: background-color 0.2s;\n    touch-action: auto;\n}\n\n.$[prefix]-control-btn:hover {\n    background-color: var(--$[prefix]-control-hover-bg);\n}\n\n.$[prefix]-control-btn.$[prefix]-close-btn:hover {\n    background-color: var(--$[prefix]-control-close-hover-bg);\n    color: var(--$[prefix]-control-close-hover-color);\n}\n\n.$[prefix]-main-content {\n    all: initial;\n    display:flex;\n    flex-direction:column;\n    flex-grow:1;\n    overflow:hidden;\n}\n\n.$[prefix]-menu-bar {\n    color: var(--$[prefix]-menu-item-color);\n    display: flex;\n    background-color: var(--$[prefix]-bg);\n    padding: 2px;\n    flex-shrink: 0;\n    border-bottom: 1px solid var(--$[prefix]-border);\n    touch-action: auto;\n}\n\n.$[prefix]-menu-item {\n    font-family: sans-serif;\n    font-size: 14px;\n    padding: 4px 8px;\n    cursor: default;\n    position: relative;\n}\n\n.$[prefix]-menu-item:hover {\n    background-color: var(--$[prefix]-menu-item-hover-bg);\n    color: var(--$[prefix]-menu-item-hover-color);\n}\n\n.$[prefix]-menu-dropdown {\n    color: var(--$[prefix]-menu-item-color);\n    line-height: 1.6em;\n    display: none;\n    position: absolute;\n    top: 100%;\n    left: 0;\n    background-color: var(--$[prefix]-menu-bg);\n    border: 1px solid var(--$[prefix]-menu-border);\n    box-shadow: 0 2px 8px rgba(0,0,0,0.15);\n    list-style: none;\n    margin: 0;\n    padding: 4px 0;\n    min-width: 150px;\n    z-index: 10;\n    touch-action: auto;\n}\n\n.$[prefix]-menu-dropdown li {\n    padding: 0 20px;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.$[prefix]-menu-dropdown li:hover {\n    background-color: var(--$[prefix]-menu-item-hover-bg);\n    color: var(--$[prefix]-menu-item-hover-color);\n}\n\n.$[prefix]-menu-dropdown li.separator {\n    height: 1px;\n    background-color: var(--$[prefix]-menu-border);\n    margin: 4px 0;\n    padding: 0;\n}\n\n.$[prefix]-menu-dropdown-item {\n    display: flex;\n    flex-wrap: nowrap;\n    justify-content: space-between;\n    width: 100%;\n    white-space: nowrap;\n}\n\n/* --- メニュー --- */\n/* サブメニューを持つ項目のスタイル */\n.$[prefix]-menu-dropdown li.has-submenu {\n    position: relative;\n}\n.$[prefix]-menu-dropdown li.has-submenu::after {\n    content: '▶';\n    position: absolute;\n    top: 50%;\n    right: 10px;\n    margin-top: -0.65em;\n    font-size: 0.8em;\n    color: inherit;\n}\n\n/* ネストされたサブメニューの表示位置 */\n.$[prefix]-menu-dropdown li.has-submenu > .$[prefix]-menu-dropdown {\n    top: -5px; /* liのpaddingを考慮 */\n    left: 100%;\n}\n\n/* サブメニューはホバーで開く */\n.$[prefix]-menu-dropdown li.has-submenu:hover > .$[prefix]-menu-dropdown {\n    display: block;\n}\n\n/* ショートカットキーテキストのスタイル */\n.$[prefix]-shortcut-text {\n    color: #666;\n    margin-left: 1em;\n}\n.$[prefix]-menu-dropdown li:hover .$[prefix]-shortcut-text {\n    color: inherit;\n}\n\n/* --- タブ --- */\n.$[prefix]-tab-bar {\n    color: var(--$[prefix]-menu-item-color);\n    overflow-x: auto;\n    overflow-y: hidden;\n    -ms-overflow-style: -ms-autohiding-scrollbar;\n    scrollbar-width: thin;\n    display: flex;\n    background-color: #e1e1e1;\n    flex-shrink: 0;\n    align-items: flex-end;\n    touch-action: auto;\n}\n\n.$[prefix]-tab-bar::-webkit-scrollbar{\n    width: 6px;\n    height: 6px;\n}\n\n.$[prefix]-tab-bar::-webkit-scrollbar-thumb {\n    background-color: rgba(100, 100, 100, 0.5);\n    border-radius: 3px;\n}\n\n.$[prefix]-tab-bar::-webkit-scrollbar-track {\n    background-color: transparent;\n}\n\n.$[prefix]-tab {\n    white-space: nowrap;\n    padding: 8px 16px;\n    font-family: sans-serif;\n    font-size: 14px;\n    cursor: pointer;\n    border-right: 1px solid var(--$[prefix]-tab-border);\n    background-color: var(--$[prefix]-tab-bg);\n}\n\n.$[prefix]-tab.active {\n    background-color: var(--$[prefix]-tab-active-bg);\n    border-bottom: 2px solid var(--$[prefix]-title-bar-active-bg);\n}\n\n.$[prefix]-tab.active .$[prefix]-tab-close-btn:hover {\n    background-color: #ddd;\n}\n\n/* ドラッグ中のタブのスタイル */\n.$[prefix]-tab.dragging {\n    opacity: 0.5;\n}\n/* タブの閉じるボタン */\n.$[prefix]-tab-close-btn {\n    margin-left: 8px;\n    padding: 0 4px;\n    border-radius: 50%;\n    cursor: pointer;\n    font-weight: bold;\n    font-size: 14px;\n    line-height: 1;\n}\n.$[prefix]-tab-close-btn:hover {\n    background-color: #ccc;\n}\n\n.$[prefix]-tab-content {\n    display: none;\n}\n\n.$[prefix]-tab-content.active {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n/* タブ追加ボタン */\n.$[prefix]-tab-add-btn {\n    padding: 8px;\n    font-size: 14px;\n    cursor: pointer;\n    border-bottom: 1px solid var(--$[prefix]-tab-border);\n}\n.$[prefix]-tab-add-btn:hover {\n    background-color: #e0e0e0;\n}\n\n.$[prefix]-content {\n    flex-grow: 1;\n    position: relative;\n    overflow: auto;\n    touch-action: auto;\n}\n\n.$[prefix]-content iframe {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    border: none;\n}\n\n.$[prefix]-resize-handle {\n    position: absolute;\n    z-index: 5;\n    touch-action: none;\n}\n\n.$[prefix]-resize-handle.n { top: var(--$[prefix]-resize-handle-offset); left: 0; right: 0; height: var(--$[prefix]-resize-handle-size); cursor: n-resize; }\n.$[prefix]-resize-handle.s { bottom: var(--$[prefix]-resize-handle-offset); left: 0; right: 0; height: var(--$[prefix]-resize-handle-size); cursor: s-resize; }\n.$[prefix]-resize-handle.w { top: 0; bottom: 0; left: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); cursor: w-resize; }\n.$[prefix]-resize-handle.e { top: 0; bottom: 0; right: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); cursor: e-resize; }\n.$[prefix]-resize-handle.nw { top: var(--$[prefix]-resize-handle-offset); left: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); height: var(--$[prefix]-resize-handle-size); cursor: nw-resize; }\n.$[prefix]-resize-handle.ne { top: var(--$[prefix]-resize-handle-offset); right: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); height: var(--$[prefix]-resize-handle-size); cursor: ne-resize; }\n.$[prefix]-resize-handle.sw { bottom: var(--$[prefix]-resize-handle-offset); left: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); height: var(--$[prefix]-resize-handle-size); cursor: sw-resize; }\n.$[prefix]-resize-handle.se { bottom: var(--$[prefix]-resize-handle-offset); right: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); height: var(--$[prefix]-resize-handle-size); cursor: se-resize; }\n\n.$[prefix]-context-menu {\n    color: var(--$[prefix]-menu-item-color);\n    pointer-events: all;\n    position: fixed;\n    z-index: 10000;\n    background-color: var(--$[prefix]-menu-bg);\n    border: 1px solid var(--$[prefix]-menu-border);\n    box-shadow: 0 2px 8px rgba(0,0,0,0.15);\n    list-style: none;\n    margin: 0;\n    padding: 4px 0;\n    min-width: 160px;\n}\n.$[prefix]-context-menu li {\n    padding: 6px 24px;\n    font-family: sans-serif;\n    font-size: 14px;\n    cursor: pointer;\n}\n.$[prefix]-context-menu li:hover {\n    background-color: var(--$[prefix]-menu-item-hover-bg);\n    color: var(--$[prefix]-menu-item-hover-color);\n}\n.$[prefix]-context-menu li.separator {\n    height: 1px;\n    background-color: var(--$[prefix]-menu-border);\n    margin: 4px 0;\n    padding: 0;\n}\n\n/* --- Popup Styles --- */\n.$[prefix]-popup-window .$[prefix]-content {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    padding: 20px;\n    box-sizing: border-box;\n}\n.$[prefix]-popup-message {\n    font-family: sans-serif;\n    font-size: 14px;\n    line-height: 1.5;\n    flex-grow: 1;\n    word-wrap: break-word;\n}\n.$[prefix]-popup-buttons {\n    display: flex;\n    justify-content: flex-end;\n    gap: 10px;\n    margin-top: 20px;\n    flex-shrink: 0;\n    touch-action: auto;\n}\n.$[prefix]-popup-button {\n    min-width: 80px;\n    padding: 8px 12px;\n    margin: 0;\n    border: 1px solid #ccc;\n    border-radius: 3px;\n    background-color: #f0f0f0;\n    cursor: pointer;\n    font-size: 14px;\n    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.15);\n}\n.$[prefix]-popup-button:hover {\n    border-color: #bbb;\n    background-color: #e9e9e9;\n}\n.$[prefix]-popup-button:active {\n    background-color: #dcdcdc;\n}\n\n/* --- Merged Menu/Tab Styles --- */\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-title-bar,\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-title-bar {\n    height: auto;\n    align-items: flex-end;\n    padding: 0;\n}\n.$[prefix]-window.$[prefix]-tab-style-merged.$[prefix]-window.active .$[prefix]-title-bar {\n    background-color: var(--$[prefix]-title-bar-bg);\n}\n\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-icon {\n    margin-block: auto;\n}\n\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-title {\n    display: none;\n}\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-title {\n    flex-grow: 1;\n    margin-block: auto;\n}\n\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-menu-bar {\n    border-bottom: none;\n    background: transparent;\n    padding: 0 6px;\n    align-self: center;\n}\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-menu-item {\n    line-height: var(--$[prefix]-title-bar-height);\n    padding-top: 0;\n    padding-bottom: 0;\n}\n\n.$[prefix]-window.$[prefix]-menu-style-merged.active:not(.$[prefix]-tab-style-merged) .$[prefix]-menu-item {\n    color: var(--winlet-menu-item-hover-color);\n}\n.$[prefix]-window.$[prefix]-menu-style-merged.active:not(.$[prefix]-tab-style-merged) .$[prefix]-menu-item:hover {\n    background-color: var(--$[prefix]-title-bar-bg);\n    color: var(--$[prefix]-menu-item-color);\n}\n\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab-bar {\n    background-color: transparent;\n    flex-grow: 1;\n    flex-shrink: 1;\n    min-width: 0;\n    align-items: flex-end;\n    height: calc(var(--$[prefix]-title-bar-height) + 4px);\n    margin: 0;\n    order: 1; /* controlsより前に配置 */\n}\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab-bar {\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n}\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab-bar::-webkit-scrollbar{\n    width: 0px;\n    height: 0px;\n}\n\n.$[prefix]-window.$[prefix]-title-bar.controls-left .$[prefix]-tab-bar {\n    order: -1;\n}\n\n\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab {\n    border: 1px solid var(--$[prefix]-border);\n    border-bottom: none;\n    border-radius: 6px 6px 0 0;\n    margin-top: 4px;\n    margin-left: -1px;\n    position: relative;\n    bottom: -1px;\n}\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab.active {\n    background-color: var(--$[prefix]-bg);\n    border-color: var(--$[prefix]-border);\n    border-bottom: 1px solid var(--$[prefix]-bg);\n    z-index: 2;\n}\n\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab-add-btn {\n    border: none;\n    align-self: center;\n}\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-main-content {\n    border-top: none;\n}\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-controls,\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-controls {\n    align-self: flex-start;\n    order: 2;\n}\n\n/* --- Mobile / Touch Device Adjustments --- */\n@media (pointer: coarse), (max-width: 768px) {\n    :root {\n        --$[prefix]-resize-handle-size: 16px;\n        --$[prefix]-resize-handle-offset: -8px;\n    }\n    .$[prefix]-control-btn {\n        width: calc(var(--$[prefix]-title-bar-height) * 1.5);\n    }\n}\n"},{}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LIB_VERSION=void 0;n.LIB_VERSION="v1.0.1.1"},{}]},{},[28]);
//# sourceMappingURL=winlet.min.js.map