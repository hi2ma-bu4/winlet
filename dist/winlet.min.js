!function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){return r(t[a][1][e]||e)},d,d.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){t.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i},t.exports.__esModule=!0,t.exports.default=t.exports},{}],2:[function(e,t,n){t.exports=function(e){if(Array.isArray(e))return e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],3:[function(e,t,n){var i=e("./arrayLikeToArray.js");t.exports=function(e){if(Array.isArray(e))return i(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayLikeToArray.js":1}],4:[function(e,t,n){t.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},t.exports.__esModule=!0,t.exports.default=t.exports},{}],5:[function(e,t,n){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],6:[function(e,t,n){var i=e("./isNativeReflectConstruct.js"),r=e("./setPrototypeOf.js");t.exports=function(e,t,n){if(i())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,t);var a=new(e.bind.apply(e,o));return n&&r(a,n.prototype),a},t.exports.__esModule=!0,t.exports.default=t.exports},{"./isNativeReflectConstruct.js":13,"./setPrototypeOf.js":19}],7:[function(e,t,n){var i=e("./toPropertyKey.js");function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}t.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPropertyKey.js":23}],8:[function(e,t,n){var i=e("./toPropertyKey.js");t.exports=function(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPropertyKey.js":23}],9:[function(e,t,n){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],10:[function(e,t,n){var i=e("./setPrototypeOf.js");t.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./setPrototypeOf.js":19}],11:[function(e,t,n){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],12:[function(e,t,n){t.exports=function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],13:[function(e,t,n){function i(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(t.exports=i=function(){return!!e},t.exports.__esModule=!0,t.exports.default=t.exports)()}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],14:[function(e,t,n){t.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{}],15:[function(e,t,n){t.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],16:[function(e,t,n){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],17:[function(e,t,n){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},{}],18:[function(e,t,n){var i=e("./typeof.js").default,r=e("./assertThisInitialized.js");t.exports=function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./assertThisInitialized.js":4,"./typeof.js":24}],19:[function(e,t,n){function i(e,n){return t.exports=i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},t.exports.__esModule=!0,t.exports.default=t.exports,i(e,n)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],20:[function(e,t,n){var i=e("./arrayWithHoles.js"),r=e("./iterableToArrayLimit.js"),o=e("./unsupportedIterableToArray.js"),a=e("./nonIterableRest.js");t.exports=function(e,t){return i(e)||r(e,t)||o(e,t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayWithHoles.js":2,"./iterableToArrayLimit.js":15,"./nonIterableRest.js":16,"./unsupportedIterableToArray.js":25}],21:[function(e,t,n){var i=e("./arrayWithoutHoles.js"),r=e("./iterableToArray.js"),o=e("./unsupportedIterableToArray.js"),a=e("./nonIterableSpread.js");t.exports=function(e){return i(e)||r(e)||o(e)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayWithoutHoles.js":3,"./iterableToArray.js":14,"./nonIterableSpread.js":17,"./unsupportedIterableToArray.js":25}],22:[function(e,t,n){var i=e("./typeof.js").default;t.exports=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./typeof.js":24}],23:[function(e,t,n){var i=e("./typeof.js").default,r=e("./toPrimitive.js");t.exports=function(e){var t=r(e,"string");return"symbol"==i(t)?t:t+""},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPrimitive.js":22,"./typeof.js":24}],24:[function(e,t,n){function i(e){return t.exports=i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,i(e)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},{}],25:[function(e,t,n){var i=e("./arrayLikeToArray.js");t.exports=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},{"./arrayLikeToArray.js":1}],26:[function(e,t,n){var i=e("./getPrototypeOf.js"),r=e("./setPrototypeOf.js"),o=e("./isNativeFunction.js"),a=e("./construct.js");function s(e){var n="function"==typeof Map?new Map:void 0;return t.exports=s=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,i(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports,s(e)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports},{"./construct.js":6,"./getPrototypeOf.js":9,"./isNativeFunction.js":12,"./setPrototypeOf.js":19}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.defaultConfig=void 0;n.defaultConfig={id:null,ifExists:"focus",title:"New Window",icon:null,x:"auto",y:"auto",width:500,height:400,minWidth:200,minHeight:150,virtualizable:!0,windowOptions:{resizableX:!0,resizableY:!0,movable:!0,closable:!0,minimizable:!0,maximizable:!0,maximizableOnDblClick:!0,focus:!0,alwaysOnTop:!1,useGhostWindow:!1,opacity:1,modal:!1},content:{html:"",iframe:{src:"",srcdoc:"",allow:"",referrerPolicy:"",loading:"lazy",sandbox:"",loadWinLet:!1},template:""},menu:[],menuStyle:"default",tabs:[],tabStyle:"default",tabOptions:{reorderable:!1,closable:!1,addable:!1,detachable:!1,mergeable:!1,allowIncomingMerge:!1,onAdd:void 0,onMergeAttempt:void 0},taskbarOptions:{showIconOnly:!0},contextMenu:[],customControls:[],enableShortcuts:!0,controlsPosition:"right",showLoadingIndicator:!0,onOpen:function(){},onClose:function(){},onFocus:function(){},onBlur:function(){},onResize:function(){},onMove:function(){},onReload:function(){},_isPopup:!1,_parent:null,_taskbarItem:null}},{}],28:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.WinLetError=n.WinLetBaseError=n.SimpleError=void 0;var r=i(e("@babel/runtime/helpers/createClass")),o=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/possibleConstructorReturn")),s=i(e("@babel/runtime/helpers/getPrototypeOf")),l=i(e("@babel/runtime/helpers/inherits")),c=i(e("@babel/runtime/helpers/wrapNativeSuper"));function d(e,t,n){return t=(0,s.default)(t),(0,a.default)(e,u()?Reflect.construct(t,n||[],(0,s.default)(e).constructor):t.apply(e,n))}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}var p=n.WinLetBaseError=function(e){function t(e){var n;(0,o.default)(this,t),(n=d(this,t,[e])).name=n.constructor.name;var i=Error;return i.captureStackTrace&&i.captureStackTrace(n,n.constructor),n}return(0,l.default)(t,e),(0,r.default)(t)}((0,c.default)(Error)),f=n.SimpleError=function(e){function t(e){return(0,o.default)(this,t),d(this,t,[e])}return(0,l.default)(t,e),(0,r.default)(t)}(p);n.WinLetError=function(e){function t(){return(0,o.default)(this,t),d(this,t,arguments)}return(0,l.default)(t,e),(0,r.default)(t)}(f)},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/getPrototypeOf":9,"@babel/runtime/helpers/inherits":10,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/helpers/wrapNativeSuper":26}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.TIMEOUT_RESULT=n.LIBRARY_NAME=n.CLOSE_BUTTON_RESULT=void 0;n.LIBRARY_NAME="winlet",n.TIMEOUT_RESULT=Symbol("timeout"),n.CLOSE_BUTTON_RESULT=Symbol("close")},{}],30:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("@babel/runtime/helpers/toConsumableArray")),o=i(e("@babel/runtime/helpers/classCallCheck")),a=i(e("@babel/runtime/helpers/createClass")),s=i(e("@babel/runtime/helpers/possibleConstructorReturn")),l=i(e("@babel/runtime/helpers/getPrototypeOf")),c=i(e("@babel/runtime/helpers/inherits")),d=i(e("@babel/runtime/helpers/defineProperty")),u=e("../const/config"),p=e("../const/errors"),f=e("../const/types"),h=i(e("../libs/baseclass")),b=i(e("../libs/utils")),v=i(e("./window_manager"));function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(x=function(){return!!e})()}n.default=function(e){function t(e,n){var i,r,a,c;if((0,o.default)(this,t),r=this,a=t,a=(0,l.default)(a),i=(0,s.default)(r,x()?Reflect.construct(a,c||[],(0,l.default)(r).constructor):a.apply(r,c)),(0,d.default)(i,"state","normal"),(0,d.default)(i,"lastState",{x:0,y:0,width:0,height:0}),(0,d.default)(i,"focused",!1),(0,d.default)(i,"DRAG_THRESHOLD",5),(0,d.default)(i,"tabs",[]),(0,d.default)(i,"addTabBtn",null),(0,d.default)(i,"isMenuOpen",!1),(0,d.default)(i,"boundGlobalClickHandler",null),(0,d.default)(i,"MOBILE_CONTEXT_MENU_TIMEOUT",700),(0,d.default)(i,"contextMenuTimer",null),(0,d.default)(i,"popupCloseCallback",null),(0,d.default)(i,"childManager",null),(0,d.default)(i,"debugOverlayEl",null),(0,d.default)(i,"virtualizationLevel","none"),(0,d.default)(i,"minimizeVirtualizeTimer",null),(0,d.default)(i,"virtualizationHierarchy",["none","frozen","suspended","unloaded"]),i.id=e.id||b.default.generateId("".concat(f.LIBRARY_NAME,"-window")),e.id){var h=document.getElementById(e.id);if(h&&h.classList.contains("".concat(f.LIBRARY_NAME,"-window")))throw new p.WinLetError('WinLet: Window with ID "'.concat(e.id,'" already exists. New window will not be created.'))}return i.manager=n,i.options=b.default.deepMerge(b.default.deepCopy(u.defaultConfig),e),i.parentWindow=e._parent||null,i.el=i.createDOM(),i.options._isPopup&&i.el.classList.add("".concat(f.LIBRARY_NAME,"-popup-window")),"merged"===i.options.tabStyle&&i.el.classList.add("".concat(f.LIBRARY_NAME,"-tab-style-merged")),"merged"===i.options.menuStyle&&i.el.classList.add("".concat(f.LIBRARY_NAME,"-menu-style-merged")),i.options.windowOptions.alwaysOnTop&&i.el.classList.add("".concat(f.LIBRARY_NAME,"-always-on-top")),i.options.windowOptions.modal&&(i.el.classList.add("".concat(f.LIBRARY_NAME,"-modal")),i.el.setAttribute("aria-modal","true")),i.titleBarEl=i.el.querySelector(".".concat(f.LIBRARY_NAME,"-title-bar")),i.iconEl=i.el.querySelector(".".concat(f.LIBRARY_NAME,"-icon")),i.titleEl=i.el.querySelector(".".concat(f.LIBRARY_NAME,"-title")),i.mainContentEl=i.el.querySelector(".".concat(f.LIBRARY_NAME,"-main-content")),i.contentEl=i.mainContentEl.querySelector(".".concat(f.LIBRARY_NAME,"-content")),i.loaderEl=i.mainContentEl.querySelector(".".concat(f.LIBRARY_NAME,"-loader-overlay")),i.debugOverlayEl=i.el.querySelector(".".concat(f.LIBRARY_NAME,"-debug-overlay")),i.applyOptions(),i.setupEventListeners(),i.updateDebugOverlay(),i.options.onOpen(i),i}return(0,c.default)(t,e),(0,a.default)(t,[{key:"createDOM",value:function(){var e,t=document.createElement("div");t.className="".concat(f.LIBRARY_NAME,"-window"),t.id=this.id,t.setAttribute("role","application"),t.setAttribute("aria-labelledby","".concat(this.id,"-title")),"minimized"===this.state&&(t.setAttribute("inert",""),t.setAttribute("aria-hidden","true"));var n=[];this.options.windowOptions.resizableY&&n.push('<div class="'.concat(f.LIBRARY_NAME,"-resize-handle ").concat(f.LIBRARY_NAME,'-n"></div>'),'<div class="'.concat(f.LIBRARY_NAME,"-resize-handle ").concat(f.LIBRARY_NAME,'-s"></div>')),this.options.windowOptions.resizableX&&n.push('<div class="'.concat(f.LIBRARY_NAME,"-resize-handle ").concat(f.LIBRARY_NAME,'-w"></div>'),'<div class="'.concat(f.LIBRARY_NAME,"-resize-handle ").concat(f.LIBRARY_NAME,'-e"></div>')),this.options.windowOptions.resizableX&&this.options.windowOptions.resizableY&&n.push('<div class="'.concat(f.LIBRARY_NAME,"-resize-handle ").concat(f.LIBRARY_NAME,'-nw"></div>'),'<div class="'.concat(f.LIBRARY_NAME,"-resize-handle ").concat(f.LIBRARY_NAME,'-ne"></div>'),'<div class="'.concat(f.LIBRARY_NAME,"-resize-handle ").concat(f.LIBRARY_NAME,'-sw"></div>'),'<div class="'.concat(f.LIBRARY_NAME,"-resize-handle ").concat(f.LIBRARY_NAME,'-se"></div>'));var i=n.join(""),r=this.options.menu.length>0,o=this.options.tabs.length>0,a="merged"===this.options.menuStyle&&r,s="merged"===this.options.tabStyle&&o,l=(null!==(e=this.options.customControls)&&void 0!==e?e:[]).map(function(e){return'<button class="'.concat(f.LIBRARY_NAME,"-control-btn ").concat(f.LIBRARY_NAME,'-custom-control-btn" data-name="').concat(e.name,'" title="').concat(e.title||"",'" aria-label="').concat(e.title||e.name,'">').concat(e.html,"</button>")}).join(""),c='\n            <div class="'.concat(f.LIBRARY_NAME,'-controls">\n\t\t\t\t').concat(l,"\n                ").concat(this.options.windowOptions.minimizable?'<input class="'.concat(f.LIBRARY_NAME,"-control-btn ").concat(f.LIBRARY_NAME,'-minimize-btn" type="button" value="＿" title="Minimize" aria-label="Minimize"/>'):"","\n                ").concat(this.options.windowOptions.maximizable?'<input class="'.concat(f.LIBRARY_NAME,"-control-btn ").concat(f.LIBRARY_NAME,'-maximize-btn" type="button" value="□" title="Maximize" aria-label="Maximize"/>'):"","\n                ").concat(this.options.windowOptions.closable?'<input class="'.concat(f.LIBRARY_NAME,"-control-btn ").concat(f.LIBRARY_NAME,'-close-btn" type="button" value="╳" title="Close" aria-label="Close"/>'):"","\n            </div>"),d='\n            <div class="'.concat(f.LIBRARY_NAME,'-icon"></div>\n            ').concat(a?'<div class="'.concat(f.LIBRARY_NAME,'-menu-bar"></div>'):"",'\n            <div id="').concat(this.id,'-title" class="').concat(f.LIBRARY_NAME,'-title"></div>\n            ').concat(s?'<div class="'.concat(f.LIBRARY_NAME,'-tab-bar"></div>'):"","\n            ").concat(c,"\n        "),u='\n            <div class="'.concat(f.LIBRARY_NAME,'-loader-overlay" style="display: none;">\n                <div class="').concat(f.LIBRARY_NAME,'-loader-spinner"></div>\n            </div>\n        '),p='<div class="'.concat(f.LIBRARY_NAME,'-debug-overlay"></div>');return t.innerHTML="\n\t\t\t".concat(p,'\n            <div class="').concat(f.LIBRARY_NAME,"-title-bar ").concat(f.LIBRARY_NAME,'-us-none">\n                ').concat(d,'\n            </div>\n            <div class="').concat(f.LIBRARY_NAME,'-main-content">\n                ').concat(!a&&r?'<div class="'.concat(f.LIBRARY_NAME,'-menu-bar" role="menubar"></div>'):"","\n                ").concat(!s&&o?'<div class="'.concat(f.LIBRARY_NAME,'-tab-bar" role="tablist"></div>'):"",'\n                <div class="').concat(f.LIBRARY_NAME,'-content"></div>\n\t\t\t\t').concat(u,"\n            </div>\n            ").concat(i,"\n        "),t}},{key:"applyOptions",value:function(){this.setTitle(this.options.title),this.setIcon(this.options.icon),this.setSize(this.options.width,this.options.height),this.el.style.minWidth="".concat(this.options.minWidth,"px"),this.el.style.minHeight="".concat(this.options.minHeight,"px"),"left"===this.options.controlsPosition&&this.titleBarEl.classList.add("".concat(f.LIBRARY_NAME,"-controls-left")),this.options.tabs.length>0?this.createTabs():this.renderContent(this.contentEl,this.options.content),this.options.menu.length>0&&this.createMenu()}},{key:"showLoader",value:function(){this.options.showLoadingIndicator&&(this.loaderEl.style.display="flex")}},{key:"hideLoader",value:function(){this.loaderEl.style.display="none"}},{key:"renderContent",value:function(e,t){var n=this;if(e.innerHTML="",this.hideLoader(),"unloaded"!==this.virtualizationLevel)if(t.template){var i=document.querySelector(t.template);"TEMPLATE"===(null==i?void 0:i.tagName)?e.appendChild(i.content.cloneNode(!0)):(e.innerHTML="Error: Template not found or invalid.",console.warn("WinLet Warning: Template not found or invalid."))}else if(t.html)e.innerHTML=t.html;else if(b.default.isNonEmptyObject(t.iframe)&&(t.iframe.src||t.iframe.srcdoc)){this.showLoader();var r=document.createElement("iframe"),o=t.iframe;if(o.src&&(r.src=o.src),o.srcdoc){var a=o.srcdoc;if(o.loadWinLet){var s=this.manager.getGlobalConfig();if(s.libraryPath){var l='<script src="'.concat(s.libraryPath,'"><\/script>');a='<!DOCTYPE html><html><head><meta charset="UTF-8">'.concat(l).concat("<script>document.addEventListener('DOMContentLoaded', () => window.WinLet.init({ container: document.body }));<\/script>","</head><body>").concat(o.srcdoc,"</body></html>")}else console.warn("WinLet Warning: `loadWinLet` is true, but `libraryPath` is not set in global config.")}r.srcdoc=a}o.allow&&(r.allow=o.allow),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.loading&&(r.loading=o.loading),o.sandbox&&(Array.isArray(o.sandbox)||(o.sandbox=[o.sandbox]),o.sandbox.length>0&&r.setAttribute("sandbox",o.sandbox.join(" "))),r.addEventListener("load",function(){return n.hideLoader()}),r.addEventListener("error",function(){return n.hideLoader()}),e.appendChild(r)}else e.innerHTML=""}},{key:"closeAllMenus",value:function(){this.el.querySelectorAll(".".concat(f.LIBRARY_NAME,"-menu-item > .").concat(f.LIBRARY_NAME,"-menu-dropdown")).forEach(function(e){e.style.display="none"}),this.isMenuOpen=!1}},{key:"createMenu",value:function(){var e=this,t=this.el.querySelector(".".concat(f.LIBRARY_NAME,"-menu-bar"));t.innerHTML="",this.options.menu.forEach(function(n){var i,r=document.createElement("div");if(r.className="".concat(f.LIBRARY_NAME,"-menu-item ").concat(f.LIBRARY_NAME,"-us-none"),r.textContent=null!==(i=n.name)&&void 0!==i?i:"",r.setAttribute("role","menu"),n.items){var o=e.createDropdownMenu(n.items);r.addEventListener("click",function(t){t.stopPropagation();var n="block"===o.style.display;e.closeAllMenus(),n||(o.style.display="block",e.isMenuOpen=!0)}),r.addEventListener("mouseenter",function(){e.isMenuOpen&&(e.closeAllMenus(),o.style.display="block",e.isMenuOpen=!0)}),r.appendChild(o)}t.appendChild(r)})}},{key:"createDropdownMenu",value:function(e){var t=this,n=document.createElement("ul");return n.className="".concat(f.LIBRARY_NAME,"-menu-dropdown"),e.forEach(function(e){var i=document.createElement("li");if(e.separator)i.className="".concat(f.LIBRARY_NAME,"-separator");else{var r,o=null!==(r=e.name)&&void 0!==r?r:"";if(o="<span>".concat(o,"</span>"),t.options.enableShortcuts&&e.shortcut&&(o+='<span class="'.concat(f.LIBRARY_NAME,'-shortcut-text">(').concat(e.shortcut,")</span>")),i.innerHTML='<div class="'.concat(f.LIBRARY_NAME,'-menu-dropdown-item" role="menuitem">').concat(o,"</div>"),i.addEventListener("click",function(n){var i;n.stopPropagation(),t.closeAllMenus(),null===(i=e.action)||void 0===i||i.call(e,t)}),e.items){i.classList.add("".concat(f.LIBRARY_NAME,"-has-submenu"));var a=t.createDropdownMenu(e.items);i.appendChild(a)}}n.appendChild(i)}),n}},{key:"createTabs",value:function(){var e,t=this,n=this.el.querySelector(".".concat(f.LIBRARY_NAME,"-tab-bar"));n.innerHTML="",this.tabs=[];var i=null!==(e=this.options.tabOptions)&&void 0!==e?e:{};this.options.tabs.forEach(function(e,n){t.createTabElement(e,n)}),i.addable&&(this.addTabBtn=document.createElement("div"),this.addTabBtn.className="".concat(f.LIBRARY_NAME,"-tab-add-btn"),this.addTabBtn.textContent="+",this.addTabBtn.addEventListener("click",function(e){var n,r=null===(n=i.onAdd)||void 0===n?void 0:n.call(i,t);r&&t.addTab(r)}),n.appendChild(this.addTabBtn)),this.setupTabBarDropZone(),this.tabs.length>0&&this.activateTab(0)}},{key:"setupTabBarDropZone",value:function(){var e=this,t=this.el.querySelector(".".concat(f.LIBRARY_NAME,"-tab-bar"));t&&this.options.tabOptions.reorderable&&(t.addEventListener("dragover",function(e){var n;null!==(n=e.dataTransfer)&&void 0!==n&&n.types.includes("application/winlet-tab")&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),t.classList.add("".concat(f.LIBRARY_NAME,"-drag-over")))}),t.addEventListener("dragleave",function(){t.classList.remove("".concat(f.LIBRARY_NAME,"-drag-over"))}),t.addEventListener("drop",function(n){var i,r,o,a;n.preventDefault(),t.classList.remove("".concat(f.LIBRARY_NAME,"-drag-over"));var s=null===(i=n.dataTransfer)||void 0===i?void 0:i.getData("application/winlet-tab"),l=null===(r=n.dataTransfer)||void 0===r?void 0:r.getData("application/winlet-source-window-id"),c=null===(o=n.dataTransfer)||void 0===o?void 0:o.getData("text/plain");if(s&&l&&c){var d=null===(a=e.manager.container)||void 0===a?void 0:a.querySelector(".".concat(f.LIBRARY_NAME,"-tab.").concat(f.LIBRARY_NAME,"-dragging"));if(l!==e.id){var u=e.manager.getWindow(l);if(u){var p,h,b=u.options.tabOptions,v=e.options.tabOptions,x=null!==(p=b.mergeable)&&void 0!==p?p:b.detachable,m=null===(h=v.allowIncomingMerge)||void 0===h||h,g=!v.onMergeAttempt||v.onMergeAttempt(u,e);if(!x||!m||!g)return;var y=JSON.parse(s);e.addTab(y,!0),u.closeTab(parseInt(c,10))}}else d&&e.updateTabOrderFromDOM()}}))}},{key:"createTabElement",value:function(e,t){var n,i=this,r=this.el.querySelector(".".concat(f.LIBRARY_NAME,"-tab-bar")),o=null!==(n=this.options.tabOptions)&&void 0!==n?n:{},a=document.createElement("div");a.className="".concat(f.LIBRARY_NAME,"-tab"),a.setAttribute("role","tab"),a.dataset.tabId=t.toString();var s=document.createElement("span");if(s.textContent=e.title,a.appendChild(s),r.insertBefore(a,this.addTabBtn),o.closable){var l=document.createElement("span");l.className="".concat(f.LIBRARY_NAME,"-tab-close-btn"),l.innerHTML="&times;",l.addEventListener("click",function(e){e.stopPropagation();var t=i.tabs.findIndex(function(e){return e.tabEl===a});-1!==t&&i.closeTab(t)}),a.appendChild(l)}var c=document.createElement("div");c.className="".concat(f.LIBRARY_NAME,"-tab-content"),c.setAttribute("role","tabpanel"),this.contentEl.appendChild(c),this.renderContent(c,e.content),a.addEventListener("click",function(e){i.activateTab(+a.dataset.tabId)}),this.tabs.splice(t,0,{tabEl:a,contentEl:c}),o.reorderable&&this.makeTabReorderable(a)}},{key:"makeTabReorderable",value:function(e){var t=this;e.draggable=!0,e.addEventListener("dragstart",function(n){if(n.dataTransfer.setData("text/plain",e.dataset.tabId),e.classList.add("".concat(f.LIBRARY_NAME,"-dragging")),t.options.tabOptions.detachable){var i=parseInt(e.dataset.tabId,10);if(!isNaN(i)&&t.options.tabs[i]){var r=t.options.tabs[i];n.dataTransfer.setData("application/winlet-tab",JSON.stringify(r)),n.dataTransfer.setData("application/winlet-source-window-id",t.id),t.manager.onTabDragStart(t.id)}}}),e.addEventListener("dragend",function(){e.classList.remove("".concat(f.LIBRARY_NAME,"-dragging")),t.manager.onTabDragEnd()}),e.addEventListener("dragover",function(n){var i;if((null===(i=t.manager.draggingTabInfo)||void 0===i?void 0:i.sourceWindowId)===t.id){n.preventDefault();var r=document.querySelector(".".concat(f.LIBRARY_NAME,"-tab.").concat(f.LIBRARY_NAME,"-dragging"));if(r&&r!==e){var o=e.getBoundingClientRect(),a=n.clientX>o.left+o.width/2,s=e.parentNode;a?s.insertBefore(r,e.nextSibling):s.insertBefore(r,e)}}},{passive:!1}),e.addEventListener("drop",function(e){e.preventDefault()},{passive:!1})}},{key:"closeTab",value:function(e){var t,n=null===(t=this.tabs[e])||void 0===t?void 0:t.tabEl.classList.contains("".concat(f.LIBRARY_NAME,"-active"));if(this.tabs[e].tabEl.remove(),this.tabs[e].contentEl.remove(),this.tabs.splice(e,1),this.options.tabs.splice(e,1),this.tabs.forEach(function(e,t){return e.tabEl.dataset.tabId=t.toString()}),this.tabs.length>0){if(n){var i=Math.max(0,e-1);this.activateTab(i)}}else this.close()}},{key:"activateTab",value:function(e){this.tabs.forEach(function(t,n){t.tabEl.classList.toggle("".concat(f.LIBRARY_NAME,"-active"),n===e),t.contentEl.classList.toggle("".concat(f.LIBRARY_NAME,"-active"),n===e)})}},{key:"addTab",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.options.tabs.push(e);var n=this.options.tabs.length-1;this.createTabElement(e,n),t&&(this.activateTab(n),this.focus())}},{key:"getTabs",value:function(){return this.tabs}},{key:"updateTabOrderFromDOM",value:function(){var e=Array.from(this.el.querySelectorAll(".".concat(f.LIBRARY_NAME,"-tab-bar > .").concat(f.LIBRARY_NAME,"-tab"))),t=[],n=[],i=(0,r.default)(this.tabs),o=(0,r.default)(this.options.tabs);e.forEach(function(e){var r=i.findIndex(function(t){return t.tabEl===e});-1!==r&&(t.push(i[r]),n.push(o[r]))}),this.tabs=t,this.options.tabs=n,this.tabs.forEach(function(e,t){return e.tabEl.dataset.tabId=t.toString()})}},{key:"setupEventListeners",value:function(){var e=this;this.el.addEventListener("click",function(){return e.focus()},!0),this.el.addEventListener("focusin",function(){return e.focus()}),this.boundGlobalClickHandler=function(){e.isMenuOpen&&e.closeAllMenus()},document.addEventListener("click",this.boundGlobalClickHandler);var t=this.el.querySelector(".".concat(f.LIBRARY_NAME,"-controls"));if(null==t||t.addEventListener("click",function(t){var n=t.target.closest(".".concat(f.LIBRARY_NAME,"-control-btn"));if(n)if(n.classList.contains("".concat(f.LIBRARY_NAME,"-close-btn"))){var i;if(t.stopPropagation(),e.options._isPopup)null===(i=e.popupCloseCallback)||void 0===i||i.call(e,f.CLOSE_BUTTON_RESULT);e.close()}else if(n.classList.contains("".concat(f.LIBRARY_NAME,"-maximize-btn")))t.stopPropagation(),e.toggleMaximize();else if(n.classList.contains("".concat(f.LIBRARY_NAME,"-minimize-btn")))t.stopPropagation(),e.minimize();else if(n.classList.contains("".concat(f.LIBRARY_NAME,"-custom-control-btn"))){t.stopPropagation();var r=n.dataset.name,o=e.options.customControls.find(function(e){return e.name===r});null==o||o.action(e)}}),this.options.windowOptions.movable&&this.makeMovable(),(this.options.windowOptions.resizableX||this.options.windowOptions.resizableY)&&this.makeResizable(),this.options.contextMenu.length>0){this.el.addEventListener("contextmenu",function(t){t.preventDefault(),e.manager.showContextMenu(t.clientX,t.clientY,e.options.contextMenu,e)},{passive:!1}),this.el.addEventListener("pointerdown",function(t){"touch"===t.pointerType&&(e.contextMenuTimer=window.setTimeout(function(){e.contextMenuTimer=null,e.manager.showContextMenu(t.clientX,t.clientY,e.options.contextMenu,e)},e.MOBILE_CONTEXT_MENU_TIMEOUT))});var n=function(){e.contextMenuTimer&&(clearTimeout(e.contextMenuTimer),e.contextMenuTimer=null)};this.el.addEventListener("pointermove",n),this.el.addEventListener("pointerup",n),this.el.addEventListener("pointercancel",n)}}},{key:"makeMovable",value:function(){var e=this;this.titleBarEl.addEventListener("pointerdown",function(t){if(!t.target.closest(".".concat(f.LIBRARY_NAME,"-control-btn, .").concat(f.LIBRARY_NAME,"-resize-handle, .").concat(f.LIBRARY_NAME,"-menu-item, .").concat(f.LIBRARY_NAME,"-tab, .").concat(f.LIBRARY_NAME,"-tab-add-btn"))&&0===t.button){t.preventDefault(),e.focus();var n,i,r,o=t.clientX,a=t.clientY,s=!1,l=null;if(e.options.windowOptions.useGhostWindow)(l=document.createElement("div")).className="".concat(f.LIBRARY_NAME,"-ghost-window"),null===(r=e.manager.container)||void 0===r||r.appendChild(l),l.style.left="".concat(e.el.offsetLeft,"px"),l.style.top="".concat(e.el.offsetTop,"px"),l.style.width="".concat(e.el.offsetWidth,"px"),l.style.height="".concat(e.el.offsetHeight,"px");e.el.classList.add("".concat(f.LIBRARY_NAME,"-is-dragging"));var c=function(r){var c;if(null!==(c=e.el)&&void 0!==c&&c.isConnected){if(!s){var d=Math.abs(r.clientX-o),u=Math.abs(r.clientY-a);if(!(d>e.DRAG_THRESHOLD||u>e.DRAG_THRESHOLD))return;if(s=!0,e.el.setPointerCapture(t.pointerId),e.contentEl.style.pointerEvents="none","maximized"===e.state){var p=e.lastState.width,f=t.clientX/e.el.offsetWidth,h=e.titleBarEl.getBoundingClientRect(),b=t.clientY-h.top,v=t.clientX-p*f,x=t.clientY-b;e.restore(),e.setPosition(v,x)}n=e.el.offsetLeft,i=e.el.offsetTop}var m=n+r.clientX-o,g=i+r.clientY-a;l?(l.style.left="".concat(m,"px"),l.style.top="".concat(g,"px")):e.setPosition(m,g)}},d=function(){document.removeEventListener("pointermove",c),document.removeEventListener("pointerup",d),l&&(e.setPosition(l.offsetLeft,l.offsetTop),l.remove()),s&&(e.el.releasePointerCapture(t.pointerId),e.contentEl.style.pointerEvents="auto",e.options.onMove(e),e.manager.updateVirtualization()),e.el.classList.remove("".concat(f.LIBRARY_NAME,"-is-dragging"))};document.addEventListener("pointermove",c),document.addEventListener("pointerup",d)}},{passive:!1}),this.options.windowOptions.maximizable&&this.titleBarEl.addEventListener("dblclick",function(t){if(e.options.windowOptions.maximizableOnDblClick){if(t.target.closest(".".concat(f.LIBRARY_NAME,"-control-btn, .").concat(f.LIBRARY_NAME,"-menu-item, .").concat(f.LIBRARY_NAME,"-tab")))return;e.toggleMaximize()}})}},{key:"makeResizable",value:function(){var e=this;this.el.querySelectorAll(".".concat(f.LIBRARY_NAME,"-resize-handle")).forEach(function(t){t.addEventListener("pointerdown",function(n){if(0===n.button&&null!=t&&t.isConnected){n.preventDefault(),n.stopPropagation(),e.focus(),e.contentEl.style.pointerEvents="none",t.setPointerCapture(n.pointerId),e.el.classList.add("".concat(f.LIBRARY_NAME,"-is-resizing"));var i,r=null;if(e.options.windowOptions.useGhostWindow)(r=document.createElement("div")).className="".concat(f.LIBRARY_NAME,"-ghost-window"),null===(i=e.manager.container)||void 0===i||i.appendChild(r);var o=t.className.replace("".concat(f.LIBRARY_NAME,"-resize-handle "),""),a=n.clientX,s=n.clientY,l=e.el,c=l.offsetWidth,d=l.offsetHeight,u=l.offsetLeft,p=l.offsetTop,h=e.options,b=h.minWidth,v=h.minHeight,x=function(t){var n=c,i=d,l=u,h=p,x=t.clientX-a,m=t.clientY-s;o.includes("".concat(f.LIBRARY_NAME,"-e"))&&(n=Math.max(b,c+x)),o.includes("".concat(f.LIBRARY_NAME,"-w"))&&(n=Math.max(b,c-x),l=u+x),o.includes("".concat(f.LIBRARY_NAME,"-s"))&&(i=Math.max(v,d+m)),o.includes("".concat(f.LIBRARY_NAME,"-n"))&&(i=Math.max(v,d-m),h=p+m),r?(r.style.left="".concat(l,"px"),r.style.top="".concat(h,"px"),r.style.width="".concat(n,"px"),r.style.height="".concat(i,"px")):(e.setSize(n,i),e.setPosition(l,h))},m=function(){t.releasePointerCapture(n.pointerId),e.contentEl.style.pointerEvents="auto",r&&(e.setSize(r.offsetWidth,r.offsetHeight),e.setPosition(r.offsetLeft,r.offsetTop),r.remove()),document.removeEventListener("pointermove",x),document.removeEventListener("pointerup",m),e.options.onResize(e),e.updateDebugOverlay(),e.manager.updateVirtualization(),e.el.classList.remove("".concat(f.LIBRARY_NAME,"-is-resizing"))};document.addEventListener("pointermove",x),document.addEventListener("pointerup",m)}},{passive:!1})})}},{key:"isFontAwesome",value:function(e){var t=e.trim().split(/\s+/),n=t.some(function(e){return/^fa[bslr]?$/.test(e)}),i=t.some(function(e){return/^fa-[a-z0-9-]+$/.test(e)});return n&&i}},{key:"updateDebugOverlay",value:function(){if(this.debugOverlayEl){var e=this.getPosition(),t=this.getSize();this.debugOverlayEl.textContent="ID:    ".concat(this.id,"\nState: ").concat(this.state,"\nPos:   x:").concat(Math.round(e.x),", y:").concat(Math.round(e.y),"\nSize:  w:").concat(Math.round(t.width),", h:").concat(Math.round(t.height),"\nFocus: ").concat(this.focused,"\nz-idx: ").concat(this.el.style.zIndex,"\nVirt:  ").concat(this.virtualizationLevel).trim()}}},{key:"getUnsafeContentLevel",value:function(){return this.mainContentEl.querySelector("iframe, frame, video, audio, applet, embed, object")?"frozen":this.mainContentEl.querySelector("img, input, textarea, select, canvas, [contentEditable=true]")?"suspended":"unloaded"}},{key:"virtualize",value:function(e){if("auto"===e&&(e=this.getUnsafeContentLevel()),"none"!==e){var t=this.virtualizationHierarchy.indexOf(this.virtualizationLevel);if(!(this.virtualizationHierarchy.indexOf(e)<=t)){switch(this.cleanupVirtualizationStyles(),this.virtualizationLevel=e,e){case"frozen":this.el.classList.add("".concat(f.LIBRARY_NAME,"-is-frozen"));break;case"suspended":this.el.classList.add("".concat(f.LIBRARY_NAME,"-is-suspended"));break;case"unloaded":this.el.classList.add("".concat(f.LIBRARY_NAME,"-is-virtualized")),this.tabs.length>0?this.tabs.forEach(function(e){e.contentEl.innerHTML=""}):this.contentEl.innerHTML=""}this.updateDebugOverlay()}}}},{key:"unvirtualize",value:function(){var e=this;if("none"!==this.virtualizationLevel){var t=this.virtualizationLevel;this.virtualizationLevel="none",this.cleanupVirtualizationStyles(),"unloaded"===t&&(this.loaderEl.style.display="flex",setTimeout(function(){e.options.tabs.length>0?e.tabs.forEach(function(t){var n=parseInt(t.tabEl.dataset.tabId,10);e.renderContent(t.contentEl,e.options.tabs[n].content)}):e.renderContent(e.contentEl,e.options.content),e.loaderEl.style.display="none"},0)),this.updateDebugOverlay()}}},{key:"cleanupVirtualizationStyles",value:function(){this.el.classList.remove("".concat(f.LIBRARY_NAME,"-is-frozen"),"".concat(f.LIBRARY_NAME,"-is-suspended"),"".concat(f.LIBRARY_NAME,"-is-virtualized")),this.contentEl.style.display=""}},{key:"close",value:function(){this.boundGlobalClickHandler&&document.removeEventListener("click",this.boundGlobalClickHandler),this.options.onClose(this),this.manager.destroyWindow(this.id)}},{key:"minimize",value:function(){var e=this;if("minimized"!==this.state){"normal"!==this.state&&this.restore();var t=function(){e.state="minimized",e.el.setAttribute("aria-hidden","true"),e.el.classList.add("".concat(f.LIBRARY_NAME,"-minimized")),e.el.classList.remove("".concat(f.LIBRARY_NAME,"-is-minimizing")),e.manager.updateTaskbarItem(e,"minimized"),e.blur();var t,n=e.manager.getGlobalConfig();n.enableVirtualization&&e.options.virtualizable&&(e.minimizeVirtualizeTimer&&clearTimeout(e.minimizeVirtualizeTimer),e.minimizeVirtualizeTimer=window.setTimeout(function(){e.virtualize("auto")},null!==(t=n.virtualizationDelay)&&void 0!==t?t:5e3));e.updateDebugOverlay(),e.manager.updateVirtualization()};this.el.setAttribute("inert",""),this.manager.getGlobalConfig().enableAnimations?(this.el.classList.add("".concat(f.LIBRARY_NAME,"-is-minimizing")),this.el.setAttribute("inert",""),this.el.addEventListener("transitionend",t,{once:!0})):t()}}},{key:"toggleMaximize",value:function(){"maximized"===this.state?this.restore():this.maximize()}},{key:"maximize",value:function(){var e=this;if("maximized"!==this.state){"normal"!==this.state&&this.restore(),this.lastState={x:this.el.offsetLeft,y:this.el.offsetTop,width:this.el.offsetWidth,height:this.el.offsetHeight},this.state="maximized",this.el.classList.add("".concat(f.LIBRARY_NAME,"-maximized"));var t=function(){e.el.classList.remove("".concat(f.LIBRARY_NAME,"-is-maximizing")),e.setPosition(0,0),e.setSize("100%","100%"),e.updateDebugOverlay()};this.manager.getGlobalConfig().enableAnimations?(this.el.classList.add("".concat(f.LIBRARY_NAME,"-is-maximizing")),this.el.style.top="0px",this.el.style.left="0px",this.el.style.width="100%",this.el.style.height="100%",this.el.addEventListener("transitionend",t,{once:!0})):t();var n=this.el.querySelector(".".concat(f.LIBRARY_NAME,"-maximize-btn"));n&&(n.title="Restore",n.value="❏",n.setAttribute("aria-label","Restore"))}}},{key:"restore",value:function(){var e=this;this.minimizeVirtualizeTimer&&(clearTimeout(this.minimizeVirtualizeTimer),this.minimizeVirtualizeTimer=null),"none"!==this.virtualizationLevel&&this.unvirtualize();var t="minimized"===this.state;if("minimized"===this.state)this.state="normal",this.el.removeAttribute("aria-hidden"),this.el.removeAttribute("inert"),this.el.classList.remove("".concat(f.LIBRARY_NAME,"-minimized")),this.manager.updateTaskbarItem(this,"restored"),this.focus();else if("maximized"===this.state){var n=function(){e.state="normal",e.el.classList.remove("".concat(f.LIBRARY_NAME,"-maximized"),"".concat(f.LIBRARY_NAME,"-is-restoring"));var t=e.el.querySelector(".".concat(f.LIBRARY_NAME,"-maximize-btn"));t&&(t.title="Maximize",t.value="□",t.setAttribute("aria-label","Maximize")),e.updateDebugOverlay()};this.manager.getGlobalConfig().enableAnimations&&!t?(this.el.classList.add("".concat(f.LIBRARY_NAME,"-is-restoring")),this.setSize(this.lastState.width,this.lastState.height),this.setPosition(this.lastState.x,this.lastState.y),this.el.addEventListener("transitionend",n,{once:!0})):(this.setSize(this.lastState.width,this.lastState.height),this.setPosition(this.lastState.x,this.lastState.y),n())}this.updateDebugOverlay(),this.manager.updateVirtualization()}},{key:"focus",value:function(){this.focused||(this.parentWindow&&this.parentWindow.focus(),this.manager.focusWindow(this),this.focused=!0,this.el.classList.add("".concat(f.LIBRARY_NAME,"-active")),this.updateDebugOverlay(),this.options.onFocus(this))}},{key:"blur",value:function(){this.focused&&(this.focused=!1,this.el.classList.remove("".concat(f.LIBRARY_NAME,"-active")),this.updateDebugOverlay(),this.options.onBlur(this))}},{key:"shake",value:function(){var e=this,t="".concat(f.LIBRARY_NAME,"-is-shaking");this.el.classList.contains(t)||(this.el.classList.add(t),this.el.addEventListener("animationend",function(){e.el.classList.remove(t)},{once:!0}))}},{key:"reload",value:function(){var e=this;if(!1!==this.options.onReload(this)){var t=function(t,n){if(b.default.isNonEmptyObject(n.iframe)&&(n.iframe.src||n.iframe.srcdoc)){var i=t.querySelector("iframe");if(i&&i.src&&!n.iframe.srcdoc)try{var r;null===(r=i.contentWindow)||void 0===r||r.location.reload()}catch(i){console.warn("WinLet: Cross-origin iframe could not be reloaded directly. Recreating iframe element.",i),e.renderContent(t,n)}else e.renderContent(t,n)}else e.renderContent(t,n)};if(this.options.tabs.length>0){var n=this.tabs.findIndex(function(e){return e.tabEl.classList.contains("".concat(f.LIBRARY_NAME,"-active"))});if(n>-1){var i=this.tabs[n],r=this.options.tabs[n].content;t(i.contentEl,r)}}else t(this.contentEl,this.options.content)}}},{key:"getContent",value:function(){var e,t=this.tabs.findIndex(function(e){return e.tabEl.classList.contains("".concat(f.LIBRARY_NAME,"-active"))});return(e=t>-1?this.tabs[t].contentEl:this.contentEl).querySelector("iframe")||e}},{key:"getChildManager",value:function(){if(!this.childManager){this.childManager=new v.default({}),this.childManager.applyGlobalConfig({container:this.contentEl}),this.childManager.init()}return this.childManager}},{key:"createWindow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.contentEl.querySelector("iframe");if(t&&t.contentWindow){var n={type:"winlet:createWindow",options:e};return t.contentWindow.postMessage(n,"*"),console.warn("WinLet: Window creation inside an iframe is asynchronous and does not return an instance directly."),null}var i=this.getChildManager();return e._parent=this,i.createWindow(e)}},{key:"createPopup",value:function(e){var t={_parent:this};return this.getChildManager().popup(Object.assign(e,t))}},{key:"getTitle",value:function(){return this.options.title}},{key:"setTitle",value:function(e){this.options.title=e,this.titleEl.textContent=b.default.sanitizeHTML(e),this.titleEl.setAttribute("aria-label",b.default.sanitizeHTML(e)),this.manager.updateTaskbarItem(this,"titleChanged")}},{key:"setIcon",value:function(e){if(this.options.icon=e,this.iconEl.innerHTML="",e){if(this.isFontAwesome(e)){var t=document.createElement("i");t.className=e,this.iconEl.appendChild(t)}else{var n=document.createElement("img");n.src=e,n.alt="window icon",this.iconEl.appendChild(n)}this.manager.updateTaskbarItem(this,"iconChanged")}else this.manager.updateTaskbarItem(this,"iconChanged")}},{key:"getPosition",value:function(){return"maximized"===this.state?{x:this.lastState.x,y:this.lastState.y}:{x:this.el.offsetLeft,y:this.el.offsetTop}}},{key:"setPosition",value:function(e,t){if(this.manager.container){var n,i,r=this.manager.container.getBoundingClientRect(),o=this.el.offsetWidth,a=this.el.offsetHeight;switch(e){case"left":n=0;break;case"center":n=(r.width-o)/2;break;case"right":n=r.width-o;break;default:n=e}switch(t){case"top":i=0;break;case"center":i=(r.height-a)/2;break;case"bottom":i=r.height-a;break;default:i=t}this.el.style.left="".concat(Math.min(Math.max(150-o,n),r.width-150),"px"),this.el.style.top="".concat(Math.min(Math.max(0,i),r.height-50),"px"),this.updateDebugOverlay()}else console.warn("WinLet Warning: setPosition called before manager is initialized.")}},{key:"getSize",value:function(){return"maximized"===this.state?{width:this.lastState.width,height:this.lastState.height}:{width:this.el.offsetWidth,height:this.el.offsetHeight}}},{key:"setSize",value:function(e,t){this.el.style.width="number"==typeof e?"".concat(e,"px"):e,this.el.style.height="number"==typeof t?"".concat(t,"px"):t,this.updateDebugOverlay()}},{key:"setOpacity",value:function(e){var t=Math.max(0,Math.min(1,e));this.options.windowOptions.opacity=t,this.el.style.opacity=t.toString()}},{key:"getOpacity",value:function(){return this.options.windowOptions.opacity}},{key:"setOptions",value:function(e){"boolean"==typeof e.ifExists&&(this.options.ifExists=e.ifExists),"string"==typeof e.title&&this.setTitle(e.title),"string"!=typeof e.icon&&null!==e.icon||this.setIcon(e.icon);var t=null;"number"!=typeof e.x&&"center"!==e.x&&"left"!==e.x&&"right"!==e.x||(t=e.x);var n=null;"number"!=typeof e.y&&"center"!==e.y&&"top"!==e.y&&"bottom"!==e.y||(n=e.y),null===t&&null===n||(null===t&&(t=this.getPosition().x),null===n&&(n=this.getPosition().y),this.setPosition(t,n));var i=null;"number"!=typeof e.width&&"string"!=typeof e.width||(i=e.width);var r=null;"number"!=typeof e.height&&"string"!=typeof e.height||(r=e.height),null===i&&null===r||(null===i&&(i=this.getSize().width),null===r&&(r=this.getSize().height),this.setSize(i,r));var o=e.windowOptions||{};"number"==typeof o.opacity&&this.setOpacity(o.opacity),"boolean"==typeof o.alwaysOnTop&&(this.options.windowOptions.alwaysOnTop=o.alwaysOnTop,this.el.classList.toggle("".concat(f.LIBRARY_NAME,"-always-on-top"),o.alwaysOnTop),this.focus()),"boolean"==typeof o.useGhostWindow&&(this.options.windowOptions.useGhostWindow=o.useGhostWindow)}}])}(h.default)},{"../const/config":27,"../const/errors":28,"../const/types":29,"../libs/baseclass":33,"../libs/utils":34,"./window_manager":31,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":9,"@babel/runtime/helpers/inherits":10,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/helpers/toConsumableArray":21}],31:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("@babel/runtime/helpers/slicedToArray")),o=i(e("@babel/runtime/helpers/typeof")),a=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),l=i(e("@babel/runtime/helpers/possibleConstructorReturn")),c=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits")),u=i(e("@babel/runtime/helpers/defineProperty")),p=e("../const/config"),f=e("../const/errors"),h=e("../const/types"),b=i(e("../libs/baseclass")),v=i(e("../libs/utils")),x=i(e("../style/styles")),m=e("../style/themes/dark"),g=e("../style/themes/default"),y=i(e("./window"));function w(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(E=function(){return!!e})()}var A=n.default=function(e){function t(e){var n,i,r,o;return(0,a.default)(this,t),i=this,r=t,r=(0,c.default)(r),n=(0,l.default)(i,E()?Reflect.construct(r,o||[],(0,c.default)(i).constructor):r.apply(i,o)),(0,u.default)(n,"container",null),(0,u.default)(n,"workspaceEl",null),(0,u.default)(n,"windows",new Map),(0,u.default)(n,"zIndexCounter",1e3),(0,u.default)(n,"zIndexCounterOnTop",5e4),(0,u.default)(n,"activeWindow",null),(0,u.default)(n,"contextMenuEl",null),(0,u.default)(n,"_isInitialized",!1),(0,u.default)(n,"lastAutoPosition",null),(0,u.default)(n,"lastPopupPosition",null),(0,u.default)(n,"CASCADE_OFFSET",30),(0,u.default)(n,"draggingTabInfo",null),(0,u.default)(n,"taskbarEl",null),(0,u.default)(n,"themes",new Map),(0,u.default)(n,"activeTheme",null),(0,u.default)(n,"boundTabPressHandler",null),(0,u.default)(n,"virtualizationIntervalId",null),n.globalConfig=e,n.registerTheme(g.defaultTheme),n.registerTheme(m.darkTheme),n}return(0,d.default)(t,e),(0,s.default)(t,[{key:"isInitialized",get:function(){return this._isInitialized}},{key:"applyGlobalConfig",value:function(e){Object.assign(this.globalConfig,e),this.container&&(this.container.classList.toggle("".concat(h.LIBRARY_NAME,"-animations-disabled"),!this.globalConfig.enableAnimations),this.container.classList.toggle("".concat(h.LIBRARY_NAME,"-debug-mode-enabled"),!!this.globalConfig.enableDebugMode),this.globalConfig.enableTaskbar?(this.taskbarEl||this.createTaskbar(),this.updateTaskbarLayout()):this.taskbarEl&&(this.taskbarEl.remove(),this.taskbarEl=null,this.container.style.flexDirection=""))}},{key:"getGlobalConfig",value:function(){return this.globalConfig}},{key:"init",value:function(){var e=this;if(!this._isInitialized){var t=null;if("string"==typeof this.globalConfig.container){if(!(t=document.querySelector(this.globalConfig.container)))throw new f.WinLetError('WinLet: The specified container "'.concat(this.globalConfig.container,'" was not found.'))}else this.globalConfig.container instanceof HTMLElement&&(t=this.globalConfig.container);if(!t){if(!document.body)throw new f.WinLetError("Cannot initialize before document.body is ready. Please call WinLet.init() after DOMContentLoaded.");t=document.body}if(!document.getElementById("".concat(h.LIBRARY_NAME,"-styles"))){var n=document.createElement("style");n.id="".concat(h.LIBRARY_NAME,"-styles"),n.innerHTML=this.getStyleData(),document.head.appendChild(n)}var i=t.querySelector(".".concat(h.LIBRARY_NAME,"-container"));if(i||((i=document.createElement("div")).className="".concat(h.LIBRARY_NAME,"-container"),t.appendChild(i)),this.container=i,this.workspaceEl=document.createElement("div"),this.workspaceEl.className="".concat(h.LIBRARY_NAME,"-workspace"),this.container.appendChild(this.workspaceEl),this.applyGlobalConfig(this.globalConfig),t!==document.body)this.container.classList.add("".concat(h.LIBRARY_NAME,"-is-nested")),"static"===window.getComputedStyle(t).position&&(t.style.position="relative");this.globalConfig.enableTaskbar&&(this.taskbarEl||this.createTaskbar()),this.globalConfig.theme?this.setTheme(this.globalConfig.theme):this.setTheme("default"),this.updateVirtualization(),window.addEventListener("blur",function(){return requestAnimationFrame(function(){var t=document.activeElement;if("IFRAME"===(null==t?void 0:t.tagName)){var n=t.closest(".".concat(h.LIBRARY_NAME,"-window"));if(n){var i=e.windows.get(n.id);i&&e.activeWindow!==i&&i.focus()}}})}),document.addEventListener("pointerdown",function(){return requestAnimationFrame(function(){var t=document.activeElement;if("IFRAME"===(null==t?void 0:t.tagName)){var n=t.closest(".".concat(h.LIBRARY_NAME,"-window"));if(n){var i=e.windows.get(n.id);i&&e.activeWindow!==i&&i.focus()}}})},!0),document.addEventListener("pointerdown",function(t){if(t.target instanceof HTMLElement&&e.activeWindow&&!e.activeWindow.options.windowOptions.modal){var n=t.target.closest(".".concat(h.LIBRARY_NAME,"-window")),i=t.target.closest(".".concat(h.LIBRARY_NAME,"-context-menu")),r=t.target.closest(".".concat(h.LIBRARY_NAME,"-taskbar"));if(!n&&!i&&!r){var o=e.activeWindow;e.activeWindow=null,o.blur()}}}),document.addEventListener("click",function(){return e.hideContextMenu()}),window.addEventListener("message",function(t){if(t.data&&"winlet:createWindow"===t.data.type&&"object"===(0,o.default)(t.data.options)){var n,i=!1,r=null,a=w(e.windows.values());try{for(a.s();!(n=a.n()).done;){var s=n.value,l=s.el.querySelector("iframe");if(l&&l.contentWindow===t.source){i=!0,r=s;break}}}catch(e){a.e(e)}finally{a.f()}i?r?r.createWindow(t.data.options):e.createWindow(t.data.options):console.warn("WinLet: Untrusted source attempted to create a window.",t.origin)}}),this._isInitialized=!0,this.setupShortcutListeners(),this.workspaceEl.addEventListener("dragover",function(e){var t;null!==(t=e.dataTransfer)&&void 0!==t&&t.types.includes("application/winlet-tab")&&e.preventDefault()}),this.workspaceEl.addEventListener("drop",function(t){var n,i,r;if(!t.target.closest(".".concat(h.LIBRARY_NAME,"-window"))){t.preventDefault();var o=null===(n=t.dataTransfer)||void 0===n?void 0:n.getData("application/winlet-tab"),a=null===(i=t.dataTransfer)||void 0===i?void 0:i.getData("application/winlet-source-window-id"),s=null===(r=t.dataTransfer)||void 0===r?void 0:r.getData("text/plain");if(o&&a&&s){var l=e.windows.get(a);if(!l||!l.options.tabOptions.detachable)return;var c=JSON.parse(o),d={title:c.title,content:c.content},u=v.default.deepMerge(v.default.deepCopy(l.options),{tabs:[d],x:t.clientX,y:t.clientY,width:l.getSize().width,height:l.getSize().height});e.createWindow(u),l.closeTab(parseInt(s,10))}}})}}},{key:"setupShortcutListeners",value:function(){var e=this;document.addEventListener("keydown",function(t){var n,i;if(e.globalConfig.windowSwitchShortcut){var r=e.parseShortcut(e.globalConfig.windowSwitchShortcut);if(t.key.toLowerCase()===r.key.toLowerCase()&&t.ctrlKey===r.ctrl&&t.altKey===r.alt&&t.shiftKey===r.shift){t.preventDefault();var o=Array.from(e.windows.values()),a=e.activeWindow?o.findIndex(function(t){return t===e.activeWindow}):-1,s=o[(a+1)%o.length];return"minimized"===s.state&&s.restore(),void s.focus()}}var l=e.activeWindow;if(l&&l.options.enableShortcuts){if(t.ctrlKey&&t.shiftKey&&(null!==(n=null===(i=l.options.tabs)||void 0===i?void 0:i.length)&&void 0!==n?n:0)>0&&t.code.startsWith("Digit")){t.preventDefault(),t.stopPropagation();var c=parseInt(t.code.replace("Digit",""),10),d=l.getTabs().length,u=-1;return c>=1&&c<=8?u=c-1:9===c&&(u=d-1),void(u>=0&&u<d&&l.activateTab(u))}var p=function(n){var i,r=w(n);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o.shortcut){var a,s=e.parseShortcut(o.shortcut);if(t.key.toUpperCase()===s.key.toUpperCase()&&t.ctrlKey===s.ctrl&&t.altKey===s.alt&&t.shiftKey===s.shift)return t.preventDefault(),t.stopPropagation(),null===(a=o.action)||void 0===a||a.call(o,l),!0}if(o.items&&p(o.items))return!0}}catch(e){r.e(e)}finally{r.f()}return!1};p(l.options.menu)}},{passive:!1})}},{key:"ensureInitialized",value:function(){this._isInitialized||this.init()}},{key:"getStyleData",value:function(){return this.replaceStringVariable(x.default)}},{key:"replaceStringVariable",value:function(e){return e.replace(/\$\[(\w+)\]/g,function(e,t){return"prefix"===t?h.LIBRARY_NAME:t})}},{key:"createWindow",value:function(e){var n;this.ensureInitialized();var i=null!==(n=e.ifExists)&&void 0!==n?n:"focus";if(e.id&&"create"!==i){var r=this.getWindow(e.id);if(r){if("prevent"===i)return r;if("focus"===i)return"minimized"===r.state&&r.restore(),r.focus(),r}}var o=v.default.deepMerge(v.default.deepCopy(p.defaultConfig),e);if("auto"===o.x||"auto"===o.y){var a,s,l=o.width,c=o.height,d=this.workspaceEl.getBoundingClientRect();null===this.lastAutoPosition?(a=0,s=0):(a=this.lastAutoPosition.x+this.CASCADE_OFFSET,s=this.lastAutoPosition.y+this.CASCADE_OFFSET),a+l>d.width&&(a=0),s+c>d.height&&(s=0),o.x=a,o.y=s,this.lastAutoPosition={x:a,y:s}}var u=new y.default(o,this);return this.windows.set(u.id,u),t.allWindows.set(u.id,u),this.workspaceEl.appendChild(u.el),this.taskbarEl&&this.createTaskbarItem(u),u.setPosition(o.x,o.y),o.windowOptions.focus?(this.focusWindow(u),u.focus()):(u.el.style.zIndex="".concat((u.options.windowOptions.alwaysOnTop?this.zIndexCounterOnTop:this.zIndexCounter)-1),this.updateVirtualization(),u.updateDebugOverlay()),u}},{key:"popup",value:function(e){var t,n,i,r,o=this;this.ensureInitialized();var a={Ok:[{text:"OK",value:1}],OkCancel:[{text:"OK",value:1},{text:"Cancel",value:2}],Yes:[{text:"Yes",value:6}],YesNo:[{text:"Yes",value:6},{text:"No",value:7}],YesNoCancel:[{text:"Yes",value:6},{text:"No",value:7},{text:"Cancel",value:2}],Retry:[{text:"Retry",value:4}],RetryCancel:[{text:"Retry",value:4},{text:"Cancel",value:2}],AbortRetryIgnore:[{text:"Abort",value:3},{text:"Retry",value:4},{text:"Ignore",value:5}]};r=Array.isArray(e.buttons)?e.buttons:a[e.buttons||"Ok"]||a.Ok;var s=null,l=function(t){var n;s&&clearTimeout(s),s=null,null===(n=e.onClose)||void 0===n||n.call(e,t)},c='<div class="'.concat(h.LIBRARY_NAME,'-popup-message">').concat(v.default.sanitizeHTML(e.message),"</div>"),d=r.map(function(e,t){return'<input class="'.concat(h.LIBRARY_NAME,'-popup-button" data-index="').concat(t,'" type="button" value="').concat(v.default.sanitizeHTML(e.text),'" role="button"/>')}).join(""),u="".concat(c,'<div class="').concat(h.LIBRARY_NAME,'-popup-buttons" role="spinbutton">').concat(d,"</div>"),p={id:v.default.generateId("".concat(h.LIBRARY_NAME,"-popup")),title:e.title||"",icon:e.icon,virtualizable:!1,windowOptions:{resizableX:!1,resizableY:!1,movable:!0,closable:!0,minimizable:!1,maximizable:!1,maximizableOnDblClick:!1,modal:null===(t=e.modal)||void 0===t||t,alwaysOnTop:null!==(n=e.alwaysOnTop)&&void 0!==n&&n,focus:null===(i=e.focus)||void 0===i||i},enableShortcuts:!1,content:{html:u},_isPopup:!0};if(e.onFocus&&(p.onFocus=e.onFocus),e.onBlur&&(p.onBlur=e.onBlur),e.autoWidth){var f,b,x=document.createElement("span");x.style.visibility="hidden",x.style.position="absolute",x.style.whiteSpace="pre",x.className="".concat(h.LIBRARY_NAME,"-popup-message"),x.innerHTML=v.default.sanitizeHTML(e.message),null===(f=this.workspaceEl)||void 0===f||f.appendChild(x),p.width=x.offsetWidth+80,null===(b=this.workspaceEl)||void 0===b||b.removeChild(x)}else p.width=300;p.height=150,p.x="center",p.y="center";var m=this.createWindow(p),g=m.getPosition();return this.lastPopupPosition&&this.lastPopupPosition.x===g.x&&this.lastPopupPosition.y===g.y&&(m.setPosition(this.lastPopupPosition.x+this.CASCADE_OFFSET,this.lastPopupPosition.y+this.CASCADE_OFFSET),g=m.getPosition()),this.lastPopupPosition=g,m.popupCloseCallback=l,m.el.querySelectorAll(".".concat(h.LIBRARY_NAME,"-popup-button")).forEach(function(e){e.addEventListener("click",function(){var t=parseInt(e.dataset.index,10),n=r[t].value;l(n),m.close()})}),e.timeout&&e.timeout>0&&(s=window.setTimeout(function(){o.windows.has(m.id)&&(l(h.TIMEOUT_RESULT),m.close())},e.timeout)),m}},{key:"destroyWindow",value:function(e){this.ensureInitialized();var n=this.windows.get(e);if(n){if(n.options._taskbarItem&&n.options._taskbarItem.remove(),n.options.windowOptions.modal&&this.deactivateFocusTrap(),n.el.remove(),this.windows.delete(e),t.allWindows.delete(e),this.activeWindow===n){this.activeWindow=null;var i=Array.from(this.windows.values()).pop();i&&this.focusWindow(i)}this.updateVirtualization()}}},{key:"focusWindow",value:function(e){var t,n;this.ensureInitialized(),(this.activeWindow!==e||e.options.windowOptions.modal)&&(null===(t=this.activeWindow)||void 0===t||t.blur(),e.options.windowOptions.modal&&this.globalConfig.enableFocusTrapping?this.activateFocusTrap(e):this.deactivateFocusTrap(),this.activeWindow=e,e.el.style.zIndex="".concat(e.options.windowOptions.alwaysOnTop?++this.zIndexCounterOnTop:++this.zIndexCounter),this.windows.forEach(function(e){var t;return null===(t=e.options._taskbarItem)||void 0===t?void 0:t.classList.remove("".concat(h.LIBRARY_NAME,"-active"))}),null===(n=e.options._taskbarItem)||void 0===n||n.classList.add("".concat(h.LIBRARY_NAME,"-active")),this.updateVirtualization())}},{key:"getWindow",value:function(e){return this.ensureInitialized(),this.windows.get(e)}},{key:"getWindowFromElement",value:function(e){this.ensureInitialized();var n=e.closest(".".concat(h.LIBRARY_NAME,"-window"));if(null!=n&&n.id)return t.allWindows.get(n.id)}},{key:"getActiveWindow",value:function(){return this.ensureInitialized(),this.activeWindow}},{key:"onTabDragStart",value:function(e){var t;null===(t=this.workspaceEl)||void 0===t||t.classList.add("".concat(h.LIBRARY_NAME,"-is-tab-dragging")),this.draggingTabInfo={sourceWindowId:e}}},{key:"onTabDragEnd",value:function(){var e;null===(e=this.workspaceEl)||void 0===e||e.classList.remove("".concat(h.LIBRARY_NAME,"-is-tab-dragging")),this.draggingTabInfo=null}},{key:"showContextMenu",value:function(e,t,n,i){var r=this;this.ensureInitialized(),this.hideContextMenu(),this.contextMenuEl=document.createElement("ul"),this.contextMenuEl.className="".concat(h.LIBRARY_NAME,"-context-menu"),n.forEach(function(e){var t,n=document.createElement("li");e.separator?n.className="".concat(h.LIBRARY_NAME,"-separator"):(n.textContent=null!==(t=e.name)&&void 0!==t?t:"",n.addEventListener("click",function(t){var n;t.stopPropagation(),null===(n=e.action)||void 0===n||n.call(e,i),r.hideContextMenu()}));r.contextMenuEl.appendChild(n)}),this.workspaceEl.appendChild(this.contextMenuEl);var o=this.contextMenuEl,a=o.offsetWidth,s=o.offsetHeight,l=window,c=l.innerWidth,d=l.innerHeight;this.contextMenuEl.style.left="".concat(e+a>c?c-a:e,"px"),this.contextMenuEl.style.top="".concat(t+s>d?d-s:t,"px")}},{key:"hideContextMenu",value:function(){var e;null===(e=this.contextMenuEl)||void 0===e||e.remove(),this.contextMenuEl=null}},{key:"registerTheme",value:function(e){this.themes.set(e.name,e)}},{key:"getRegisteredThemes",value:function(){return Array.from(this.themes.keys())}},{key:"setTheme",value:function(e){var t="string"==typeof e?this.themes.get(e.toLowerCase()):e;if(t)if(this.container){if(this.activeTheme)for(var n=0,i=Object.entries(this.activeTheme.variables);n<i.length;n++){var o=(0,r.default)(i[n],2),a=o[0];o[1];a in t.variables||this.container.style.removeProperty(this.replaceStringVariable(a))}this.activeTheme=t;for(var s=0,l=Object.entries(t.variables);s<l.length;s++){var c=(0,r.default)(l[s],2),d=c[0],u=c[1];this.container.style.setProperty(this.replaceStringVariable(d),this.replaceStringVariable(u))}}else console.warn("WinLet: Container not found.");else console.warn('WinLet: Theme "'.concat(e,'" not found.'))}},{key:"getTheme",value:function(){return this.activeTheme}},{key:"createTaskbar",value:function(){this.container&&(this.taskbarEl=document.createElement("div"),this.taskbarEl.className="".concat(h.LIBRARY_NAME,"-taskbar ").concat(h.LIBRARY_NAME,"-us-none"),this.updateTaskbarLayout(),this.container.appendChild(this.taskbarEl))}},{key:"updateTaskbarLayout",value:function(){if(this.taskbarEl&&this.container){var e=(this.globalConfig.taskbar||{}).position||"bottom";switch(e){case"top":case"bottom":case"left":case"right":break;default:throw new f.WinLetError("Invalid taskbar position: ".concat(e))}this.taskbarEl.className="".concat(h.LIBRARY_NAME,"-taskbar ").concat(h.LIBRARY_NAME,"-us-none"),this.taskbarEl.classList.add("".concat(h.LIBRARY_NAME,"-taskbar-").concat(e)),this.taskbarEl.isConnected||this.container.appendChild(this.taskbarEl),this.container.style.flexDirection="",this.taskbarEl.style.order="",this.workspaceEl&&(this.workspaceEl.style.order=""),this.container.style.paddingTop="0",this.container.style.paddingBottom="0",this.container.style.paddingLeft="0",this.container.style.paddingRight="0";var t=window.getComputedStyle(this.taskbarEl),n=t.height,i=t.width;switch(e){case"top":this.container.style.paddingTop=n,this.container.style.flexDirection="column-reverse",this.taskbarEl.style.order="1",this.workspaceEl&&(this.workspaceEl.style.order="2");break;case"bottom":this.container.style.paddingBottom=n,this.container.style.flexDirection="column",this.taskbarEl.style.order="2",this.workspaceEl&&(this.workspaceEl.style.order="1");break;case"left":this.container.style.paddingLeft=i,this.container.style.flexDirection="row-reverse",this.taskbarEl.style.order="1",this.workspaceEl&&(this.workspaceEl.style.order="2");break;case"right":this.container.style.paddingRight=i,this.container.style.flexDirection="row",this.taskbarEl.style.order="2",this.workspaceEl&&(this.workspaceEl.style.order="1")}}}},{key:"createTaskbarItem",value:function(e){var t=this;if(this.taskbarEl){var n=document.createElement("div");n.className="".concat(h.LIBRARY_NAME,"-taskbar-item"),n.textContent=e.getTitle(),n.title=e.getTitle(),n.dataset.windowId=e.id,this.updateTaskbarItemContent(n,e),n.addEventListener("click",function(){"minimized"===e.state?e.restore():t.activeWindow===e?e.minimize():e.focus()}),e.options._taskbarItem=n,this.taskbarEl.appendChild(n)}}},{key:"updateTaskbarItemContent",value:function(e,t){var n=t.options,i=n.icon,r=n.taskbarOptions;e.innerHTML="",e.title=t.getTitle();var o=(null==r?void 0:r.showIconOnly)&&i;if(e.classList.toggle("".concat(h.LIBRARY_NAME,"-icon-only"),!!o),o){var a=document.createElement("div");if(a.className="".concat(h.LIBRARY_NAME,"-taskbar-item-icon"),t.isFontAwesome(i)){var s=document.createElement("i");s.className=i,a.appendChild(s)}else{var l=document.createElement("img");l.src=i,l.alt=t.getTitle(),a.appendChild(l)}e.appendChild(a)}else e.textContent=t.getTitle()}},{key:"updateTaskbarItem",value:function(e,t){var n=e.options._taskbarItem;if(n)switch(t){case"minimized":n.classList.add("".concat(h.LIBRARY_NAME,"-minimized"));break;case"restored":n.classList.remove("".concat(h.LIBRARY_NAME,"-minimized"));break;case"titleChanged":case"iconChanged":n.textContent=e.getTitle(),n.title=e.getTitle()}}},{key:"activateFocusTrap",value:function(e){this.deactivateFocusTrap(),this.boundTabPressHandler=function(t){if("Tab"===t.key){t.preventDefault();var n=Array.from(e.el.querySelectorAll('a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])')).filter(function(e){return!e.hasAttribute("disabled")&&!e.closest(".minimized")});if(0===n.length)return;var i=n.indexOf(document.activeElement),r=t.shiftKey?i-1:i+1;r>=n.length&&(r=0),r<0&&(r=n.length-1),n[r].focus()}},document.addEventListener("keydown",this.boundTabPressHandler)}},{key:"deactivateFocusTrap",value:function(){this.boundTabPressHandler&&(document.removeEventListener("keydown",this.boundTabPressHandler),this.boundTabPressHandler=null)}},{key:"parseShortcut",value:function(e){var t=e.split("+"),n=t.pop()||"";return{ctrl:t.includes("Ctrl"),alt:t.includes("Alt"),shift:t.includes("Shift"),key:n}}},{key:"updateVirtualization",value:function(){var e;if(this.globalConfig.enableVirtualization&&this.workspaceEl){var t=null!==(e=this.globalConfig.virtualizationThreshold)&&void 0!==e?e:5;if(this.windows.size<=t){var n,i=w(this.windows.values());try{for(i.s();!(n=i.n()).done;){var r=n.value;"none"!==r.virtualizationLevel&&r.unvirtualize()}}catch(e){i.e(e)}finally{i.f()}}else for(var o=Array.from(this.windows.values()).sort(function(e,t){return parseInt(e.el.style.zIndex||"0",10)-parseInt(t.el.style.zIndex||"0",10)}),a=this.workspaceEl.getBoundingClientRect(),s=0;s<o.length;s++){var l=o[s];if(l.options.virtualizable&&"normal"===l.state&&l!==this.activeWindow){var c=l.el.getBoundingClientRect();if(c.width<=1||c.height<=1)l.virtualize("auto");else{for(var d=!1,u=0,p=[{x:c.left+1,y:c.top+1},{x:c.right-1,y:c.top+1},{x:c.right-1,y:c.bottom-1},{x:c.left+1,y:c.bottom-1},{x:c.left+.5*c.width,y:c.top+.5*c.height}];u<p.length;u++){var f=p[u];if(f.x>=a.left&&f.x<a.right&&f.y>=a.top&&f.y<a.bottom){for(var h=!1,b=s+1;b<o.length;b++){var v,x=o[b];if(!("normal"!==x.state||(null!==(v=x.getOpacity())&&void 0!==v?v:1)<.9)){var m=x.el.getBoundingClientRect();if(f.x>=m.left&&f.x<m.right&&f.y>=m.top&&f.y<m.bottom){h=!0;break}}}if(!h){d=!0;break}}}d?l.unvirtualize():l.virtualize("auto")}}else l.unvirtualize()}}}}])}(b.default);(0,u.default)(A,"allWindows",new Map)},{"../const/config":27,"../const/errors":28,"../const/types":29,"../libs/baseclass":33,"../libs/utils":34,"../style/styles":35,"../style/themes/dark":36,"../style/themes/default":37,"./window":30,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":9,"@babel/runtime/helpers/inherits":10,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/helpers/slicedToArray":20,"@babel/runtime/helpers/typeof":24}],32:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=e("./const/config"),a=e("./const/types"),s=i(e("./function/window_manager")),l=i(e("./libs/utils")),c=e("./version"),d={windowSwitchShortcut:"Ctrl+`",libraryPath:(null===(r=document)||void 0===r||null===(r=r.currentScript)||void 0===r?void 0:r.src)||"",enableAnimations:!0,enableFocusTrapping:!0,enableVirtualization:!0,virtualizationThreshold:5,virtualizationDelay:1e4,taskbar:{position:"bottom"},enableDebugMode:!1},u=new s.default(d),p={init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p.setGlobalConfig(e),u.init()},createWindow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u.createWindow(e)},createPopup:function(e){return u.popup(e)},getWindow:function(e){return u.getWindow(e)},getWindowFromElement:function(e){return u.getWindowFromElement(e)},getActiveWindow:function(){return u.getActiveWindow()},setDefaultConfig:function(e){l.default.deepMerge(o.defaultConfig,e)},setGlobalConfig:function(e){u.isInitialized&&e.container&&(console.warn("WinLet: The container cannot be changed after initialization."),delete e.container),Object.assign(d,e),u.applyGlobalConfig(d)},registerTheme:function(e){u.registerTheme(e)},getRegisteredThemes:function(){return u.getRegisteredThemes()},setTheme:function(e){u.setTheme(e)},getTheme:function(){return u.getTheme()},get version(){return c.LIB_VERSION},POPUP_TIMEOUT_RESULT:a.TIMEOUT_RESULT,POPUP_CLOSE_BUTTON_RESULT:a.CLOSE_BUTTON_RESULT};"undefined"!=typeof window&&(window.WinLet=p);n.default=p},{"./const/config":27,"./const/types":29,"./function/window_manager":31,"./libs/utils":34,"./version":38,"@babel/runtime/helpers/interopRequireDefault":11}],33:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("@babel/runtime/helpers/createClass")),o=i(e("@babel/runtime/helpers/classCallCheck"));n.default=(0,r.default)(function e(){(0,o.default)(this,e)})},{"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/interopRequireDefault":11}],34:[function(e,t,n){"use strict";var i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(e("@babel/runtime/helpers/defineProperty")),o=i(e("@babel/runtime/helpers/typeof")),a=i(e("@babel/runtime/helpers/classCallCheck")),s=i(e("@babel/runtime/helpers/createClass")),l=i(e("@babel/runtime/helpers/possibleConstructorReturn")),c=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/inherits")),u=i(e("./baseclass"));function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(b=function(){return!!e})()}n.default=function(e){function t(){return(0,a.default)(this,t),e=this,n=t,i=arguments,n=(0,c.default)(n),(0,l.default)(e,b()?Reflect.construct(n,i||[],(0,c.default)(e).constructor):n.apply(e,i));var e,n,i}return(0,d.default)(t,e),(0,s.default)(t,null,[{key:"generateId",value:function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"win","-").concat(Math.random().toString(36).substring(2,9))}},{key:"deepCopy",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new WeakMap;if(null===e||"object"!==(0,o.default)(e))return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Map){var i=new Map;return e.forEach(function(e,r){i.set(t.deepCopy(r,n),t.deepCopy(e,n))}),i}if(e instanceof Set){var r=new Set;return e.forEach(function(e){r.add(t.deepCopy(e,n))}),r}if(Array.isArray(e)){if(n.has(e))return n.get(e);var a=[];n.set(e,a);var s,l=f(e);try{for(l.s();!(s=l.n()).done;){var c=s.value;a.push(this.deepCopy(c,n))}}catch(e){l.e(e)}finally{l.f()}return a}if(n.has(e))return n.get(e);var d={};for(var u in n.set(e,d),e)Object.prototype.hasOwnProperty.call(e,u)&&(d[u]=this.deepCopy(e[u],n));return d}},{key:"deepMerge",value:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){(0,r.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=t[i],a=e[i];Array.isArray(o)?n[i]=o:n[i]=o instanceof Object&&"function"!=typeof o&&a instanceof Object?this.deepMerge(a,o):o}return n}},{key:"isNonEmptyObject",value:function(e){if(!e)return!1;for(var t in e)return!0;return!1}},{key:"sanitizeHTML",value:function(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}}])}(u.default)},{"./baseclass":33,"@babel/runtime/helpers/classCallCheck":5,"@babel/runtime/helpers/createClass":7,"@babel/runtime/helpers/defineProperty":8,"@babel/runtime/helpers/getPrototypeOf":9,"@babel/runtime/helpers/inherits":10,"@babel/runtime/helpers/interopRequireDefault":11,"@babel/runtime/helpers/possibleConstructorReturn":18,"@babel/runtime/helpers/typeof":24}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default='\n/* ========================================================================\n    1. 基本設定・変数\n   ======================================================================== */\n:root {\n    /* 基本色・シャドウ */\n    --$[prefix]-text-color: #000;\n    --$[prefix]-bg: #f0f0f0;\n    --$[prefix]-border: #a0a0a0;\n    --$[prefix]-shadow-color-light: rgba(0,0,0,0.15);\n    --$[prefix]-shadow-color-strong: rgba(0,0,0,0.3);\n    --$[prefix]-shadow-color-active: rgba(0,0,0,0.45);\n\n    /* タイトルバー */\n    --$[prefix]-title-bar-height: 32px;\n    --$[prefix]-title-bar-bg: #e0e0e0;\n    --$[prefix]-title-bar-active-bg: #0078d7;\n    --$[prefix]-title-text-color: #000;\n    --$[prefix]-title-text-active-color: #fff;\n\n    /* コントロールボタン */\n    --$[prefix]-control-bg: #d0d0d0;\n    --$[prefix]-control-hover-bg: #e5e5e5;\n    --$[prefix]-control-close-hover-bg: #e81123;\n    --$[prefix]-control-close-hover-color: #fff;\n\n    /* メニュー */\n    --$[prefix]-menu-bg: #fff;\n    --$[prefix]-menu-border: #ccc;\n    --$[prefix]-menu-item-color: #000;\n    --$[prefix]-menu-item-hover-bg: #0078d7;\n    --$[prefix]-menu-item-hover-color: #fff;\n    --$[prefix]-shortcut-text-color: #666;\n\n    /* タブ */\n    --$[prefix]-tab-bg: #dcdcdc;\n    --$[prefix]-tab-active-bg: #f0f0f0;\n    --$[prefix]-tab-border: #b0b0b0;\n    --$[prefix]-tab-bar-bg: #e1e1e1;\n    --$[prefix]-tab-close-btn-hover-bg: #ccc;\n    --$[prefix]-tab-active-close-btn-hover-bg: #ddd;\n\n    /* ポップアップボタン */\n    --$[prefix]-popup-button-hover-bg: #e9e9e9;\n    --$[prefix]-popup-button-hover-border-color: #bbb;\n\n    /* リサイズハンドル */\n    --$[prefix]-resize-handle-size: 8px;\n    --$[prefix]-resize-handle-offset: -4px;\n\n    /* タスクバー */\n    --$[prefix]-taskbar-bg: rgba(240, 240, 240, 0.9);\n    --$[prefix]-taskbar-border: #a0a0a0;\n    --$[prefix]-taskbar-item-bg: #d0d0d0;\n    --$[prefix]-taskbar-item-active-bg: #0078d7;\n    --$[prefix]-taskbar-item-active-color: #fff;\n    --$[prefix]-taskbar-height: 40px;\n    --$[prefix]-taskbar-width: 40px;\n\n    /* ローディングインジケーター */\n    --$[prefix]-loader-bg: rgba(255, 255, 255, 0.7);\n    --$[prefix]-loader-color: var(--$[prefix]-title-bar-active-bg);\n\n    /* その他 */\n    --$[prefix]-scrollbar-thumb-bg: rgba(100, 100, 100, 0.5);\n}\n\n/* ========================================================================\n    2. ユーティリティクラス\n   ========================================================================= */\n/**\n * テキスト選択を無効化\n */\n.$[prefix]-us-none {\n    user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n}\n/**\n * テキスト選択を有効化\n */\n.$[prefix]-us-auto {\n    user-select: auto;\n    -webkit-user-select: auto;\n    -ms-user-select: auto;\n}\n\n/* ========================================================================\n    3. コンテナ\n   ========================================================================= */\n/**\n * 全てのウィンドウを内包する最上位コンテナ\n */\n.$[prefix]-container {\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n    pointer-events: none;\n    overflow: hidden;\n    z-index: 999;\n    display: flex;\n    pointer-events: none;\n}\n.$[prefix]-container > * {\n    pointer-events: all; /* 子要素(workspace, taskbar)のイベントは有効化 */\n}\n/**\n * 特定の要素内にネストされた場合のコンテナ\n */\n.$[prefix]-container.$[prefix]-is-nested {\n    position: absolute;\n}\n\n.$[prefix]-workspace {\n    position: relative;\n    flex-grow: 1; /* 残りのスペースをすべて占有 */\n    overflow: hidden; /* ウィンドウがはみ出さないように */\n    min-width: 0; /* flexアイテムの縮小問題を回避 */\n    min-height: 0; /* flexアイテムの縮小問題を回避 */\n    pointer-events: none;\n}\n/**\n * タブのドラッグ中にポインターイベントを有効化し、ドロップを受け付ける\n */\n.$[prefix]-workspace.$[prefix]-is-tab-dragging {\n    pointer-events: auto;\n}\n\n/* ========================================================================\n    4. 仮想化技術\n   ======================================================================== */\n/**\n * 仮想化(アンロード)されたウィンドウ\n */\n.$[prefix]-window.$[prefix]-is-virtualized > .$[prefix]-main-content {\n    display: none;\n}\n.$[prefix]-window.$[prefix]-is-virtualized::after {\n    content: "Unloaded";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    color: var(--$[prefix]-border);\n    font-size: 1.5em;\n    font-weight: bold;\n    pointer-events: none;\n}\n\n/**\n * 中断されたウィンドウ\n */\n.$[prefix]-window.$[prefix]-is-suspended > .$[prefix]-main-content {\n    display: none;\n}\n.$[prefix]-window.$[prefix]-is-suspended::after {\n    content: "Suspended";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    color: var(--$[prefix]-border);\n    font-size: 1.5em;\n    font-weight: bold;\n    pointer-events: none;\n    z-index: 15;\n}\n\n/**\n * フリーズされたウィンドウ\n */\n.$[prefix]-window.$[prefix]-is-frozen > .$[prefix]-main-content {\n    pointer-events: none; /* コンテンツの操作を無効化 */\n}\n.$[prefix]-window.$[prefix]-is-frozen > .$[prefix]-main-content iframe {\n    visibility: hidden;\n}\n.$[prefix]-window.$[prefix]-is-frozen::after {\n    content: "Frozen";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    color: var(--$[prefix]-border);\n    background: rgba(128, 128, 128, 0.1);\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    font-size: 1.5em;\n    font-weight: bold;\n    pointer-events: none;\n    z-index: 15; /* ローダーより手前 */\n}\n/* ========================================================================\n    5. ウィンドウ\n   ======================================================================== */\n/* --- ウィンドウ基本スタイル --- */\n.$[prefix]-window {\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    min-width: 200px;\n    min-height: 150px;\n    border: 1px solid var(--$[prefix]-border);\n    background-color: var(--$[prefix]-bg);\n    box-shadow: 0 5px 15px var(--$[prefix]-shadow-color-strong);\n    box-sizing: border-box;\n    border-radius: 5px;\n    overflow: hidden;\n    pointer-events: all;\n    transition: opacity 0.2s, transform 0.2s, top 0.25s ease-in-out, left 0.25s ease-in-out, width 0.25s ease-in-out, height 0.25s ease-in-out;\n    touch-action: none;\n}\n\n/* --- ウィンドウ状態別スタイル --- */\n/**\n * 最小化されたウィンドウのアニメーション\n */\n.$[prefix]-window.$[prefix]-is-minimizing,\n.$[prefix]-window.$[prefix]-minimized {\n    transform: scale(0);\n    opacity: 0;\n    transition: opacity 0.25s, transform 0.25s;\n    pointer-events: none;\n}\n.$[prefix]-window.$[prefix]-minimized {\n    display: none;\n}\n/**\n * 最大化されたウィンドウのアニメーション\n */\n.$[prefix]-window.$[prefix]-maximized {\n    transition: top 0.25s ease-in-out, left 0.25s ease-in-out, width 0.25s ease-in-out, height 0.25s ease-in-out;\n}\n/**\n * 最大化状態ではリサイズハンドルを非表示\n */\n.$[prefix]-window.$[prefix]-maximized > .$[prefix]-resize-handle {\n    display: none;\n}\n/**\n * 復元中のアニメーション\n */\n.$[prefix]-window.$[prefix]-is-restoring {\n    transition: top 0.25s ease-in-out, left 0.25s ease-in-out, width 0.25s ease-in-out, height 0.25s ease-in-out;\n}\n\n/**\n * ドラッグ中・リサイズ中のトランジションを短縮し、操作性を向上\n */\n.$[prefix]-window.$[prefix]-is-dragging,\n.$[prefix]-window.$[prefix]-is-resizing {\n    transition: opacity 0.1s, transform 0.1s;\n}\n\n/**\n * アクティブ（フォーカスされている）ウィンドウ\n */\n.$[prefix]-window.$[prefix]-active {\n    box-shadow: 0 8px 25px var(--$[prefix]-shadow-color-active); /* アクティブ時のシャドウ */\n}\n/**\n * アクティブ（フォーカスされている）ウィンドウのタイトルバー\n */\n.$[prefix]-window.$[prefix]-active .$[prefix]-title-bar {\n    background-color: var(--$[prefix]-title-bar-active-bg);\n    color: var(--$[prefix]-title-text-active-color);\n}\n.$[prefix]-window.$[prefix]-active .$[prefix]-title-bar .$[prefix]-title {\n    color: var(--$[prefix]-title-text-active-color);\n}\n\n/* --- ウィンドウ特殊スタイル --- */\n/**\n * 「常に手前に表示」が有効なウィンドウ\n */\n.$[prefix]-window.$[prefix]-always-on-top .$[prefix]-title-bar {\n    background-image: repeating-linear-gradient(\n        -45deg,\n        transparent,\n        transparent 4px,\n        rgba(255, 255, 255, 0.05) 4px,\n        rgba(255, 255, 255, 0.05) 8px\n    );\n}\n\n/**\n * ウィンドウシェイクアニメーション\n */\n@keyframes $[prefix]-shake {\n    10%, 90% { transform: translate3d(-1px, 0, 0); }\n    20%, 80% { transform: translate3d(2px, 0, 0); }\n    30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }\n    40%, 60% { transform: translate3d(4px, 0, 0); }\n}\n.$[prefix]-window.$[prefix]-is-shaking {\n    animation: $[prefix]-shake 0.82s cubic-bezier(.36,.07,.19,.97) both;\n}\n\n/* ========================================================================\n    6. ゴーストウィンドウ\n   ======================================================================== */\n/**\n * ドラッグ・リサイズ時に表示される輪郭\n */\n.$[prefix]-ghost-window {\n    position: absolute;\n    box-sizing: border-box;\n    border: 2px dashed var(--$[prefix]-title-bar-active-bg);\n    background-color: rgba(0, 120, 215, 0.1);\n    z-index: 99999;\n    pointer-events: none;\n}\n\n/* ========================================================================\n    7. タイトルバー\n   ======================================================================== */\n/* --- タイトルバー基本スタイル --- */\n.$[prefix]-title-bar {\n    display: flex;\n    align-items: center;\n    height: var(--$[prefix]-title-bar-height);\n    background-color: var(--$[prefix]-title-bar-bg);\n    color: var(--$[prefix]-title-text-color);\n    cursor: move;\n    flex-shrink: 0;\n    touch-action: none;\n}\n/**\n * コントロールが左側にある場合のタイトルバー\n */\n.$[prefix]-title-bar.$[prefix]-controls-left {\n    flex-direction: row-reverse;\n}\n\n/* --- アイコン・タイトル --- */\n.$[prefix]-icon {\n    min-width: calc(var(--$[prefix]-title-bar-height) * 0.75);\n    height: calc(var(--$[prefix]-title-bar-height) * 0.75);\n    margin: 0 4px;\n    pointer-events: none;\n    flex-shrink: 0;\n}\n\n.$[prefix]-icon:empty {\n    display: none;\n}\n\n.$[prefix]-icon i {\n    font-size: calc(var(--$[prefix]-title-bar-height) * 0.5);\n    line-height: calc(var(--$[prefix]-title-bar-height) * 0.75);\n    text-align: center;\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n.$[prefix]-icon img {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n.$[prefix]-title {\n    flex-grow: 1;\n    padding: 0 8px;\n    font-family: sans-serif;\n    font-size: calc(var(--$[prefix]-title-bar-height) * 0.44);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    pointer-events: none;\n}\n\n.$[prefix]-title-bar.$[prefix]-controls-left .$[prefix]-title {\n    text-align: right;\n}\n\n/* --- コントロールボタン --- */\n.$[prefix]-controls {\n    display: flex;\n    height: 100%;\n    margin-left: auto;\n    flex-shrink: 0;\n}\n\n.$[prefix]-title-bar.$[prefix]-controls-left .$[prefix]-controls {\n    margin-left: 0;\n    margin-right: auto;\n    flex-direction: row-reverse;\n}\n\n.$[prefix]-control-btn {\n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n    width: calc(var(--$[prefix]-title-bar-height) * 1.3);\n    height: 100%;\n    border: none;\n    border-radius: 0;\n    box-sizing: border-box;\n    background-color: transparent;\n    font-size: calc(var(--$[prefix]-title-bar-height) * 0.5);\n    cursor: pointer;\n    text-align: center;\n    vertical-align: middle;\n    font-family: sans-serif;\n    transition: background-color 0.2s;\n    touch-action: auto;\n    padding: 0;\n    margin: 0;\n    color: inherit;\n}\n\n.$[prefix]-custom-control-btn > * {\n    pointer-events: none;\n}\n\n.$[prefix]-control-btn:hover {\n    background-color: var(--$[prefix]-control-hover-bg);\n}\n\n.$[prefix]-control-btn.$[prefix]-close-btn:hover {\n    background-color: var(--$[prefix]-control-close-hover-bg);\n    color: var(--$[prefix]-control-close-hover-color);\n}\n\n/* ========================================================================\n    8. メインコンテンツエリア\n   ======================================================================== */\n.$[prefix]-main-content {\n    all: initial;\n    position: relative;\n    display:flex;\n    color: var(--$[prefix]-text-color);\n    flex-direction:column;\n    flex-grow:1;\n    overflow:hidden;\n}\n\n.$[prefix]-content {\n    flex-grow: 1;\n    position: relative;\n    overflow: auto;\n    touch-action: auto;\n}\n\n.$[prefix]-content iframe {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    border: none;\n}\n\n/* --- ローディングインジケーター --- */\n.$[prefix]-loader-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: var(--$[prefix]-loader-bg);\n    display: none;\n    justify-content: center;\n    align-items: center;\n    z-index: 20;\n}\n@keyframes $[prefix]-spinner-rotation {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n}\n.$[prefix]-loader-spinner {\n    width: 48px;\n    height: 48px;\n    border-radius: 50%;\n    border: 5px solid #fff;\n    border-bottom-color: var(--$[prefix]-loader-color);\n    animation: $[prefix]-spinner-rotation 1s linear infinite;\n}\n\n/* ========================================================================\n    9. メニューバー\n   ======================================================================== */\n.$[prefix]-menu-bar {\n    color: var(--$[prefix]-menu-item-color);\n    display: flex;\n    background-color: var(--$[prefix]-bg);\n    padding: 2px;\n    flex-shrink: 0;\n    border-bottom: 1px solid var(--$[prefix]-border);\n    touch-action: auto;\n}\n\n.$[prefix]-menu-item {\n    font-family: sans-serif;\n    font-size: clamp(0px , calc(var(--winlet-title-bar-height) * 0.6), 14px);\n    padding: 4px 8px;\n    cursor: default;\n    position: relative;\n}\n\n.$[prefix]-menu-item:hover {\n    background-color: var(--$[prefix]-menu-item-hover-bg);\n    color: var(--$[prefix]-menu-item-hover-color);\n}\n\n/* --- ドロップダウンメニュー --- */\n.$[prefix]-menu-dropdown {\n    color: var(--$[prefix]-menu-item-color);\n    display: none;\n    position: absolute;\n    top: 100%;\n    left: 0;\n    background-color: var(--$[prefix]-menu-bg);\n    border: 1px solid var(--$[prefix]-menu-border);\n    box-shadow: 0 2px 8px var(--$[prefix]-shadow-color-light);\n    list-style: none;\n    margin: 0;\n    padding: 4px 0;\n    min-width: 150px;\n    z-index: 10;\n    touch-action: auto;\n}\n\n.$[prefix]-menu-dropdown li {\n    padding: 0 20px;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.$[prefix]-menu-dropdown li:hover {\n    background-color: var(--$[prefix]-menu-item-hover-bg);\n    color: var(--$[prefix]-menu-item-hover-color);\n}\n\n.$[prefix]-menu-dropdown li.$[prefix]-separator {\n    height: 1px;\n    background-color: var(--$[prefix]-menu-border);\n    margin: 4px 0;\n    padding: 0;\n}\n\n.$[prefix]-menu-dropdown-item {\n    display: flex;\n    line-height: 1.6em;\n    flex-wrap: nowrap;\n    justify-content: space-between;\n    width: 100%;\n    white-space: nowrap;\n}\n\n/* --- サブメニュー --- */\n.$[prefix]-menu-dropdown li.$[prefix]-has-submenu {\n    position: relative;\n}\n.$[prefix]-menu-dropdown li.$[prefix]-has-submenu::after {\n    content: \'▶\';\n    position: absolute;\n    top: 50%;\n    right: 10px;\n    margin-top: calc(var(--winlet-title-bar-height) * -0.5);\n    font-size: 0.8em;\n    color: inherit;\n}\n/**\n * ネストされたサブメニューの表示位置\n */\n.$[prefix]-menu-dropdown li.$[prefix]-has-submenu > .$[prefix]-menu-dropdown {\n    top: -5px; /* liのpaddingを考慮 */\n    left: 100%;\n}\n/**\n * サブメニューはホバーで開く\n */\n.$[prefix]-menu-dropdown li.$[prefix]-has-submenu:hover > .$[prefix]-menu-dropdown {\n    display: block;\n}\n\n/* --- ショートカットテキスト --- */\n.$[prefix]-shortcut-text {\n    color: var(--$[prefix]-shortcut-text-color);\n    margin-left: 1em;\n}\n.$[prefix]-menu-dropdown li:hover .$[prefix]-shortcut-text {\n    color: inherit;\n}\n\n/* --- タブ --- */\n.$[prefix]-tab-bar {\n    color: var(--$[prefix]-menu-item-color);\n    overflow-x: auto;\n    overflow-y: hidden;\n    -ms-overflow-style: -ms-autohiding-scrollbar;\n    scrollbar-width: thin;\n    display: flex;\n    background-color: var(--$[prefix]-tab-bar-bg);\n    flex-shrink: 0;\n    align-items: flex-end;\n    touch-action: auto;\n}\n\n.$[prefix]-tab-bar::-webkit-scrollbar{\n    width: 6px;\n    height: 6px;\n}\n\n.$[prefix]-tab-bar::-webkit-scrollbar-thumb {\n    background-color: var(--$[prefix]-scrollbar-thumb-bg);\n    border-radius: 3px;\n}\n\n.$[prefix]-tab-bar::-webkit-scrollbar-track {\n    background-color: transparent;\n}\n\n/* --- タブ --- */\n.$[prefix]-tab {\n    white-space: nowrap;\n    padding: 8px 16px;\n    font-family: sans-serif;\n    font-size: 14px;\n    cursor: pointer;\n    border-right: 1px solid var(--$[prefix]-tab-border);\n    background-color: var(--$[prefix]-tab-bg);\n}\n\n.$[prefix]-tab.$[prefix]-active {\n    background-color: var(--$[prefix]-tab-active-bg);\n    border-bottom: 2px solid var(--$[prefix]-title-bar-active-bg);\n}\n\n.$[prefix]-tab.$[prefix]-active .$[prefix]-tab-close-btn:hover {\n    background-color: var(--$[prefix]-tab-active-close-btn-hover-bg);\n}\n\n/**\n * ドラッグ中のタブのスタイル\n */\n.$[prefix]-tab.$[prefix]-dragging {\n    opacity: 0.5;\n}\n\n/* --- タブ関連ボタン --- */\n/**\n * タブの閉じるボタン\n */\n.$[prefix]-tab-close-btn {\n    margin-left: 8px;\n    padding: 0 4px;\n    border-radius: 50%;\n    cursor: pointer;\n    font-weight: bold;\n    font-size: 14px;\n    line-height: 1;\n}\n.$[prefix]-tab-close-btn:hover {\n    background-color: var(--$[prefix]-tab-close-btn-hover-bg);\n}\n\n/**\n * タブ追加ボタン\n */\n.$[prefix]-tab-add-btn {\n    padding: 8px;\n    font-size: 14px;\n    cursor: pointer;\n    border-bottom: 1px solid var(--$[prefix]-tab-border);\n}\n.$[prefix]-tab-add-btn:hover {\n    background-color: var(--$[prefix]-title-bar-bg);\n}\n\n/* --- タブコンテンツ --- */\n.$[prefix]-tab-content {\n    display: none;\n}\n\n.$[prefix]-tab-content.$[prefix]-active {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n\n/* ========================================================================\n    10. リサイズハンドル\n   ======================================================================== */\n.$[prefix]-resize-handle {\n    position: absolute;\n    z-index: 5;\n    touch-action: none;\n}\n\n.$[prefix]-resize-handle.$[prefix]-n { top: var(--$[prefix]-resize-handle-offset); left: 0; right: 0; height: var(--$[prefix]-resize-handle-size); cursor: n-resize; }\n.$[prefix]-resize-handle.$[prefix]-s { bottom: var(--$[prefix]-resize-handle-offset); left: 0; right: 0; height: var(--$[prefix]-resize-handle-size); cursor: s-resize; }\n.$[prefix]-resize-handle.$[prefix]-w { top: 0; bottom: 0; left: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); cursor: w-resize; }\n.$[prefix]-resize-handle.$[prefix]-e { top: 0; bottom: 0; right: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); cursor: e-resize; }\n.$[prefix]-resize-handle.$[prefix]-nw { top: var(--$[prefix]-resize-handle-offset); left: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); height: var(--$[prefix]-resize-handle-size); cursor: nw-resize; }\n.$[prefix]-resize-handle.$[prefix]-ne { top: var(--$[prefix]-resize-handle-offset); right: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); height: var(--$[prefix]-resize-handle-size); cursor: ne-resize; }\n.$[prefix]-resize-handle.$[prefix]-sw { bottom: var(--$[prefix]-resize-handle-offset); left: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); height: var(--$[prefix]-resize-handle-size); cursor: sw-resize; }\n.$[prefix]-resize-handle.$[prefix]-se { bottom: var(--$[prefix]-resize-handle-offset); right: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); height: var(--$[prefix]-resize-handle-size); cursor: se-resize; }\n\n/* ========================================================================\n    11. コンテキストメニュー\n   ======================================================================== */\n.$[prefix]-context-menu {\n    color: var(--$[prefix]-menu-item-color);\n    pointer-events: all;\n    position: fixed;\n    z-index: 10000;\n    background-color: var(--$[prefix]-menu-bg);\n    border: 1px solid var(--$[prefix]-menu-border);\n    box-shadow: 0 2px 8px var(--$[prefix]-shadow-color-light);\n    list-style: none;\n    margin: 0;\n    padding: 4px 0;\n    min-width: 160px;\n}\n.$[prefix]-context-menu li {\n    padding: 6px 24px;\n    font-family: sans-serif;\n    font-size: 14px;\n    cursor: pointer;\n}\n.$[prefix]-context-menu li:hover {\n    background-color: var(--$[prefix]-menu-item-hover-bg);\n    color: var(--$[prefix]-menu-item-hover-color);\n}\n.$[prefix]-context-menu li.$[prefix]-separator {\n    height: 1px;\n    background-color: var(--$[prefix]-menu-border);\n    margin: 4px 0;\n    padding: 0;\n}\n\n/* ========================================================================\n    12. ポップアップ\n   ======================================================================== */\n.$[prefix]-popup-window .$[prefix]-content {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    padding: 20px;\n    box-sizing: border-box;\n}\n.$[prefix]-popup-message {\n    font-family: sans-serif;\n    font-size: 14px;\n    line-height: 1.5;\n    flex-grow: 1;\n    word-wrap: break-word;\n}\n.$[prefix]-popup-buttons {\n    display: flex;\n    justify-content: flex-end;\n    gap: 10px;\n    margin-top: 20px;\n    flex-shrink: 0;\n    touch-action: auto;\n}\n.$[prefix]-popup-button {\n    color: var(--$[prefix]-menu-item-color);\n    min-width: 80px;\n    padding: 8px 12px;\n    margin: 0;\n    border: 1px solid var(--$[prefix]-menu-border);\n    border-radius: 3px;\n    background-color: var(--$[prefix]-bg);\n    cursor: pointer;\n    font-size: 14px;\n    box-shadow: 0 1px 1px var(--$[prefix]-shadow-color-light);\n}\n.$[prefix]-popup-button:hover {\n    border-color: var(--$[prefix]-popup-button-hover-border-color);\n    background-color: var(--$[prefix]-popup-button-hover-bg);\n}\n.$[prefix]-popup-button:active {\n    background-color: var(--$[prefix]-tab-bg);\n}\n\n/* ========================================================================\n    13. 統合スタイル (Merged Styles)\n   ======================================================================== */\n/* --- メニュー/タブ統合時の基本タイトルバー --- */\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-title-bar,\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-title-bar {\n    height: auto;\n    align-items: flex-end;\n    padding: 0;\n}\n\n/* --- メニュー統合スタイル --- */\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-icon {\n    margin-block: auto;\n}\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-title {\n    flex-grow: 1;\n    margin-block: auto;\n}\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-menu-bar {\n    border-bottom: none;\n    background: transparent;\n    padding: 0 6px;\n    align-self: center;\n}\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-menu-item {\n    line-height: var(--$[prefix]-title-bar-height);\n    padding-top: 0;\n    padding-bottom: 0;\n}\n/* アクティブウィンドウの統合メニューの文字色 */\n.$[prefix]-window.$[prefix]-menu-style-merged.$[prefix]-active:not(.$[prefix]-tab-style-merged) .$[prefix]-menu-item {\n    color: var(--winlet-menu-item-hover-color);\n}\n.$[prefix]-window.$[prefix]-menu-style-merged.$[prefix]-active:not(.$[prefix]-tab-style-merged) .$[prefix]-menu-item:hover {\n    background-color: var(--$[prefix]-title-bar-bg);\n    color: var(--$[prefix]-menu-item-color);\n}\n\n/* --- タブ統合スタイル (Chrome風) --- */\n.$[prefix]-window.$[prefix]-tab-style-merged.$[prefix]-window.$[prefix]-active .$[prefix]-title-bar {\n    background-color: var(--$[prefix]-title-bar-bg);\n}\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-title {\n    display: none;\n}\n\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab-bar {\n    background-color: transparent;\n    flex-grow: 1;\n    flex-shrink: 1;\n    min-width: 0;\n    align-items: flex-end;\n    height: calc(var(--$[prefix]-title-bar-height) + 4px);\n    margin: 0;\n    order: 1; /* controlsより前に配置 */\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n}\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab-bar::-webkit-scrollbar{\n    display: none;\n}\n.$[prefix]-window.$[prefix]-title-bar.$[prefix]-controls-left .$[prefix]-tab-bar {\n    order: -1;\n}\n\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab {\n    border: 1px solid var(--$[prefix]-border);\n    border-bottom: none;\n    border-radius: 6px 6px 0 0;\n    margin-top: 4px;\n    margin-left: -1px;\n    position: relative;\n    bottom: -1px;\n}\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab.$[prefix]-active {\n    background-color: var(--$[prefix]-bg);\n    border-color: var(--$[prefix]-border);\n    border-bottom: 1px solid var(--$[prefix]-bg);\n    z-index: 2;\n}\n\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab-add-btn {\n    border: none;\n    align-self: center;\n}\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-main-content {\n    border-top: none;\n}\n\n/* --- 統合時のコントロールボタン --- */\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-controls,\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-controls {\n    align-self: flex-start;\n    order: 2;\n}\n\n/* ========================================================================\n    14. タスクバー\n   ======================================================================== */\n.$[prefix]-taskbar {\n    position: absolute;\n    background-color: var(--$[prefix]-taskbar-bg);\n    box-sizing: border-box;\n    display: flex;\n    align-items: center;\n    padding: 0 5px;\n    z-index: 50000;\n    flex-shrink: 0;\n    display: flex;\n    gap: 5px;\n    overflow: auto;\n    scrollbar-width: none;\n    -ms-overflow-style: none;\n    backdrop-filter: blur(5px);\n    pointer-events: all;\n}\n.$[prefix]-taskbar::-webkit-scrollbar{\n    display: none;\n}\n\n/* --- 位置 --- */\n.$[prefix]-taskbar.$[prefix]-taskbar-bottom {\n    bottom: 0;\n    left: 0;\n    border-top: 1px solid var(--$[prefix]-taskbar-border);\n}\n.$[prefix]-taskbar.$[prefix]-taskbar-top {\n    top: 0;\n    left: 0;\n    border-bottom: 1px solid var(--$[prefix]-taskbar-border);\n}\n.$[prefix]-taskbar.$[prefix]-taskbar-left {\n    top: 0;\n    left: 0;\n    border-right: 1px solid var(--$[prefix]-taskbar-border);\n}\n.$[prefix]-taskbar.$[prefix]-taskbar-right {\n    top: 0;\n    right: 0;\n    border-left: 1px solid var(--$[prefix]-taskbar-border);\n}\n\n.$[prefix]-taskbar.$[prefix]-taskbar-bottom,\n.$[prefix]-taskbar.$[prefix]-taskbar-top {\n    --$[prefix]-taskbar-icon-size: var(--$[prefix]-taskbar-height);\n    width: 100%;\n    height: var(--$[prefix]-taskbar-height);\n    flex-direction: row;\n}\n.$[prefix]-taskbar.$[prefix]-taskbar-left,\n.$[prefix]-taskbar.$[prefix]-taskbar-right {\n    --$[prefix]-taskbar-icon-size: var(--$[prefix]-taskbar-width);\n    width: var(--$[prefix]-taskbar-width);\n    height: 100%;\n    flex-direction: column;\n}\n\n\n.$[prefix]-taskbar-item {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: auto;\n    height: calc(var(--winlet-taskbar-icon-size) - 6px);\n    padding: 0 10px;\n    border-radius: 3px;\n    background-color: var(--$[prefix]-taskbar-item-bg);\n    cursor: pointer;\n    flex-shrink: 0;\n    max-width: 150px;\n    transition: background-color 0.2s;\n    font-family: sans-serif;\n    font-size: 14px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    box-sizing: border-box;\n}\n/* 縦向きタスクバーのアイテム */\n.$[prefix]-taskbar.$[prefix]-taskbar-left .$[prefix]-taskbar-item,\n.$[prefix]-taskbar.$[prefix]-taskbar-right .$[prefix]-taskbar-item {\n    width: calc(var(--winlet-taskbar-icon-size) - 6px);\n    height: auto;\n    min-height: 40px;\n    max-width: none;\n    padding: 10px 0;\n    writing-mode: vertical-rl;\n}\n\n.$[prefix]-taskbar-item-icon {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n.$[prefix]-taskbar-item-icon img {\n    width: calc(var(--winlet-taskbar-icon-size) - 6px);\n    height: calc(var(--winlet-taskbar-icon-size) - 6px);\n    object-fit: contain;\n}\n.$[prefix]-taskbar-item-icon i {\n    font-size: calc((var(--winlet-taskbar-icon-size) - 12px) * 0.8);\n    line-height: calc(var(--winlet-taskbar-icon-size) - 18px);\n    text-align: center;\n    object-fit: contain;\n}\n.$[prefix]-taskbar-item.$[prefix]-icon-only {\n    width: calc(var(--winlet-taskbar-icon-size) - 6px);\n    height: calc(var(--winlet-taskbar-icon-size) - 6px);\n    padding: 6px;\n}\n/* 縦向きアイコンモード */\n.$[prefix]-taskbar.$[prefix]-taskbar-left .$[prefix]-taskbar-item.$[prefix]-icon-only,\n.$[prefix]-taskbar.$[prefix]-taskbar-right .$[prefix]-taskbar-item.$[prefix]-icon-only {\n    width: calc(var(--winlet-taskbar-icon-size) - 6px);\n    height: calc(var(--winlet-taskbar-icon-size) - 6px);\n}\n\n.$[prefix]-taskbar-item.$[prefix]-active {\n    background-color: var(--$[prefix]-taskbar-item-active-bg);\n    color: var(--$[prefix]-taskbar-item-active-color);\n}\n.$[prefix]-taskbar-item.$[prefix]-minimized {\n    opacity: 0.7;\n}\n\n/* ========================================================================\n    15. モバイル・タッチデバイス対応\n   ======================================================================== */\n@media (pointer: coarse), (max-width: 768px) {\n    /* リサイズハンドルとコントロールボタンを大きくして操作しやすくする */\n    :root {\n        --$[prefix]-resize-handle-size: 16px;\n        --$[prefix]-resize-handle-offset: -8px;\n    }\n    .$[prefix]-control-btn {\n        width: calc(var(--$[prefix]-title-bar-height) * 1.5);\n    }\n}\n\n/* ========================================================================\n    16. アニメーション無効化\n   ======================================================================== */\n.$[prefix]-container.$[prefix]-animations-disabled .$[prefix]-window,\n.$[prefix]-container.$[prefix]-animations-disabled .$[prefix]-window.$[prefix]-minimized,\n.$[prefix]-container.$[prefix]-animations-disabled .$[prefix]-window.$[prefix]-maximized,\n.$[prefix]-container.$[prefix]-animations-disabled .$[prefix]-window.$[prefix]-is-restoring {\n    transition: none;\n}\n\n/* ========================================================================\n    17. デバッグモード\n   ======================================================================== */\n.$[prefix]-debug-overlay {\n    display: none;\n    position: absolute;\n    top: calc(var(--$[prefix]-title-bar-height) + 5px);\n    left: 5px;\n    background: rgba(0,0,0,0.5);\n    color: #fff;\n    padding: 5px;\n    border-radius: 3px;\n    font-family: monospace;\n    font-size: 12px;\n    line-height: 1.4;\n    pointer-events: none;\n    z-index: 100;\n    white-space: pre;\n}\n\n.$[prefix]-container.$[prefix]-debug-mode-enabled .$[prefix]-debug-overlay {\n    display: block;\n}\n'},{}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.darkTheme=void 0;n.darkTheme={name:"dark",variables:{"--$[prefix]-text-color":"#e0e0e0","--$[prefix]-bg":"#2d2d2d","--$[prefix]-border":"#555","--$[prefix]-shadow-color-light":"rgba(0,0,0,0.3)","--$[prefix]-shadow-color-strong":"rgba(0,0,0,0.5)","--$[prefix]-shadow-color-active":"rgba(0,0,0,0.7)","--$[prefix]-title-bar-bg":"#3c3c3c","--$[prefix]-title-text-color":"#e0e0e0","--$[prefix]-title-text-active-color":"#fff","--$[prefix]-control-bg":"#4a4a4a","--$[prefix]-control-hover-bg":"#5a5a5a","--$[prefix]-menu-bg":"#252525","--$[prefix]-menu-border":"#444","--$[prefix]-menu-item-color":"#e0e0e0","--$[prefix]-shortcut-text-color":"#b0b0b0","--$[prefix]-tab-bg":"#383838","--$[prefix]-tab-active-bg":"#2d2d2d","--$[prefix]-tab-border":"#505050","--$[prefix]-tab-bar-bg":"#383838","--$[prefix]-tab-close-btn-hover-bg":"#5a5a5a","--$[prefix]-tab-active-close-btn-hover-bg":"#6a6a6a","--$[prefix]-popup-button-hover-bg":"#5a5a5a","--$[prefix]-popup-button-hover-border-color":"#777","--$[prefix]-taskbar-bg":"rgba(45, 45, 45, 0.9)","--$[prefix]-taskbar-border":"#555","--$[prefix]-taskbar-item-bg":"#5a5a5a","--$[prefix]-scrollbar-thumb-bg":"rgba(180, 180, 180, 0.5)"}}},{}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.defaultTheme=void 0;n.defaultTheme={name:"default",variables:{"--$[prefix]-text-color":"#000","--$[prefix]-bg":"#f0f0f0","--$[prefix]-border":"#a0a0a0","--$[prefix]-shadow-color-light":"rgba(0,0,0,0.15)","--$[prefix]-shadow-color-strong":"rgba(0,0,0,0.3)","--$[prefix]-shadow-color-active":"rgba(0,0,0,0.45)","--$[prefix]-title-bar-bg":"#e0e0e0","--$[prefix]-title-bar-active-bg":"#0078d7","--$[prefix]-title-text-color":"#000","--$[prefix]-title-text-active-color":"#fff","--$[prefix]-control-bg":"#d0d0d0","--$[prefix]-control-hover-bg":"#e5e5e5","--$[prefix]-control-close-hover-bg":"#e81123","--$[prefix]-control-close-hover-color":"#fff","--$[prefix]-menu-bg":"#fff","--$[prefix]-menu-border":"#ccc","--$[prefix]-menu-item-color":"#000","--$[prefix]-menu-item-hover-bg":"#0078d7","--$[prefix]-menu-item-hover-color":"#fff","--$[prefix]-shortcut-text-color":"#666","--$[prefix]-tab-bg":"#dcdcdc","--$[prefix]-tab-active-bg":"#f0f0f0","--$[prefix]-tab-border":"#b0b0b0","--$[prefix]-tab-bar-bg":"#e1e1e1","--$[prefix]-tab-close-btn-hover-bg":"#ccc","--$[prefix]-tab-active-close-btn-hover-bg":"#ddd","--$[prefix]-popup-button-hover-bg":"#e9e9e9","--$[prefix]-popup-button-hover-border-color":"#bbb","--$[prefix]-taskbar-bg":"rgba(240, 240, 240, 0.9)","--$[prefix]-taskbar-border":"#a0a0a0","--$[prefix]-taskbar-item-bg":"#d0d0d0","--$[prefix]-taskbar-item-active-bg":"#0078d7","--$[prefix]-taskbar-item-active-color":"#fff","--$[prefix]-loader-bg":"rgba(255, 255, 255, 0.7)","--$[prefix]-loader-color":"var(--$[prefix]-title-bar-active-bg)","--$[prefix]-scrollbar-thumb-bg":"rgba(100, 100, 100, 0.5)"}}},{}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LIB_VERSION=void 0;n.LIB_VERSION="v1.0.1.6"},{}]},{},[32]);
//# sourceMappingURL=winlet.min.js.map