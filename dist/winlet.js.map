{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "node_modules/@babel/runtime/helpers/arrayLikeToArray.js",
    "node_modules/@babel/runtime/helpers/arrayWithoutHoles.js",
    "node_modules/@babel/runtime/helpers/assertThisInitialized.js",
    "node_modules/@babel/runtime/helpers/classCallCheck.js",
    "node_modules/@babel/runtime/helpers/construct.js",
    "node_modules/@babel/runtime/helpers/createClass.js",
    "node_modules/@babel/runtime/helpers/defineProperty.js",
    "node_modules/@babel/runtime/helpers/getPrototypeOf.js",
    "node_modules/@babel/runtime/helpers/inherits.js",
    "node_modules/@babel/runtime/helpers/interopRequireDefault.js",
    "node_modules/@babel/runtime/helpers/isNativeFunction.js",
    "node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js",
    "node_modules/@babel/runtime/helpers/iterableToArray.js",
    "node_modules/@babel/runtime/helpers/nonIterableSpread.js",
    "node_modules/@babel/runtime/helpers/possibleConstructorReturn.js",
    "node_modules/@babel/runtime/helpers/setPrototypeOf.js",
    "node_modules/@babel/runtime/helpers/toConsumableArray.js",
    "node_modules/@babel/runtime/helpers/toPrimitive.js",
    "node_modules/@babel/runtime/helpers/toPropertyKey.js",
    "node_modules/@babel/runtime/helpers/typeof.js",
    "node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js",
    "node_modules/@babel/runtime/helpers/wrapNativeSuper.js",
    "src/const/config.ts",
    "src/const/errors.ts",
    "src/const/types.ts",
    "src/function/window.ts",
    "src/function/window_manager.ts",
    "src/index.ts",
    "src/libs/baseclass.ts",
    "src/libs/utils.ts",
    "src/style/styles.ts",
    "src/version.ts"
  ],
  "names": [],
  "mappings": "AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;AACA;;ACJA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACvBO,IAAM,aAAa,GAAA,OAAA,CAAA,aAAA,GAA4B;EACrD,EAAE,EAAE,IAAI;EACR,QAAQ,EAAE,OAAO;EACjB,KAAK,EAAE,YAAY;EACnB,IAAI,EAAE,IAAI;EACV,CAAC,EAAE,MAAM;EACT,CAAC,EAAE,MAAM;EACT,KAAK,EAAE,GAAG;EACV,MAAM,EAAE,GAAG;EACX,QAAQ,EAAE,GAAG;EACb,SAAS,EAAE,GAAG;EACd,UAAU,EAAE,IAAI;EAChB,UAAU,EAAE,IAAI;EAChB,OAAO,EAAE,IAAI;EACb,QAAQ,EAAE,IAAI;EACd,WAAW,EAAE,IAAI;EACjB,WAAW,EAAE,IAAI;EACjB,qBAAqB,EAAE,IAAI;EAC3B,eAAe,EAAE,IAAI;EACrB,gBAAgB,EAAE,OAAO;EACzB,OAAO,EAAE;IACR,IAAI,EAAE,EAAE;IACR,MAAM,EAAE;MACP,GAAG,EAAE,EAAE;MACP,MAAM,EAAE,EAAE;MACV,KAAK,EAAE,EAAE;MACT,cAAc,EAAE,EAAE;MAClB,OAAO,EAAE,MAAM;MACf,OAAO,EAAE,EAAE;MACX,UAAU,EAAE;KACZ;IACD,QAAQ,EAAE;GACV;EACD,IAAI,EAAE,EAAE;EACR,SAAS,EAAE,SAAS;EACpB,IAAI,EAAE,EAAE;EACR,QAAQ,EAAE,SAAS;EACnB,UAAU,EAAE;IACX,WAAW,EAAE,KAAK;IAClB,QAAQ,EAAE,KAAK;IACf,OAAO,EAAE,KAAK;IACd,UAAU,EAAE,KAAK;IACjB,SAAS,EAAE,KAAK;IAChB,kBAAkB,EAAE,KAAK;IACzB,KAAK,EAAE,SAAS;IAChB,cAAc,EAAE;GAChB;EACD,WAAW,EAAE,EAAE;EACf,KAAK,EAAE,IAAI;EACX,MAAM,EAAE,SAAR,MAAM,CAAA,EAAO,CAAE,CAAC;EAChB,OAAO,EAAE,SAAT,OAAO,CAAA,EAAO,CAAE,CAAC;EACjB,OAAO,EAAE,SAAT,OAAO,CAAA,EAAO,CAAE,CAAC;EACjB,MAAM,EAAE,SAAR,MAAM,CAAA,EAAO,CAAE,CAAC;EAChB,QAAQ,EAAE,SAAV,QAAQ,CAAA,EAAO,CAAE,CAAC;EAClB,MAAM,EAAE,SAAR,MAAM,CAAA,EAAO,CAAE,CAAC;EAChB,QAAQ,EAAE,SAAV,QAAQ,CAAA,EAAO,CAAE,CAAC;EAElB,QAAQ,EAAE,KAAK;EACf,OAAO,EAAE;CACT;;;;;;;;;;;;;;;;;;ICvDY,eAAgB,GAAA,OAAA,CAAA,eAAA,aAAA,MAAA;EAC5B,SAAA,gBAAY,OAAe;IAAA,IAAA,KAAA;IAAA,IAAA,gBAAA,mBAAA,eAAA;IAC1B,KAAA,GAAA,UAAA,OAAA,eAAA,GAAM,OAAO;IACb,KAAA,CAAK,IAAI,GAAG,KAAA,CAAK,WAAW,CAAC,IAAI;IAEjC,IAAM,YAAY,GAAqB,KAAyB;IAChE,IAAI,YAAY,CAAC,iBAAiB,EAAE;MACnC,YAAY,CAAC,iBAAiB,CAAA,KAAA,EAAO,KAAA,CAAK,WAAW,CAAC;IACvD;IAAC,OAAA,KAAA;EACF;EAAC,IAAA,UAAA,aAAA,eAAA,EAAA,MAAA;EAAA,WAAA,aAAA,aAAA,eAAA;AAAA,MAAA,iBAAA,aATmC,KAAK;AAAA,IAe7B,WAAY,GAAA,OAAA,CAAA,WAAA,aAAA,gBAAA;EACxB,SAAA,YAAY,OAAe;IAAA,IAAA,gBAAA,mBAAA,WAAA;IAAA,OAAA,UAAA,OAAA,WAAA,GACpB,OAAO;EACd;EAAC,IAAA,UAAA,aAAA,WAAA,EAAA,gBAAA;EAAA,WAAA,aAAA,aAAA,WAAA;AAAA,EAH+B,eAAe;AAAA,IAMnC,WAAY,GAAA,OAAA,CAAA,WAAA,aAAA,YAAA;EAAA,SAAA,YAAA;IAAA,IAAA,gBAAA,mBAAA,WAAA;IAAA,OAAA,UAAA,OAAA,WAAA,EAAA,SAAA;EAAA;EAAA,IAAA,UAAA,aAAA,WAAA,EAAA,YAAA;EAAA,WAAA,aAAA,aAAA,WAAA;AAAA,EAAQ,WAAW;;;;;;;;;AC5BrC,IAAM,YAAY,GAAA,OAAA,CAAA,YAAA,GAAG,QAAQ;AA+R7B,IAAM,cAAc,GAAA,OAAA,CAAA,cAAA,GAAG,MAAM,CAAC,SAAS,CAAC;AACxC,IAAM,mBAAmB,GAAA,OAAA,CAAA,mBAAA,GAAG,MAAM,CAAC,OAAO,CAAC;;;;;;;;;;;;;;;;;AChSlD,IAAA,OAAA,GAAA,OAAA;AACA,IAAA,OAAA,GAAA,OAAA;AACA,IAAA,MAAA,GAAA,OAAA;AACA,IAAA,UAAA,GAAA,sBAAA,CAAA,OAAA;AACA,IAAA,MAAA,GAAA,sBAAA,CAAA,OAAA;AACA,IAAA,eAAA,GAAA,sBAAA,CAAA,OAAA;AAA6C,SAAA,WAAA,CAAA,EAAA,CAAA,EAAA,CAAA,WAAA,CAAA,OAAA,gBAAA,aAAA,CAAA,OAAA,2BAAA,aAAA,CAAA,EAAA,yBAAA,KAAA,OAAA,CAAA,SAAA,CAAA,CAAA,EAAA,CAAA,YAAA,gBAAA,aAAA,CAAA,EAAA,WAAA,IAAA,CAAA,CAAA,KAAA,CAAA,CAAA,EAAA,CAAA;AAAA,SAAA,0BAAA,cAAA,CAAA,IAAA,OAAA,CAAA,SAAA,CAAA,OAAA,CAAA,IAAA,CAAA,OAAA,CAAA,SAAA,CAAA,OAAA,iCAAA,CAAA,aAAA,yBAAA,YAAA,0BAAA,aAAA,CAAA;AAAA,IAExB,YAAa,GAAA,OAAA,wBAAA,gBAAA;EA8BjC,SAAA,aAAY,OAAsB,EAAE,OAAsB;IAAA,IAAA,KAAA;IAAA,IAAA,gBAAA,mBAAA,YAAA;IACzD,KAAA,GAAA,UAAA,OAAA,YAAA;IAAQ,IAAA,gBAAA,aAAA,KAAA,WA3BmB,QAAQ;IAAA,IAAA,gBAAA,aAAA,KAAA,eAGhB;MAAE,CAAC,EAAE,CAAC;MAAE,CAAC,EAAE,CAAC;MAAE,KAAK,EAAE,CAAC;MAAE,MAAM,EAAE;IAAC,CAAE;IAAA,IAAA,gBAAA,aAAA,KAAA,aAC5B,KAAK;IAAA,IAAA,gBAAA,aAAA,KAAA,oBACE,CAAC;IAAA,IAAA,gBAAA,aAAA,KAAA,UAM8B,EAAE;IAAA,IAAA,gBAAA,aAAA,KAAA,eAC3B,IAAI;IAAA,IAAA,gBAAA,aAAA,KAAA,gBACvB,KAAK;IAAA,IAAA,gBAAA,aAAA,KAAA,6BAC8C,IAAI;IAAA,IAAA,gBAAA,aAAA,KAAA,iCAG7B,GAAG;IAAA,IAAA,gBAAA,aAAA,KAAA,sBACR,IAAI;IAAA,IAAA,gBAAA,aAAA,KAAA,wBAGsB,IAAI;IAAA,IAAA,gBAAA,aAAA,KAAA,kBAE3B,IAAI;IAKhD,KAAA,CAAK,EAAE,GAAG,OAAO,CAAC,EAAE,IAAI,iBAAK,CAAC,UAAU,CAAC,QAAQ,CAAC;IAClD,IAAI,OAAO,CAAC,EAAE,EAAE;MACf,IAAM,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE,CAAC;MACtD,IAAI,UAAU,IAAI,UAAU,CAAC,SAAS,CAAC,QAAQ,IAAA,MAAA,CAAI,mBAAY,YAAS,CAAC,EAAE;QAC1E,MAAM,IAAI,mBAAW,6BAAA,MAAA,CAA4B,OAAO,CAAC,EAAE,uDAAmD,CAAC;MAChH;IACD;IACA,KAAA,CAAK,OAAO,GAAG,OAAO;IACtB,KAAA,CAAK,OAAO,GAAG,iBAAK,CAAC,SAAS,CAAC,qBAAa,EAAE,OAAO,CAA4B;IACjF,KAAA,CAAK,YAAY,GAAG,OAAO,CAAC,OAAO,IAAI,IAAI;IAE3C,KAAA,CAAK,EAAE,GAAG,KAAA,CAAK,SAAS,EAAE;IAG1B,IAAI,KAAA,CAAK,OAAO,CAAC,QAAQ,EAAE;MAC1B,KAAA,CAAK,EAAE,CAAC,SAAS,CAAC,GAAG,IAAA,MAAA,CAAI,mBAAY,kBAAe,CAAC;IACtD;IAEA,IAAI,KAAA,CAAK,OAAO,CAAC,QAAQ,KAAK,QAAQ,EAAE;MACvC,KAAA,CAAK,EAAE,CAAC,SAAS,CAAC,GAAG,IAAA,MAAA,CAAI,mBAAY,sBAAmB,CAAC;IAC1D;IACA,IAAI,KAAA,CAAK,OAAO,CAAC,SAAS,KAAK,QAAQ,EAAE;MACxC,KAAA,CAAK,EAAE,CAAC,SAAS,CAAC,GAAG,IAAA,MAAA,CAAI,mBAAY,uBAAoB,CAAC;IAC3D;IAEA,KAAA,CAAK,UAAU,GAAG,KAAA,CAAK,EAAE,CAAC,aAAa,KAAA,MAAA,CAAkB,mBAAY,eAAY,CAAE;IACnF,KAAA,CAAK,MAAM,GAAG,KAAA,CAAK,EAAE,CAAC,aAAa,KAAA,MAAA,CAAkB,mBAAY,UAAO,CAAE;IAC1E,KAAA,CAAK,OAAO,GAAG,KAAA,CAAK,EAAE,CAAC,aAAa,KAAA,MAAA,CAAkB,mBAAY,WAAQ,CAAE;IAC5E,KAAA,CAAK,SAAS,GAAG,KAAA,CAAK,EAAE,CAAC,aAAa,KAAA,MAAA,CAAkB,mBAAY,aAAU,CAAE;IAEhF,KAAA,CAAK,YAAY,EAAE;IACnB,KAAA,CAAK,mBAAmB,EAAE;IAE1B,KAAA,CAAK,OAAO,CAAC,MAAM,CAAA,KAAK,CAAC;IAAC,OAAA,KAAA;EAC3B;EAAC,IAAA,UAAA,aAAA,YAAA,EAAA,gBAAA;EAAA,WAAA,aAAA,aAAA,YAAA;IAAA,GAAA;IAAA,KAAA,EAEO,SAAA,SAAS,CAAA;MAChB,IAAM,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;MAC9C,QAAQ,CAAC,SAAS,MAAA,MAAA,CAAM,mBAAY,YAAS;MAC7C,QAAQ,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE;MAErB,IAAM,OAAO,GAAa,EAAE;MAC5B,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE;QAC5B,OAAO,CAAC,IAAI,iBAAA,MAAA,CAAgB,mBAAY,gDAAA,MAAA,CAA2C,mBAAY,8BAA0B,CAAC;MAC3H;MACA,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE;QAC5B,OAAO,CAAC,IAAI,iBAAA,MAAA,CAAgB,mBAAY,gDAAA,MAAA,CAA2C,mBAAY,8BAA0B,CAAC;MAC3H;MACA,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE;QACvD,OAAO,CAAC,IAAI,iBAAA,MAAA,CAAgB,mBAAY,iDAAA,MAAA,CAA4C,mBAAY,iDAAA,MAAA,CAA4C,mBAAY,iDAAA,MAAA,CAA4C,mBAAY,+BAA2B,CAAC;MAC7O;MACA,IAAM,oBAAoB,GAAG,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC;MAE7C,IAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC;MAC5C,IAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC;MAC5C,IAAM,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,KAAK,QAAQ,IAAI,OAAO;MACnE,IAAM,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,KAAK,QAAQ,IAAI,OAAO;MAElE,IAAM,YAAY,iCAAA,MAAA,CACM,mBAAY,oCAAA,MAAA,CACpB,IAAI,CAAC,OAAO,CAAC,WAAW,qBAAA,MAAA,CAAoB,mBAAY,mBAAA,MAAA,CAAgB,mBAAY,8EAAoE,EAAE,wBAAA,MAAA,CAC1J,IAAI,CAAC,OAAO,CAAC,WAAW,qBAAA,MAAA,CAAoB,mBAAY,mBAAA,MAAA,CAAgB,mBAAY,8EAAoE,EAAE,wBAAA,MAAA,CAC1J,IAAI,CAAC,OAAO,CAAC,QAAQ,qBAAA,MAAA,CAAoB,mBAAY,mBAAA,MAAA,CAAgB,mBAAY,sEAA4D,EAAE,yBAC9I;MAEjB,IAAM,mBAAmB,iCAAA,MAAA,CACD,mBAAY,kCAAA,MAAA,CACxB,YAAY,mBAAA,MAAA,CAAkB,mBAAY,0BAAsB,EAAE,iCAAA,MAAA,CACtD,mBAAY,mCAAA,MAAA,CACxB,YAAY,mBAAA,MAAA,CAAkB,mBAAY,yBAAqB,EAAE,oBAAA,MAAA,CACjE,YAAY,eACjB;MAEP,QAAQ,CAAC,SAAS,iCAAA,MAAA,CACM,mBAAY,iBAAA,MAAA,CAAc,mBAAY,mCAAA,MAAA,CAC9C,mBAAmB,qDAAA,MAAA,CAEX,mBAAY,wCAAA,MAAA,CACpB,CAAC,YAAY,IAAI,OAAO,mBAAA,MAAA,CAAkB,mBAAY,0BAAsB,EAAE,wBAAA,MAAA,CAC9E,CAAC,YAAY,IAAI,OAAO,mBAAA,MAAA,CAAkB,mBAAY,yBAAqB,EAAE,qCAAA,MAAA,CACjE,mBAAY,yDAAA,MAAA,CAE5B,oBAAoB,eACzB;MACP,OAAO,QAAQ;IAChB;EAAC;IAAA,GAAA;IAAA,KAAA,EAEO,SAAA,YAAY,CAAA;MACnB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;MACjC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;MAC/B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;MACrD,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,MAAA,MAAA,CAAM,IAAI,CAAC,OAAO,CAAC,QAAQ,OAAI;MACrD,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,SAAS,MAAA,MAAA,CAAM,IAAI,CAAC,OAAO,CAAC,SAAS,OAAI;MAEvD,IAAI,IAAI,CAAC,OAAO,CAAC,gBAAgB,KAAK,MAAM,EAAE;QAC7C,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC;MAC/C;MAEA,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;QACjC,IAAI,CAAC,UAAU,EAAE;MAClB,CAAC,MAAM;QACN,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC;MACzD;MAEA,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;QACjC,IAAI,CAAC,UAAU,EAAE;MAClB;IACD;EAAC;IAAA,GAAA;IAAA,KAAA,EAEO,SAAA,aAAa,CAAC,SAAsB,EAAE,OAA6B;MAC1E,SAAS,CAAC,SAAS,GAAG,EAAE;MACxB,IAAI,OAAO,CAAC,QAAQ,EAAE;QACrB,IAAM,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAsB,OAAO,CAAC,QAAQ,CAAC;QAC9E,IAAI,CAAA,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,OAAO,MAAK,UAAU,EAAE;UACrC,SAAS,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACxD,CAAC,MAAM;UACN,SAAS,CAAC,SAAS,GAAG,uCAAuC;UAC7D,OAAO,CAAC,IAAI,CAAC,gDAAgD,CAAC;QAC/D;MACD,CAAC,MAAM,IAAI,OAAO,CAAC,IAAI,EAAE;QACxB,SAAS,CAAC,SAAS,GAAG,OAAO,CAAC,IAAI;MACnC,CAAC,MAAM,IAAI,iBAAK,CAAC,gBAAgB,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;QAClD,IAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;QAC/C,IAAM,YAAY,GAAG,OAAO,CAAC,MAAM;QACnC,IAAI,YAAY,CAAC,GAAG,EAAE;UACrB,MAAM,CAAC,GAAG,GAAG,YAAY,CAAC,GAAG;QAC9B;QACA,IAAI,YAAY,CAAC,MAAM,EAAE;UACxB,IAAI,WAAW,GAAG,YAAY,CAAC,MAAM;UACrC,IAAI,YAAY,CAAC,UAAU,EAAE;YAC5B,IAAM,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE;YACnD,IAAI,YAAY,CAAC,WAAW,EAAE;cAC7B,IAAM,SAAS,oBAAA,MAAA,CAAmB,YAAY,CAAC,WAAW,iBAAc;cACxE,IAAM,UAAU,4HAA6H;cAC7I,WAAW,yDAAA,MAAA,CAAuD,SAAS,EAAA,MAAA,CAAG,UAAU,mBAAA,MAAA,CAAgB,YAAY,CAAC,MAAM,mBAAgB;YAC5I,CAAC,MAAM;cACN,OAAO,CAAC,IAAI,CAAC,sFAAsF,CAAC;YACrG;UACD;UACA,MAAM,CAAC,MAAM,GAAG,WAAW;QAC5B;QACA,IAAI,YAAY,CAAC,KAAK,EAAE;UACvB,MAAM,CAAC,KAAK,GAAG,YAAY,CAAC,KAAK;QAClC;QACA,IAAI,YAAY,CAAC,cAAc,EAAE;UAChC,MAAM,CAAC,cAAc,GAAG,YAAY,CAAC,cAAc;QACpD;QACA,IAAI,YAAY,CAAC,OAAO,EAAE;UACzB,MAAM,CAAC,OAAO,GAAG,YAAY,CAAC,OAAO;QACtC;QACA,IAAI,YAAY,CAAC,OAAO,EAAE;UACzB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,EAAE;YACzC,YAAY,CAAC,OAAO,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC;UAC9C;UACA,IAAI,YAAY,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;YACpC,MAAM,CAAC,YAAY,CAAC,SAAS,EAAE,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;UAC/D;QACD;QACA,SAAS,CAAC,WAAW,CAAC,MAAM,CAAC;MAC9B;IACD;EAAC;IAAA,GAAA;IAAA,KAAA,EAEO,SAAA,aAAa,CAAA;MACpB,IAAI,CAAC,EAAE,CAAC,gBAAgB,KAAA,MAAA,CAAkB,mBAAY,oBAAA,MAAA,CAAiB,mBAAY,mBAAgB,CAAC,CAAC,OAAO,CAAC,UAAC,EAAE,EAAI;QACnH,EAAE,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM;MAC1B,CAAC,CAAC;MACF,IAAI,CAAC,UAAU,GAAG,KAAK;IACxB;EAAC;IAAA,GAAA;IAAA,KAAA,EAEO,SAAA,UAAU,CAAA;MAAA,IAAA,MAAA;MACjB,IAAM,OAAO,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,KAAA,MAAA,CAAkB,mBAAY,cAAW,CAAE;MAChF,OAAO,CAAC,SAAS,GAAG,EAAE;MAEtB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,UAAC,YAAY,EAAI;QAAA,IAAA,kBAAA;QAC1C,IAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;QAChD,UAAU,CAAC,SAAS,MAAA,MAAA,CAAM,mBAAY,iBAAA,MAAA,CAAc,mBAAY,aAAU;QAC1E,UAAU,CAAC,WAAW,IAAA,kBAAA,GAAG,YAAY,CAAC,IAAI,cAAA,kBAAA,cAAA,kBAAA,GAAI,EAAE;QAEhD,IAAI,YAAY,CAAC,KAAK,EAAE;UACvB,IAAM,UAAU,GAAG,MAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,KAAK,CAAC;UAE9D,UAAU,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC,EAAI;YAC1C,CAAC,CAAC,eAAe,EAAE;YACnB,IAAM,SAAS,GAAG,UAAU,CAAC,KAAK,CAAC,OAAO,KAAK,OAAO;YACtD,MAAI,CAAC,aAAa,EAAE;YACpB,IAAI,CAAC,SAAS,EAAE;cACf,UAAU,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO;cAClC,MAAI,CAAC,UAAU,GAAG,IAAI;YACvB;UACD,CAAC,CAAC;UAEF,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE,YAAK;YAC9C,IAAI,MAAI,CAAC,UAAU,EAAE;cACpB,MAAI,CAAC,aAAa,EAAE;cACpB,UAAU,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO;cAClC,MAAI,CAAC,UAAU,GAAG,IAAI;YACvB;UACD,CAAC,CAAC;UAEF,UAAU,CAAC,WAAW,CAAC,UAAU,CAAC;QACnC;QACA,OAAO,CAAC,WAAW,CAAC,UAAU,CAAC;MAChC,CAAC,CAAC;IACH;EAAC;IAAA,GAAA;IAAA,KAAA,EAEO,SAAA,kBAAkB,CAAC,KAAiB;MAAA,IAAA,MAAA;MAC3C,IAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC;MAC/C,UAAU,CAAC,SAAS,MAAA,MAAA,CAAM,mBAAY,mBAAgB;MAEtD,KAAK,CAAC,OAAO,CAAC,UAAC,QAAQ,EAAI;QAC1B,IAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC;QAC3C,IAAI,QAAQ,CAAC,SAAS,EAAE;UACvB,MAAM,CAAC,SAAS,GAAG,WAAW;QAC/B,CAAC,MAAM;UAAA,IAAA,cAAA;UACN,IAAI,IAAI,IAAA,cAAA,GAAG,QAAQ,CAAC,IAAI,cAAA,cAAA,cAAA,cAAA,GAAI,EAAE;UAC9B,IAAI,YAAA,MAAA,CAAY,IAAI,YAAS;UAC7B,IAAI,MAAI,CAAC,OAAO,CAAC,eAAe,IAAI,QAAQ,CAAC,QAAQ,EAAE;YACtD,IAAI,qBAAA,MAAA,CAAoB,mBAAY,wBAAA,MAAA,CAAoB,QAAQ,CAAC,QAAQ,aAAU;UACpF;UACA,MAAM,CAAC,SAAS,mBAAA,MAAA,CAAkB,mBAAY,4BAAA,MAAA,CAAwB,IAAI,WAAQ;UAClF,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC,EAAI;YAAA,IAAA,gBAAA;YACtC,CAAC,CAAC,eAAe,EAAE;YACnB,MAAI,CAAC,aAAa,EAAE;YACpB,CAAA,gBAAA,GAAA,QAAQ,CAAC,MAAM,cAAA,gBAAA,eAAf,gBAAA,CAAA,IAAA,CAAA,QAAQ,EAAU,MAAI,CAAC;UACxB,CAAC,CAAC;UACF,IAAI,QAAQ,CAAC,KAAK,EAAE;YACnB,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC;YACnC,IAAM,SAAS,GAAG,MAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,KAAK,CAAC;YACzD,MAAM,CAAC,WAAW,CAAC,SAAS,CAAC;UAC9B;QACD;QACA,UAAU,CAAC,WAAW,CAAC,MAAM,CAAC;MAC/B,CAAC,CAAC;MACF,OAAO,UAAU;IAClB;EAAC;IAAA,GAAA;IAAA,KAAA,EAEO,SAAA,UAAU,CAAA;MAAA,IAAA,qBAAA;QAAA,MAAA;MACjB,IAAM,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,KAAA,MAAA,CAAkB,mBAAY,aAAU,CAAE;MAC9E,MAAM,CAAC,SAAS,GAAG,EAAE;MACrB,IAAI,CAAC,IAAI,GAAG,EAAE;MACd,IAAM,OAAO,IAAA,qBAAA,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,cAAA,qBAAA,cAAA,qBAAA,GAAI,EAAE;MAE7C,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,UAAC,OAAO,EAAE,KAAK,EAAI;QAC5C,MAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,KAAK,CAAC;MACtC,CAAC,CAAC;MAEF,IAAI,OAAO,CAAC,OAAO,EAAE;QACpB,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;QAC9C,IAAI,CAAC,SAAS,CAAC,SAAS,MAAA,MAAA,CAAM,mBAAY,iBAAc;QACxD,IAAI,CAAC,SAAS,CAAC,WAAW,GAAG,GAAG;QAChC,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC,EAAI;UAAA,IAAA,cAAA;UAC9C,IAAM,UAAU,IAAA,cAAA,GAAG,OAAO,CAAC,KAAK,cAAA,cAAA,uBAAb,cAAA,CAAA,IAAA,CAAA,OAAO,EAAS,MAAI,CAAC;UACxC,IAAI,UAAU,EAAE;YACf,MAAI,CAAC,MAAM,CAAC,UAAU,CAAC;UACxB;QACD,CAAC,CAAC;QACF,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC;MACnC;MAEA,IAAI,CAAC,mBAAmB,EAAE;MAE1B,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;IAC9C;EAAC;IAAA,GAAA;IAAA,KAAA,EAEO,SAAA,mBAAmB,CAAA;MAAA,IAAA,MAAA;MAC1B,IAAM,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,KAAA,MAAA,CAAkB,mBAAY,aAAU,CAAE;MAC9E,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,WAAW,EAAE;MAErD,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,UAAC,CAAC,EAAI;QAAA,IAAA,eAAA;QACzC,KAAA,eAAA,GAAI,CAAC,CAAC,YAAY,cAAA,eAAA,eAAd,eAAA,CAAgB,KAAK,CAAC,QAAQ,CAAC,wBAAwB,CAAC,EAAE;UAC7D,CAAC,CAAC,cAAc,EAAE;UAClB,IAAI,CAAC,CAAC,YAAY,EAAE,CAAC,CAAC,YAAY,CAAC,UAAU,GAAG,MAAM;UACtD,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC;QAClC;MACD,CAAC,CAAC;MACF,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,YAAK;QACzC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,WAAW,CAAC;MACrC,CAAC,CAAC;MACF,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,UAAC,CAAC,EAAI;QAAA,IAAA,gBAAA,EAAA,gBAAA,EAAA,gBAAA,EAAA,qBAAA;QACrC,CAAC,CAAC,cAAc,EAAE;QAClB,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,WAAW,CAAC;QAEpC,IAAM,WAAW,IAAA,gBAAA,GAAG,CAAC,CAAC,YAAY,cAAA,gBAAA,uBAAd,gBAAA,CAAgB,OAAO,CAAC,wBAAwB,CAAC;QACrE,IAAM,cAAc,IAAA,gBAAA,GAAG,CAAC,CAAC,YAAY,cAAA,gBAAA,uBAAd,gBAAA,CAAgB,OAAO,CAAC,qCAAqC,CAAC;QACrF,IAAM,WAAW,IAAA,gBAAA,GAAG,CAAC,CAAC,YAAY,cAAA,gBAAA,uBAAd,gBAAA,CAAgB,OAAO,CAAC,YAAY,CAAC;QACzD,IAAI,CAAC,WAAW,IAAI,CAAC,cAAc,IAAI,CAAC,WAAW,EAAE;QAErD,IAAM,UAAU,IAAA,qBAAA,GAAG,MAAI,CAAC,OAAO,CAAC,SAAS,cAAA,qBAAA,uBAAtB,qBAAA,CAAwB,aAAa,KAAA,MAAA,CAAkB,mBAAY,kBAAe,CAAC;QAGtG,IAAI,cAAc,KAAK,MAAI,CAAC,EAAE,EAAE;UAC/B,IAAI,UAAU,EAAE;YAEf,MAAI,CAAC,qBAAqB,EAAE;UAC7B;UACA;QACD;QAGA,IAAM,YAAY,GAAG,MAAI,CAAC,OAAO,CAAC,SAAS,CAAC,cAAc,CAAC;QAC3D,IAAI,YAAY,EAAE;UAAA,IAAA,qBAAA,EAAA,qBAAA;UACjB,IAAM,UAAU,GAAG,YAAY,CAAC,OAAO,CAAC,UAAU;UAClD,IAAM,UAAU,GAAG,MAAI,CAAC,OAAO,CAAC,UAAU;UAE1C,IAAM,WAAW,IAAA,qBAAA,GAAG,UAAU,CAAC,SAAS,cAAA,qBAAA,cAAA,qBAAA,GAAI,UAAU,CAAC,UAAU;UACjE,IAAM,cAAc,IAAA,qBAAA,GAAG,UAAU,CAAC,kBAAkB,cAAA,qBAAA,cAAA,qBAAA,GAAI,IAAI;UAC5D,IAAM,kBAAkB,GAAG,CAAC,UAAU,CAAC,cAAc,IAAI,UAAU,CAAC,cAAc,CAAC,YAAY,EAAE,MAAI,CAAC;UAEtG,IAAI,CAAC,WAAW,IAAI,CAAC,cAAc,IAAI,CAAC,kBAAkB,EAAE;YAC3D;UACD;UAEA,IAAM,OAAO,GAAY,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC;UAChD,MAAI,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC;UAE1B,YAAY,CAAC,QAAQ,CAAC,QAAQ,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;QACjD;MACD,CAAC,CAAC;IACH;EAAC;IAAA,GAAA;IAAA,KAAA,EAEO,SAAA,gBAAgB,CAAC,OAAgB,EAAE,KAAa;MAAA,IAAA,sBAAA;QAAA,MAAA;MACvD,IAAM,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,KAAA,MAAA,CAAkB,mBAAY,aAAU,CAAE;MAC9E,IAAM,OAAO,IAAA,sBAAA,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,cAAA,sBAAA,cAAA,sBAAA,GAAI,EAAE;MAE7C,IAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;MAC3C,KAAK,CAAC,SAAS,MAAA,MAAA,CAAM,mBAAY,SAAM;MACvC,KAAK,CAAC,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC,QAAQ,EAAE;MAEtC,IAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC;MAC9C,OAAO,CAAC,WAAW,GAAG,OAAO,CAAC,KAAK;MACnC,KAAK,CAAC,WAAW,CAAC,OAAO,CAAC;MAG1B,MAAM,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC;MAE1C,IAAI,OAAO,CAAC,QAAQ,EAAE;QACrB,IAAM,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC;QAC/C,QAAQ,CAAC,SAAS,MAAA,MAAA,CAAM,mBAAY,mBAAgB;QACpD,QAAQ,CAAC,SAAS,GAAG,SAAS;QAC9B,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC,EAAI;UACxC,CAAC,CAAC,eAAe,EAAE;UAEnB,IAAM,YAAY,GAAG,MAAI,CAAC,IAAI,CAAC,SAAS,CAAC,UAAC,CAAC;YAAA,OAAK,CAAC,CAAC,KAAK,KAAK,KAAK;UAAA,EAAC;UAClE,IAAI,YAAY,KAAK,CAAC,CAAC,EAAE;YACxB,MAAI,CAAC,QAAQ,CAAC,YAAY,CAAC;UAC5B;QACD,CAAC,CAAC;QACF,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC;MAC5B;MAGA,IAAM,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;MAClD,YAAY,CAAC,SAAS,MAAA,MAAA,CAAM,mBAAY,iBAAc;MACtD,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,YAAY,CAAC;MACxC,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE,OAAO,CAAC,OAAO,CAAC;MAEjD,KAAK,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC,EAAI;QACrC,MAAI,CAAC,WAAW,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,KAAM,CAAC;MACxC,CAAC,CAAC;MACF,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QAAE,KAAK,EAAL,KAAK;QAAE,SAAS,EAAE;MAAY,CAAE,CAAC;MAE9D,IAAI,OAAO,CAAC,WAAW,EAAE;QACxB,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC;MAC/B;IACD;EAAC;IAAA,GAAA;IAAA,KAAA,EAEO,SAAA,kBAAkB,CAAC,KAAkB;MAAA,IAAA,MAAA;MAC5C,KAAK,CAAC,SAAS,GAAG,IAAI;MACtB,KAAK,CAAC,gBAAgB,CAAC,WAAW,EAAE,UAAC,CAAC,EAAI;QACzC,CAAC,CAAC,YAAa,CAAC,OAAO,CAAC,YAAY,EAAE,KAAK,CAAC,OAAO,CAAC,KAAM,CAAC;QAC3D,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC;QAG/B,IAAI,MAAI,CAAC,OAAO,CAAC,UAAU,CAAC,UAAU,EAAE;UACvC,IAAM,QAAQ,GAAG,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,KAAM,EAAE,EAAE,CAAC;UACnD,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,MAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;YACpD,IAAM,OAAO,GAAG,MAAI,CAAC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC;YAC3C,CAAC,CAAC,YAAa,CAAC,OAAO,CAAC,wBAAwB,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;YAC1E,CAAC,CAAC,YAAa,CAAC,OAAO,CAAC,qCAAqC,EAAE,MAAI,CAAC,EAAE,CAAC;YAEvE,MAAI,CAAC,OAAO,CAAC,cAAc,CAAC,MAAI,CAAC,EAAE,CAAC;UACrC;QACD;MACD,CAAC,CAAC;MACF,KAAK,CAAC,gBAAgB,CAAC,SAAS,EAAE,YAAK;QACtC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU,CAAC;QAClC,MAAI,CAAC,OAAO,CAAC,YAAY,EAAE;MAC5B,CAAC,CAAC;MAEF,KAAK,CAAC,gBAAgB,CACrB,UAAU,EACV,UAAC,CAAC,EAAI;QAAA,IAAA,qBAAA;QACL,IAAI,EAAA,qBAAA,GAAA,MAAI,CAAC,OAAO,CAAC,eAAe,cAAA,qBAAA,uBAA5B,qBAAA,CAA8B,cAAc,MAAK,MAAI,CAAC,EAAE,EAAE;UAC7D;QACD;QAEA,CAAC,CAAC,cAAc,EAAE;QAClB,IAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,KAAA,MAAA,CAAkB,mBAAY,kBAAe,CAAC;QACvF,IAAI,UAAU,IAAI,UAAU,KAAK,KAAK,EAAE;UACvC,IAAM,IAAI,GAAG,KAAK,CAAC,qBAAqB,EAAE;UAE1C,IAAM,OAAO,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC;UACtD,IAAM,MAAM,GAAG,KAAK,CAAC,UAAW;UAChC,IAAI,OAAO,EAAE;YACZ,MAAM,CAAC,YAAY,CAAC,UAAU,EAAE,KAAK,CAAC,WAAW,CAAC;UACnD,CAAC,MAAM;YACN,MAAM,CAAC,YAAY,CAAC,UAAU,EAAE,KAAK,CAAC;UACvC;QACD;MACD,CAAC,EACD;QAAE,OAAO,EAAE;MAAK,CAAE,CAClB;MAED,KAAK,CAAC,gBAAgB,CACrB,MAAM,EACN,UAAC,CAAC,EAAI;QACL,CAAC,CAAC,cAAc,EAAE;MACnB,CAAC,EACD;QAAE,OAAO,EAAE;MAAK,CAAE,CAClB;IACF;EAAC;IAAA,GAAA;IAAA,KAAA,EAGM,SAAA,QAAQ,CAAC,KAAa;MAAA,IAAA,gBAAA;MAE5B,IAAM,SAAS,IAAA,gBAAA,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,cAAA,gBAAA,uBAAhB,gBAAA,CAAkB,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,CAAC;MAGtE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,MAAM,EAAE;MAC/B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,MAAM,EAAE;MAEnC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC;MAC1B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC;MAGlC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,UAAC,GAAG,EAAE,CAAC;QAAA,OAAM,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC,QAAQ,EAAE;MAAA,CAAC,CAAC;MAGvE,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;QACzB,IAAI,SAAS,EAAE;UACd,IAAM,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,GAAG,CAAC,CAAC;UAC7C,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC;QACjC;MACD,CAAC,MAAM;QAEN,IAAI,CAAC,KAAK,EAAE;MACb;IACD;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,WAAW,CAAC,KAAa;MAC/B,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,UAAC,GAAG,EAAE,CAAC,EAAI;QAC5B,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,KAAK,KAAK,CAAC;QACjD,GAAG,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,KAAK,KAAK,CAAC;MACtD,CAAC,CAAC;IACH;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,MAAM,CAAC,OAAgB,EAA2B;MAAA,IAAzB,SAAA,GAAA,SAAA,CAAA,MAAA,QAAA,SAAA,QAAA,SAAA,GAAA,SAAA,MAAqB,IAAI;MACxD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;MAC/B,IAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC;MAC7C,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,QAAQ,CAAC;MACxC,IAAI,SAAS,EAAE;QACd,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC;QAE1B,IAAI,CAAC,KAAK,EAAE;MACb;IACD;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,OAAO,CAAA;MACb,OAAO,IAAI,CAAC,IAAI;IACjB;EAAC;IAAA,GAAA;IAAA,KAAA,EAEO,SAAA,qBAAqB,CAAA;MAC5B,IAAM,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,gBAAgB,KAAA,MAAA,CAAkB,mBAAY,kBAAA,MAAA,CAAe,mBAAY,SAAM,CAAC,CAAC;MAExH,IAAM,OAAO,GAAqB,EAAE;MACpC,IAAM,cAAc,GAAc,EAAE;MAEpC,IAAM,OAAO,OAAA,mBAAA,aAAO,IAAI,CAAC,IAAI,CAAC;MAC9B,IAAM,cAAc,OAAA,mBAAA,aAAO,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;MAE7C,WAAW,CAAC,OAAO,CAAC,UAAC,KAAK,EAAI;QAE7B,IAAM,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,UAAC,CAAC;UAAA,OAAK,CAAC,CAAC,KAAK,KAAK,KAAK;QAAA,EAAC;QAC5D,IAAI,QAAQ,KAAK,CAAC,CAAC,EAAE;UACpB,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;UAC/B,cAAc,CAAC,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;QAC9C;MACD,CAAC,CAAC;MAEF,IAAI,CAAC,IAAI,GAAG,OAAO;MACnB,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,cAAc;MAGlC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,UAAC,GAAG,EAAE,CAAC;QAAA,OAAM,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC,QAAQ,EAAE;MAAA,CAAC,CAAC;IACxE;EAAC;IAAA,GAAA;IAAA,KAAA,EAEO,SAAA,mBAAmB,CAAA;MAAA,IAAA,MAAA;MAC1B,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,OAAO,EAAE;QAAA,OAAM,MAAI,CAAC,KAAK,EAAE;MAAA,GAAE,IAAI,CAAC;MAG3D,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,SAAS,EAAE;QAAA,OAAM,MAAI,CAAC,KAAK,EAAE;MAAA,EAAC;MAGvD,IAAI,CAAC,uBAAuB,GAAG,YAAK;QACnC,IAAI,MAAI,CAAC,UAAU,EAAE;UACpB,MAAI,CAAC,aAAa,EAAE;QACrB;MACD,CAAC;MACD,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,uBAAuB,CAAC;MAEhE,IAAM,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,KAAA,MAAA,CAAwB,mBAAY,eAAY,CAAC;MACvF,QAAQ,aAAR,QAAQ,eAAR,QAAQ,CAAE,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC,EAAI;QACzC,CAAC,CAAC,eAAe,EAAE;QACnB,IAAI,MAAI,CAAC,OAAO,CAAC,QAAQ,EAAE;UAAA,IAAA,qBAAA;UAC1B,CAAA,qBAAA,GAAA,MAAI,CAAC,kBAAkB,cAAA,qBAAA,eAAvB,qBAAA,CAAA,IAAA,CAAA,MAAI,EAAsB,0BAAmB,CAAC;QAC/C;QACA,MAAI,CAAC,KAAK,EAAE;MACb,CAAC,CAAC;MAEF,IAAM,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,KAAA,MAAA,CAAwB,mBAAY,kBAAe,CAAC;MACxF,MAAM,aAAN,MAAM,eAAN,MAAM,CAAE,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC,EAAI;QACvC,CAAC,CAAC,eAAe,EAAE;QACnB,MAAI,CAAC,cAAc,EAAE;MACtB,CAAC,CAAC;MAEF,IAAM,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,KAAA,MAAA,CAAwB,mBAAY,kBAAe,CAAC;MACxF,MAAM,aAAN,MAAM,eAAN,MAAM,CAAE,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC,EAAI;QACvC,CAAC,CAAC,eAAe,EAAE;QACnB,MAAI,CAAC,QAAQ,EAAE;MAChB,CAAC,CAAC;MAEF,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,EAAE;MAC5C,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,aAAa,EAAE;MAC5E,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;QAExC,IAAI,CAAC,EAAE,CAAC,gBAAgB,CACvB,aAAa,EACb,UAAC,CAAC,EAAI;UACL,CAAC,CAAC,cAAc,EAAE;UAClB,MAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,OAAO,EAAE,MAAI,CAAC,OAAO,CAAC,WAAW,EAAE,MAAI,CAAC;QACnF,CAAC,EACD;UAAE,OAAO,EAAE;QAAK,CAAE,CAClB;QAED,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,aAAa,EAAE,UAAC,CAAC,EAAI;UAC7C,IAAI,CAAC,CAAC,WAAW,KAAK,OAAO,EAAE;UAC/B,MAAI,CAAC,gBAAgB,GAAG,MAAM,CAAC,UAAU,CAAC,YAAK;YAC9C,MAAI,CAAC,gBAAgB,GAAG,IAAI;YAC5B,MAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,OAAO,EAAE,MAAI,CAAC,OAAO,CAAC,WAAW,EAAE,MAAI,CAAC;UACnF,CAAC,EAAE,MAAI,CAAC,2BAA2B,CAAC;QACrC,CAAC,CAAC;QACF,IAAM,qBAAqB,GAAG,SAAxB,qBAAqB,CAAA,EAAQ;UAClC,IAAI,MAAI,CAAC,gBAAgB,EAAE;YAC1B,YAAY,CAAC,MAAI,CAAC,gBAAgB,CAAC;YACnC,MAAI,CAAC,gBAAgB,GAAG,IAAI;UAC7B;QACD,CAAC;QACD,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,aAAa,EAAE,qBAAqB,CAAC;QAC9D,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,WAAW,EAAE,qBAAqB,CAAC;QAC5D,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,eAAe,EAAE,qBAAqB,CAAC;MACjE;IACD;EAAC;IAAA,GAAA;IAAA,KAAA,EAEO,SAAA,WAAW,CAAA;MAAA,IAAA,MAAA;MAClB,IAAM,aAAa,GAAG,SAAhB,aAAa,CAAI,CAAe,EAAI;QACzC,IAAM,MAAM,GAAG,CAAC,CAAC,MAAqB;QAEtC,IAAI,MAAM,CAAC,OAAO,KAAA,MAAA,CAAK,mBAAY,qBAAA,MAAA,CAAkB,mBAAY,uBAAA,MAAA,CAAoB,mBAAY,mBAAA,MAAA,CAAgB,mBAAY,aAAA,MAAA,CAAU,mBAAY,iBAAc,CAAC,EAAE;UACnK;QACD;QAGA,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;QAEpB,CAAC,CAAC,cAAc,EAAE;QAClB,MAAI,CAAC,KAAK,EAAE;QAEZ,IAAiB,MAAM,GAAsB,CAAC,CAAtC,OAAO;UAAmB,MAAM,GAAK,CAAC,CAArB,OAAO;QAChC,IAAI,UAAU,GAAG,KAAK;QAGtB,IAAI,WAAmB;QACvB,IAAI,UAAkB;QAEtB,IAAM,aAAa,GAAG,SAAhB,aAAa,CAAI,KAAmB,EAAI;UAAA,IAAA,SAAA;UAC7C,IAAI,GAAA,SAAA,GAAC,MAAI,CAAC,EAAE,cAAA,SAAA,eAAP,SAAA,CAAS,WAAW,GAAE;UAC3B,IAAI,CAAC,UAAU,EAAE;YAChB,IAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;YAC/C,IAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;YAG/C,IAAI,MAAM,GAAG,MAAI,CAAC,cAAc,IAAI,MAAM,GAAG,MAAI,CAAC,cAAc,EAAE;cACjE,UAAU,GAAG,IAAI;cACjB,MAAI,CAAC,EAAE,CAAC,iBAAiB,CAAC,CAAC,CAAC,SAAS,CAAC;cACtC,MAAI,CAAC,SAAS,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM;cAG3C,IAAI,MAAI,CAAC,KAAK,KAAK,WAAW,EAAE;gBAC/B,IAAM,aAAa,GAAG,MAAI,CAAC,SAAS,CAAC,KAAK;gBAC1C,IAAM,UAAU,GAAG,CAAC,CAAC,OAAO,GAAG,MAAI,CAAC,EAAE,CAAC,WAAW;gBAClD,IAAM,YAAY,GAAG,MAAI,CAAC,UAAU,CAAC,qBAAqB,EAAE;gBAC5D,IAAM,OAAO,GAAG,CAAC,CAAC,OAAO,GAAG,YAAY,CAAC,GAAG;gBAC5C,IAAM,IAAI,GAAG,CAAC,CAAC,OAAO,GAAG,aAAa,GAAG,UAAU;gBACnD,IAAM,IAAI,GAAG,CAAC,CAAC,OAAO,GAAG,OAAO;gBAEhC,MAAI,CAAC,OAAO,EAAE;gBACd,MAAI,CAAC,WAAW,CAAC,IAAI,EAAE,IAAI,CAAC;cAC7B;cAGA,WAAW,GAAG,MAAI,CAAC,EAAE,CAAC,UAAU;cAChC,UAAU,GAAG,MAAI,CAAC,EAAE,CAAC,SAAS;YAC/B,CAAC,MAAM;cAEN;YACD;UACD;UAGA,IAAM,OAAO,GAAG,WAAW,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM;UACpD,IAAM,MAAM,GAAG,UAAU,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM;UAClD,MAAI,CAAC,WAAW,CAAC,OAAO,EAAE,MAAM,CAAC;QAClC,CAAC;QAED,IAAM,WAAW,GAAG,SAAd,WAAW,CAAA,EAAQ;UACxB,QAAQ,CAAC,mBAAmB,CAAC,aAAa,EAAE,aAAa,CAAC;UAC1D,QAAQ,CAAC,mBAAmB,CAAC,WAAW,EAAE,aAAa,CAAC;UAGxD,IAAI,UAAU,EAAE;YACf,MAAI,CAAC,EAAE,CAAC,qBAAqB,CAAC,CAAC,CAAC,SAAS,CAAC;YAC1C,MAAI,CAAC,SAAS,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM;YAC3C,MAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAI,CAAC;UAC1B;QACD,CAAC;QAED,QAAQ,CAAC,gBAAgB,CAAC,aAAa,EAAE,aAAa,CAAC;QACvD,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,WAAW,CAAC;MACpD,CAAC;MAED,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,aAAa,EAAE,aAAa,EAAE;QAAE,OAAO,EAAE;MAAK,CAAE,CAAC;MAElF,IAAI,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE;QAC7B,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,UAAU,EAAE,UAAC,CAAa,EAAI;UAC9D,IAAI,MAAI,CAAC,OAAO,CAAC,qBAAqB,EAAE;YACvC,IAAM,MAAM,GAAG,CAAC,CAAC,MAAqB;YAEtC,IAAI,MAAM,CAAC,OAAO,KAAA,MAAA,CAAK,mBAAY,qBAAA,MAAA,CAAkB,mBAAY,mBAAA,MAAA,CAAgB,mBAAY,SAAM,CAAC,EAAE;cACrG;YACD;YACA,MAAI,CAAC,cAAc,EAAE;UACtB;QACD,CAAC,CAAC;MACH;IACD;EAAC;IAAA,GAAA;IAAA,KAAA,EAEO,SAAA,aAAa,CAAA;MAAA,IAAA,MAAA;MACpB,IAAI,CAAC,EAAE,CAAC,gBAAgB,KAAA,MAAA,CAAkB,mBAAY,mBAAgB,CAAC,CAAC,OAAO,CAAC,UAAC,MAAM,EAAI;QAC1F,MAAM,CAAC,gBAAgB,CACtB,aAAa,EACb,UAAC,CAAe,EAAI;UACnB,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,IAAI,EAAC,MAAM,aAAN,MAAM,eAAN,MAAM,CAAE,WAAW,GAAE;UAC5C,CAAC,CAAC,cAAc,EAAE;UAClB,CAAC,CAAC,eAAe,EAAE;UACnB,MAAI,CAAC,KAAK,EAAE;UACZ,MAAI,CAAC,SAAS,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM;UAC3C,MAAM,CAAC,iBAAiB,CAAC,CAAC,CAAC,SAAS,CAAC;UAErC,IAAM,SAAS,GAAG,MAAM,CAAC,SAAS,CAAC,OAAO,IAAA,MAAA,CAAI,mBAAY,sBAAmB,EAAE,CAAC;UAChF,IAAiB,MAAM,GAAsB,CAAC,CAAtC,OAAO;YAAmB,MAAM,GAAK,CAAC,CAArB,OAAO;UAChC,IAAA,SAAA,GAA2G,MAAI,CAAC,EAAE;YAA7F,UAAU,GAAA,SAAA,CAAvB,WAAW;YAA4B,WAAW,GAAA,SAAA,CAAzB,YAAY;YAA2B,SAAS,GAAA,SAAA,CAArB,UAAU;YAAwB,QAAQ,GAAA,SAAA,CAAnB,SAAS;UAC5F,IAAA,cAAA,GAAgC,MAAI,CAAC,OAAO;YAApC,QAAQ,GAAA,cAAA,CAAR,QAAQ;YAAE,SAAS,GAAA,cAAA,CAAT,SAAS;UAE3B,IAAM,aAAa,GAAG,SAAhB,aAAa,CAAI,KAAmB,EAAI;YAC7C,IAAI,QAAQ,GAAG,UAAU;cACxB,SAAS,GAAG,WAAW;cACvB,OAAO,GAAG,SAAS;cACnB,MAAM,GAAG,QAAQ;YAClB,IAAM,MAAM,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM;YACrC,IAAM,MAAM,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM;YAErC,IAAI,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,UAAU,GAAG,MAAM,CAAC;YAC/E,IAAI,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;cAC5B,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,UAAU,GAAG,MAAM,CAAC;cAClD,OAAO,GAAG,SAAS,GAAG,MAAM;YAC7B;YACA,IAAI,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,WAAW,GAAG,MAAM,CAAC;YAClF,IAAI,SAAS,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;cAC5B,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,WAAW,GAAG,MAAM,CAAC;cACrD,MAAM,GAAG,QAAQ,GAAG,MAAM;YAC3B;YACA,MAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,SAAS,CAAC;YACjC,MAAI,CAAC,WAAW,CAAC,OAAO,EAAE,MAAM,CAAC;UAClC,CAAC;UACD,IAAM,YAAW,GAAG,SAAd,WAAW,CAAA,EAAQ;YACxB,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,SAAS,CAAC;YACzC,MAAI,CAAC,SAAS,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM;YAE3C,QAAQ,CAAC,mBAAmB,CAAC,aAAa,EAAE,aAAa,CAAC;YAC1D,QAAQ,CAAC,mBAAmB,CAAC,WAAW,EAAE,YAAW,CAAC;YACtD,MAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAI,CAAC;UAC5B,CAAC;UACD,QAAQ,CAAC,gBAAgB,CAAC,aAAa,EAAE,aAAa,CAAC;UACvD,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,YAAW,CAAC;QACpD,CAAC,EACD;UAAE,OAAO,EAAE;QAAK,CAAE,CAClB;MACF,CAAC,CAAC;IACH;EAAC;IAAA,GAAA;IAAA,KAAA,EAEO,SAAA,aAAa,CAAC,QAAgB;MACrC,IAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC;MAC5C,IAAM,SAAS,GAAG,OAAO,CAAC,IAAI,CAAC,UAAC,CAAC;QAAA,OAAK,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC;MAAA,EAAC;MAC5D,IAAM,OAAO,GAAG,OAAO,CAAC,IAAI,CAAC,UAAC,CAAC;QAAA,OAAK,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAC;MAAA,EAAC;MAC9D,OAAO,SAAS,IAAI,OAAO;IAC5B;EAAC;IAAA,GAAA;IAAA,KAAA,EAIM,SAAA,KAAK,CAAA;MAEX,IAAI,IAAI,CAAC,uBAAuB,EAAE;QACjC,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,uBAAuB,CAAC;MACpE;MACA,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC;MAC1B,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC;IACpC;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,QAAQ,CAAA;MACd,IAAI,IAAI,CAAC,KAAK,KAAK,WAAW,EAAE;QAC/B,IAAI,IAAI,CAAC,KAAK,KAAK,QAAQ,EAAE,IAAI,CAAC,OAAO,EAAE;QAC3C,IAAI,CAAC,KAAK,GAAG,WAAW;QACxB,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC;QAClC,IAAI,CAAC,IAAI,EAAE;MACZ;IACD;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,cAAc,CAAA;MACpB,IAAI,CAAC,KAAK,KAAK,WAAW,GAAG,IAAI,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,QAAQ,EAAE;IAC9D;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,QAAQ,CAAA;MACd,IAAI,IAAI,CAAC,KAAK,KAAK,WAAW,EAAE;QAC/B,IAAI,IAAI,CAAC,KAAK,KAAK,QAAQ,EAAE,IAAI,CAAC,OAAO,EAAE;QAC3C,IAAI,CAAC,SAAS,GAAG;UAAE,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,UAAU;UAAE,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,SAAS;UAAE,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,WAAW;UAAE,MAAM,EAAE,IAAI,CAAC,EAAE,CAAC;QAAY,CAAE;QAC1H,IAAI,CAAC,KAAK,GAAG,WAAW;QACxB,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC;QAClC,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC;QACtB,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,MAAM,CAAC;QAC5B,IAAM,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,KAAA,MAAA,CAAwB,mBAAY,kBAAe,CAAC;QACxF,IAAI,MAAM,EAAE;UACX,MAAM,CAAC,KAAK,GAAG,SAAS;UACxB,MAAM,CAAC,KAAK,GAAG,QAAQ;QACxB;MACD;IACD;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,OAAO,CAAA;MACb,IAAI,IAAI,CAAC,KAAK,KAAK,WAAW,EAAE;QAC/B,IAAI,CAAC,KAAK,GAAG,QAAQ;QACrB,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,WAAW,CAAC;QACrC,IAAI,CAAC,KAAK,EAAE;MACb,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,KAAK,WAAW,EAAE;QACtC,IAAI,CAAC,KAAK,GAAG,QAAQ;QACrB,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,WAAW,CAAC;QACrC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;QACzD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;QACpD,IAAM,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,KAAA,MAAA,CAAwB,mBAAY,kBAAe,CAAC;QACxF,IAAI,MAAM,EAAE;UACX,MAAM,CAAC,KAAK,GAAG,UAAU;UACzB,MAAM,CAAC,KAAK,GAAG,QAAQ;QACxB;MACD;IACD;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,KAAK,CAAA;MACX,IAAI,IAAI,CAAC,OAAO,EAAE;MAGlB,IAAI,IAAI,CAAC,YAAY,EAAE;QACtB,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE;MAC1B;MAEA,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC;MAC9B,IAAI,CAAC,OAAO,GAAG,IAAI;MACnB,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;MAC/B,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC;IAC3B;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,IAAI,CAAA;MACV,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;MACnB,IAAI,CAAC,OAAO,GAAG,KAAK;MACpB,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC;MAClC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC;IAC1B;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,MAAM,CAAA;MAAA,IAAA,MAAA;MAEZ,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,KAAK,EAAE;QAC1C;MACD;MAEA,IAAM,aAAa,GAAG,SAAhB,aAAa,CAAI,SAAsB,EAAE,OAA6B,EAAI;QAC/E,IAAI,iBAAK,CAAC,gBAAgB,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;UAC3C,IAAM,MAAM,GAAG,SAAS,CAAC,aAAa,CAAC,QAAQ,CAAC;UAEhD,IAAI,MAAM,IAAI,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,EAAE;YACnD,IAAI;cAAA,IAAA,qBAAA;cAEH,CAAA,qBAAA,GAAA,MAAM,CAAC,aAAa,cAAA,qBAAA,eAApB,qBAAA,CAAsB,QAAQ,CAAC,MAAM,EAAE;YACxC,CAAC,CAAC,OAAO,CAAC,EAAE;cAEX,OAAO,CAAC,IAAI,CAAC,wFAAwF,EAAE,CAAC,CAAC;cACzG,MAAI,CAAC,aAAa,CAAC,SAAS,EAAE,OAAO,CAAC;YACvC;UACD,CAAC,MAAM;YAEN,MAAI,CAAC,aAAa,CAAC,SAAS,EAAE,OAAO,CAAC;UACvC;QACD,CAAC,MAAM;UAEN,MAAI,CAAC,aAAa,CAAC,SAAS,EAAE,OAAO,CAAC;QACvC;MACD,CAAC;MAED,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;QACjC,IAAM,cAAc,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,UAAC,GAAG;UAAA,OAAK,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,CAAC;QAAA,EAAC;QAC3F,IAAI,cAAc,GAAG,CAAC,CAAC,EAAE;UACxB,IAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC;UAC3C,IAAM,iBAAiB,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,OAAO;UACnE,aAAa,CAAC,SAAS,CAAC,SAAS,EAAE,iBAAiB,CAAC;QACtD;MACD,CAAC,MAAM;QACN,aAAa,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC;MACpD;IACD;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,UAAU,CAAA;MAChB,IAAI,gBAA6B;MACjC,IAAM,cAAc,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,UAAC,GAAG;QAAA,OAAK,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,CAAC;MAAA,EAAC;MAE3F,IAAI,cAAc,GAAG,CAAC,CAAC,EAAE;QAExB,gBAAgB,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,SAAS;MACvD,CAAC,MAAM;QAEN,gBAAgB,GAAG,IAAI,CAAC,SAAS;MAClC;MAEA,IAAM,MAAM,GAAG,gBAAgB,CAAC,aAAa,CAAC,QAAQ,CAAC;MACvD,OAAO,MAAM,IAAI,gBAAgB;IAClC;EAAC;IAAA,GAAA;IAAA,KAAA,EAKO,SAAA,eAAe,CAAA;MACtB,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;QAGvB,IAAM,WAAW,GAAG,EAAE;QACtB,IAAI,CAAC,YAAY,GAAG,IAAI,0BAAa,CAAC,WAAW,CAAC;QAGlD,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC;UAAE,SAAS,EAAE,IAAI,CAAC;QAAS,CAAE,CAAC;QAClE,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE;MACzB;MACA,OAAO,IAAI,CAAC,YAAY;IACzB;EAAC;IAAA,GAAA;IAAA,KAAA,EAKM,SAAA,YAAY,CAAA,EAA4B;MAAA,IAA3B,OAAA,GAAA,SAAA,CAAA,MAAA,QAAA,SAAA,QAAA,SAAA,GAAA,SAAA,MAAyB,EAAE;MAE9C,IAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,QAAQ,CAAC;MACrD,IAAI,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE;QACnC,IAAM,OAAO,GAAG;UACf,IAAI,EAAE,qBAAqB;UAC3B,OAAO,EAAE;SACT;QAED,MAAM,CAAC,aAAa,CAAC,WAAW,CAAC,OAAO,EAAE,GAAG,CAAC;QAG9C,OAAO,CAAC,IAAI,CAAC,oGAAoG,CAAC;QAElH,OAAO,IAAW;MACnB;MAGA,IAAM,OAAO,GAAG,IAAI,CAAC,eAAe,EAAE;MAEtC,OAAO,CAAC,OAAO,GAAG,IAAI;MACtB,OAAO,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC;IACrC;EAAC;IAAA,GAAA;IAAA,KAAA,EAKM,SAAA,WAAW,CAAC,OAAqB;MACvC,IAAM,OAAO,GAAG,IAAI,CAAC,eAAe,EAAE;MAEtC,IAAM,UAAU,GAAkB;QAAE,OAAO,EAAE;MAAI,CAAE;MACnD,OAAO,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;IACzD;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,QAAQ,CAAA;MACd,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK;IAC1B;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,QAAQ,CAAC,KAAa;MAC5B,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,KAAK;MAC1B,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,iBAAK,CAAC,YAAY,CAAC,KAAK,CAAC;IACrD;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,OAAO,CAAC,IAAmB;MACjC,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI;MACxB,IAAI,CAAC,MAAM,CAAC,SAAS,GAAG,EAAE;MAC1B,IAAI,CAAC,IAAI,EAAE;MAEX,IAAI,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE;QAC7B,IAAM,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC;QACrC,CAAC,CAAC,SAAS,GAAG,IAAI;QAClB,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;MAC3B,CAAC,MAAM;QACN,IAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;QACzC,GAAG,CAAC,GAAG,GAAG,IAAI;QACd,GAAG,CAAC,GAAG,GAAG,aAAa;QACvB,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC;MAC7B;IACD;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,WAAW,CAAA;MACjB,IAAI,IAAI,CAAC,KAAK,KAAK,WAAW,EAAE;QAC/B,OAAO;UAAE,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;UAAE,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC;QAAC,CAAE;MACpD;MACA,OAAO;QAAE,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,UAAU;QAAE,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC;MAAS,CAAE;IACvD;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,WAAW,CAAC,CAAuC,EAAE,CAAuC;MAElG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;QAC5B,OAAO,CAAC,IAAI,CAAC,mEAAmE,CAAC;QACjF;MACD;MACA,IAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,qBAAqB,EAAE;MACjE,IAAM,QAAQ,GAAG,IAAI,CAAC,EAAE,CAAC,WAAW;MACpC,IAAM,SAAS,GAAG,IAAI,CAAC,EAAE,CAAC,YAAY;MAEtC,IAAI,MAAc;MAClB,IAAI,MAAc;MAGlB,QAAQ,CAAC;QACR,KAAK,MAAM;UACV,MAAM,GAAG,CAAC;UACV;QACD,KAAK,QAAQ;UACZ,MAAM,GAAG,CAAC,UAAU,CAAC,KAAK,GAAG,QAAQ,IAAI,CAAC;UAC1C;QACD,KAAK,OAAO;UACX,MAAM,GAAG,UAAU,CAAC,KAAK,GAAG,QAAQ;UACpC;QACD;UACC,MAAM,GAAG,CAAW;UACpB;MACF;MAGA,QAAQ,CAAC;QACR,KAAK,KAAK;UACT,MAAM,GAAG,CAAC;UACV;QACD,KAAK,QAAQ;UACZ,MAAM,GAAG,CAAC,UAAU,CAAC,MAAM,GAAG,SAAS,IAAI,CAAC;UAC5C;QACD,KAAK,QAAQ;UACZ,MAAM,GAAG,UAAU,CAAC,MAAM,GAAG,SAAS;UACtC;QACD;UACC,MAAM,GAAG,CAAW;UACpB;MACF;MAGA,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,MAAA,MAAA,CAAM,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,QAAQ,EAAE,MAAM,CAAC,EAAE,UAAU,CAAC,KAAK,GAAG,EAAE,CAAC,OAAI;MAC7F,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,MAAA,MAAA,CAAM,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,EAAE,UAAU,CAAC,MAAM,GAAG,EAAE,CAAC,OAAI;IACjF;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,OAAO,CAAA;MACb,IAAI,IAAI,CAAC,KAAK,KAAK,WAAW,EAAE;QAC/B,OAAO;UAAE,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK;UAAE,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC;QAAM,CAAE;MACtE;MACA,OAAO;QAAE,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,WAAW;QAAE,MAAM,EAAE,IAAI,CAAC,EAAE,CAAC;MAAY,CAAE;IACpE;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,OAAO,CAAC,KAAsB,EAAE,MAAuB;MAC7D,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,KAAK,GAAG,OAAO,KAAK,KAAK,QAAQ,MAAA,MAAA,CAAM,KAAK,UAAO,KAAK;MACtE,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,GAAG,OAAO,MAAM,KAAK,QAAQ,MAAA,MAAA,CAAM,MAAM,UAAO,MAAM;IAC3E;EAAC;AAAA,EAxgCwC,qBAAe;;;;;;;;;;;;;;;;;ACLzD,IAAA,OAAA,GAAA,OAAA;AACA,IAAA,OAAA,GAAA,OAAA;AACA,IAAA,MAAA,GAAA,OAAA;AACA,IAAA,UAAA,GAAA,sBAAA,CAAA,OAAA;AACA,IAAA,MAAA,GAAA,sBAAA,CAAA,OAAA;AACA,IAAA,OAAA,GAAA,sBAAA,CAAA,OAAA;AACA,IAAA,QAAA,GAAA,sBAAA,CAAA,OAAA;AAAoC,SAAA,2BAAA,CAAA,EAAA,CAAA,QAAA,CAAA,yBAAA,MAAA,IAAA,CAAA,CAAA,MAAA,CAAA,QAAA,KAAA,CAAA,qBAAA,CAAA,QAAA,KAAA,CAAA,OAAA,CAAA,CAAA,MAAA,CAAA,GAAA,2BAAA,CAAA,CAAA,MAAA,CAAA,IAAA,CAAA,uBAAA,CAAA,CAAA,MAAA,IAAA,CAAA,KAAA,CAAA,GAAA,CAAA,OAAA,EAAA,MAAA,CAAA,YAAA,EAAA,eAAA,CAAA,EAAA,CAAA,EAAA,CAAA,WAAA,EAAA,WAAA,EAAA,IAAA,CAAA,CAAA,MAAA,KAAA,IAAA,WAAA,IAAA,MAAA,KAAA,EAAA,CAAA,CAAA,EAAA,UAAA,CAAA,WAAA,EAAA,CAAA,UAAA,CAAA,KAAA,CAAA,EAAA,CAAA,gBAAA,SAAA,iJAAA,CAAA,EAAA,CAAA,OAAA,CAAA,gBAAA,CAAA,WAAA,EAAA,IAAA,CAAA,GAAA,CAAA,CAAA,IAAA,CAAA,CAAA,MAAA,CAAA,WAAA,EAAA,QAAA,CAAA,GAAA,CAAA,CAAA,IAAA,WAAA,CAAA,GAAA,CAAA,CAAA,IAAA,EAAA,CAAA,KAAA,CAAA,WAAA,EAAA,CAAA,IAAA,CAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,WAAA,EAAA,UAAA,CAAA,YAAA,CAAA,cAAA,CAAA,8BAAA,CAAA,QAAA,CAAA;AAAA,SAAA,4BAAA,CAAA,EAAA,CAAA,QAAA,CAAA,2BAAA,CAAA,SAAA,iBAAA,CAAA,CAAA,EAAA,CAAA,OAAA,CAAA,MAAA,QAAA,CAAA,IAAA,CAAA,CAAA,EAAA,KAAA,6BAAA,CAAA,IAAA,CAAA,CAAA,WAAA,KAAA,CAAA,GAAA,CAAA,CAAA,WAAA,CAAA,IAAA,aAAA,CAAA,cAAA,CAAA,GAAA,KAAA,CAAA,IAAA,CAAA,CAAA,oBAAA,CAAA,+CAAA,IAAA,CAAA,CAAA,IAAA,iBAAA,CAAA,CAAA,EAAA,CAAA;AAAA,SAAA,kBAAA,CAAA,EAAA,CAAA,aAAA,CAAA,IAAA,CAAA,GAAA,CAAA,CAAA,MAAA,MAAA,CAAA,GAAA,CAAA,CAAA,MAAA,YAAA,CAAA,MAAA,CAAA,GAAA,KAAA,CAAA,CAAA,GAAA,CAAA,GAAA,CAAA,EAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,CAAA,CAAA,CAAA,UAAA,CAAA;AAAA,SAAA,WAAA,CAAA,EAAA,CAAA,EAAA,CAAA,WAAA,CAAA,OAAA,gBAAA,aAAA,CAAA,OAAA,2BAAA,aAAA,CAAA,EAAA,yBAAA,KAAA,OAAA,CAAA,SAAA,CAAA,CAAA,EAAA,CAAA,YAAA,gBAAA,aAAA,CAAA,EAAA,WAAA,IAAA,CAAA,CAAA,KAAA,CAAA,CAAA,EAAA,CAAA;AAAA,SAAA,0BAAA,cAAA,CAAA,IAAA,OAAA,CAAA,SAAA,CAAA,OAAA,CAAA,IAAA,CAAA,OAAA,CAAA,SAAA,CAAA,OAAA,iCAAA,CAAA,aAAA,yBAAA,YAAA,0BAAA,aAAA,CAAA;AAAA,IAEf,aAAc,GAAA,OAAA,wBAAA,gBAAA;EAiBlC,SAAA,cAAY,aAAkC;IAAA,IAAA,KAAA;IAAA,IAAA,gBAAA,mBAAA,aAAA;IAC7C,KAAA,GAAA,UAAA,OAAA,aAAA;IAAQ,IAAA,gBAAA,aAAA,KAAA,eAjB8B,IAAI;IAAA,IAAA,gBAAA,aAAA,KAAA,aAEzB,IAAI,GAAG,EAAwB;IAAA,IAAA,gBAAA,aAAA,KAAA,mBACzB,IAAI;IAAA,IAAA,gBAAA,aAAA,KAAA,kBACgB,IAAI;IAAA,IAAA,gBAAA,aAAA,KAAA,mBACJ,IAAI;IAAA,IAAA,gBAAA,aAAA,KAAA,oBACvB,KAAK;IAAA,IAAA,gBAAA,aAAA,KAAA,sBAI8B,IAAI;IAAA,IAAA,gBAAA,aAAA,KAAA,uBACH,IAAI;IAAA,IAAA,gBAAA,aAAA,KAAA,oBAC/B,EAAE;IAAA,IAAA,gBAAA,aAAA,KAAA,qBAEwB,IAAI;IAI/D,KAAA,CAAK,YAAY,GAAG,aAAa;IAAC,OAAA,KAAA;EACnC;EAAC,IAAA,UAAA,aAAA,aAAA,EAAA,gBAAA;EAAA,WAAA,aAAA,aAAA,aAAA;IAAA,GAAA;IAAA,GAAA,EAKD,SAAA,IAAA,EAAwB;MACvB,OAAO,IAAI,CAAC,cAAc;IAC3B;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,iBAAiB,CAAC,OAA4B;MACpD,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,OAAO,CAAC;IAC1C;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,eAAe,CAAA;MACrB,OAAO,IAAI,CAAC,YAAY;IACzB;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,IAAI,CAAA;MAAA,IAAA,MAAA;MACV,IAAI,IAAI,CAAC,cAAc,EAAE;QACxB;MACD;MAEA,IAAI,QAAQ,GAAuB,IAAI;MACvC,IAAI,OAAO,IAAI,CAAC,YAAY,CAAC,SAAS,KAAK,QAAQ,EAAE;QACpD,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAc,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC;QAC3E,IAAI,CAAC,QAAQ,EAAE;UACd,MAAM,IAAI,mBAAW,sCAAA,MAAA,CAAqC,IAAI,CAAC,YAAY,CAAC,SAAS,sBAAkB,CAAC;QACzG;MACD,CAAC,MAAM,IAAI,IAAI,CAAC,YAAY,CAAC,SAAS,YAAY,WAAW,EAAE;QAC9D,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,SAAS;MACvC;MAGA,IAAI,CAAC,QAAQ,EAAE;QACd,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE;UACnB,MAAM,IAAI,mBAAW,CAAC,oGAAoG,CAAC;QAC5H;QACA,QAAQ,GAAG,QAAQ,CAAC,IAAI;MACzB;MAEA,IAAI,CAAC,QAAQ,CAAC,cAAc,IAAA,MAAA,CAAI,mBAAY,YAAS,CAAC,EAAE;QACvD,IAAM,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC;QAChD,QAAQ,CAAC,EAAE,MAAA,MAAA,CAAM,mBAAY,YAAS;QACtC,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,EAAE;QACxC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC;MACpC;MACA,IAAI,WAAW,GAAG,QAAQ,CAAC,aAAa,KAAA,MAAA,CAAkB,mBAAY,eAAY,CAAC;MACnF,IAAI,CAAC,WAAW,EAAE;QACjB,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;QAC3C,WAAW,CAAC,SAAS,MAAA,MAAA,CAAM,mBAAY,eAAY;QACnD,QAAQ,CAAC,WAAW,CAAC,WAAW,CAAC;MAClC;MACA,IAAI,CAAC,SAAS,GAAG,WAAW;MAE5B,IAAI,QAAQ,KAAK,QAAQ,CAAC,IAAI,EAAE;QAC/B,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,IAAA,MAAA,CAAI,mBAAY,eAAY,CAAC;QAGzD,IAAM,aAAa,GAAG,MAAM,CAAC,gBAAgB,CAAC,QAAQ,CAAC;QACvD,IAAI,aAAa,CAAC,QAAQ,KAAK,QAAQ,EAAE;UACxC,QAAQ,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU;QACrC;MACD;MAEA,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE;QAAA,QAE/B,qBAAqB,CAAC,YAAK;YAC1B,IAAM,QAAQ,GAAG,QAAQ,CAAC,aAAa;YAEvC,IAAI,CAAA,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,OAAO,MAAK,QAAQ,EAAE;cAEnC,IAAM,KAAK,GAAI,QAAwB,CAAC,OAAO,KAAA,MAAA,CAAkB,mBAAY,YAAS,CAAC;cACvF,IAAI,KAAK,EAAE;gBACV,IAAM,GAAG,GAAG,MAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC;gBAEtC,IAAI,GAAG,IAAI,MAAI,CAAC,YAAY,KAAK,GAAG,EAAE;kBACrC,GAAG,CAAC,KAAK,EAAE;gBACZ;cACD;YACD;UACD,CAAC;QAAC;MAAA,EACF;MACD,QAAQ,CAAC,gBAAgB,CACxB,aAAa,EACb;QAAA,OACC,qBAAqB,CAAC,YAAK;UAC1B,IAAM,QAAQ,GAAG,QAAQ,CAAC,aAAa;UACvC,IAAI,CAAA,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,OAAO,MAAK,QAAQ,EAAE;YACnC,IAAM,KAAK,GAAI,QAAwB,CAAC,OAAO,KAAA,MAAA,CAAkB,mBAAY,YAAS,CAAC;YACvF,IAAI,KAAK,EAAE;cACV,IAAM,GAAG,GAAG,MAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC;cACtC,IAAI,GAAG,IAAI,MAAI,CAAC,YAAY,KAAK,GAAG,EAAE;gBACrC,GAAG,CAAC,KAAK,EAAE;cACZ;YACD;UACD;QACD,CAAC,CAAC;MAAA,GACH,IAAI,CACJ;MAGD,IAAI,CAAC,SAAU,CAAC,gBAAgB,CAAC,aAAa,EAAE,UAAC,CAAe,EAAI;QAEnE,IAAI,CAAC,CAAC,MAAM,KAAK,MAAI,CAAC,SAAS,EAAE;UAChC,IAAI,MAAI,CAAC,YAAY,EAAE;YACtB,IAAM,MAAM,GAAG,MAAI,CAAC,YAAY;YAChC,MAAI,CAAC,YAAY,GAAG,IAAI;YACxB,MAAM,CAAC,IAAI,EAAE;UACd;QACD;MACD,CAAC,CAAC;MAEF,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE;QAAA,OAAM,MAAI,CAAC,eAAe,EAAE;MAAA,EAAC;MAEhE,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAC,KAAK,EAAI;QAE5C,IAAI,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,KAAK,qBAAqB,IAAI,IAAA,QAAA,aAAO,KAAK,CAAC,IAAI,CAAC,OAAO,MAAK,QAAQ,EAAE;UAEtG,IAAI,aAAa,GAAG,KAAK;UACzB,IAAI,YAAY,GAAwB,IAAI;UAAC,IAAA,SAAA,GAAA,0BAAA,CAC3B,MAAI,CAAC,OAAO,CAAC,MAAM,EAAE;YAAA,KAAA;UAAA;YAAvC,KAAA,SAAA,CAAA,CAAA,MAAA,KAAA,GAAA,SAAA,CAAA,CAAA,IAAA,IAAA,GAAyC;cAAA,IAA9B,GAAG,GAAA,KAAA,CAAA,KAAA;cACb,IAAM,MAAM,GAAG,GAAG,CAAC,EAAE,CAAC,aAAa,CAAC,QAAQ,CAAC;cAC7C,IAAI,MAAM,IAAI,MAAM,CAAC,aAAa,KAAK,KAAK,CAAC,MAAM,EAAE;gBACpD,aAAa,GAAG,IAAI;gBAEpB,YAAY,GAAG,GAAG;gBAClB;cACD;YACD;UAAC,SAAA,GAAA;YAAA,SAAA,CAAA,CAAA,CAAA,GAAA;UAAA;YAAA,SAAA,CAAA,CAAA;UAAA;UAED,IAAI,aAAa,EAAE;YAGlB,IAAI,YAAY,EAAE;cAEjB,YAAY,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC;YAC9C,CAAC,MAAM;cAEN,MAAI,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC;YACtC;UACD,CAAC,MAAM;YACN,OAAO,CAAC,IAAI,CAAC,wDAAwD,EAAE,KAAK,CAAC,MAAM,CAAC;UACrF;QACD;MACD,CAAC,CAAC;MAEF,IAAI,CAAC,cAAc,GAAG,IAAI;MAC1B,IAAI,CAAC,sBAAsB,EAAE;MAG7B,IAAI,CAAC,SAAU,CAAC,gBAAgB,CAAC,UAAU,EAAE,UAAC,CAAC,EAAI;QAAA,IAAA,eAAA;QAClD,KAAA,eAAA,GAAI,CAAC,CAAC,YAAY,cAAA,eAAA,eAAd,eAAA,CAAgB,KAAK,CAAC,QAAQ,CAAC,wBAAwB,CAAC,EAAE;UAC7D,CAAC,CAAC,cAAc,EAAE;QACnB;MACD,CAAC,CAAC;MAEF,IAAI,CAAC,SAAU,CAAC,gBAAgB,CAAC,MAAM,EAAE,UAAC,CAAC,EAAI;QAAA,IAAA,gBAAA,EAAA,gBAAA,EAAA,gBAAA;QAE9C,IAAM,QAAQ,GAAG,CAAC,CAAC,MAAqB;QACxC,IAAI,QAAQ,CAAC,OAAO,KAAA,MAAA,CAAK,mBAAY,YAAS,CAAC,EAAE;UAChD;QACD;QACA,CAAC,CAAC,cAAc,EAAE;QAElB,IAAM,WAAW,IAAA,gBAAA,GAAG,CAAC,CAAC,YAAY,cAAA,gBAAA,uBAAd,gBAAA,CAAgB,OAAO,CAAC,wBAAwB,CAAC;QACrE,IAAM,cAAc,IAAA,gBAAA,GAAG,CAAC,CAAC,YAAY,cAAA,gBAAA,uBAAd,gBAAA,CAAgB,OAAO,CAAC,qCAAqC,CAAC;QACrF,IAAM,WAAW,IAAA,gBAAA,GAAG,CAAC,CAAC,YAAY,cAAA,gBAAA,uBAAd,gBAAA,CAAgB,OAAO,CAAC,YAAY,CAAC;QAEzD,IAAI,WAAW,IAAI,cAAc,IAAI,WAAW,EAAE;UACjD,IAAM,YAAY,GAAG,MAAI,CAAC,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC;UACrD,IAAI,CAAC,YAAY,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,UAAU,CAAC,UAAU,EAAE;UAElE,IAAM,OAAO,GAAY,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC;UAChD,IAAM,MAAM,GAAY;YACvB,KAAK,EAAE,OAAO,CAAC,KAAK;YACpB,OAAO,EAAE,OAAO,CAAC;WACjB;UAED,IAAM,mBAAmB,GAAG,iBAAK,CAAC,SAAS,CAAC,YAAY,CAAC,OAAO,EAAE;YACjE,IAAI,EAAE,CAAC,MAAM,CAAC;YACd,CAAC,EAAE,CAAC,CAAC,OAAO;YACZ,CAAC,EAAE,CAAC,CAAC,OAAO;YACZ,KAAK,EAAE,YAAY,CAAC,OAAO,EAAE,CAAC,KAAK;YACnC,MAAM,EAAE,YAAY,CAAC,OAAO,EAAE,CAAC;WAC/B,CAAC;UAGF,MAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC;UAGtC,YAAY,CAAC,QAAQ,CAAC,QAAQ,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;QACjD;MACD,CAAC,CAAC;IACH;EAAC;IAAA,GAAA;IAAA,KAAA,EAGO,SAAA,sBAAsB,CAAA;MAAA,IAAA,MAAA;MAC7B,QAAQ,CAAC,gBAAgB,CACxB,SAAS,EACT,UAAC,CAAC,EAAI;QAAA,IAAA,qBAAA,EAAA,sBAAA;QAEL,IAAI,MAAI,CAAC,YAAY,CAAC,oBAAoB,EAAE;UAC3C,IAAM,QAAQ,GAAG,MAAI,CAAC,aAAa,CAAC,MAAI,CAAC,YAAY,CAAC,oBAAoB,CAAC;UAE3E,IAAI,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,KAAK,QAAQ,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC,OAAO,KAAK,QAAQ,CAAC,IAAI,IAAI,CAAC,CAAC,MAAM,KAAK,QAAQ,CAAC,GAAG,IAAI,CAAC,CAAC,QAAQ,KAAK,QAAQ,CAAC,KAAK,EAAE;YACpJ,CAAC,CAAC,cAAc,EAAE;YAClB,IAAM,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC,MAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;YAEjD,IAAM,YAAY,GAAG,MAAI,CAAC,YAAY,GAAG,OAAO,CAAC,SAAS,CAAC,UAAC,CAAC;cAAA,OAAK,CAAC,KAAK,MAAI,CAAC,YAAY;YAAA,EAAC,GAAG,CAAC,CAAC;YAC/F,IAAM,SAAS,GAAG,CAAC,YAAY,GAAG,CAAC,IAAI,OAAO,CAAC,MAAM;YAErD,IAAM,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC;YAC9B,IAAI,GAAG,CAAC,KAAK,KAAK,WAAW,EAAE;cAC9B,GAAG,CAAC,OAAO,EAAE;YACd;YACA,GAAG,CAAC,KAAK,EAAE;YACX;UACD;QACD;QAGA,IAAM,YAAY,GAAG,MAAI,CAAC,YAAY;QAGtC,IAAI,CAAC,YAAY,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,eAAe,EAAE;UAC3D;QACD;QAGA,IAAI,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,QAAQ,IAAI,EAAA,qBAAA,IAAA,sBAAA,GAAC,YAAY,CAAC,OAAO,CAAC,IAAI,cAAA,sBAAA,uBAAzB,sBAAA,CAA2B,MAAM,cAAA,qBAAA,cAAA,qBAAA,GAAI,CAAC,IAAI,CAAC,EAAE;UAE5E,IAAI,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE;YAC/B,CAAC,CAAC,cAAc,EAAE;YAClB,CAAC,CAAC,eAAe,EAAE;YAEnB,IAAM,MAAM,GAAG,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC;YAExD,IAAM,IAAI,GAAG,YAAY,CAAC,OAAO,EAAE;YACnC,IAAM,OAAO,GAAG,IAAI,CAAC,MAAM;YAC3B,IAAI,QAAQ,GAAG,CAAC,CAAC;YAEjB,IAAI,MAAM,IAAI,CAAC,IAAI,MAAM,IAAI,CAAC,EAAE;cAC/B,QAAQ,GAAG,MAAM,GAAG,CAAC;YACtB,CAAC,MAAM,IAAI,MAAM,KAAK,CAAC,EAAE;cACxB,QAAQ,GAAG,OAAO,GAAG,CAAC;YACvB;YAEA,IAAI,QAAQ,IAAI,CAAC,IAAI,QAAQ,GAAG,OAAO,EAAE;cACxC,YAAY,CAAC,WAAW,CAAC,QAAQ,CAAC;YACnC;YACA;UACD;QACD;QAGA,IAAM,oBAAmB,GAAG,SAAtB,mBAAmB,CAAI,SAAqB,EAAI;UAAA,IAAA,UAAA,GAAA,0BAAA,CAClC,SAAS;YAAA,MAAA;UAAA;YAA5B,KAAA,UAAA,CAAA,CAAA,MAAA,MAAA,GAAA,UAAA,CAAA,CAAA,IAAA,IAAA,GAA8B;cAAA,IAAnB,IAAI,GAAA,MAAA,CAAA,KAAA;cACd,IAAI,IAAI,CAAC,QAAQ,EAAE;gBAClB,IAAM,SAAQ,GAAG,MAAI,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC;gBAClD,IAAI,CAAC,CAAC,GAAG,CAAC,WAAW,EAAE,KAAK,SAAQ,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC,OAAO,KAAK,SAAQ,CAAC,IAAI,IAAI,CAAC,CAAC,MAAM,KAAK,SAAQ,CAAC,GAAG,IAAI,CAAC,CAAC,QAAQ,KAAK,SAAQ,CAAC,KAAK,EAAE;kBAAA,IAAA,YAAA;kBACpJ,CAAC,CAAC,cAAc,EAAE;kBAClB,CAAC,CAAC,eAAe,EAAE;kBACnB,CAAA,YAAA,GAAA,IAAI,CAAC,MAAM,cAAA,YAAA,eAAX,YAAA,CAAA,IAAA,CAAA,IAAI,EAAU,YAAa,CAAC;kBAC5B,OAAO,IAAI;gBACZ;cACD;cACA,IAAI,IAAI,CAAC,KAAK,IAAI,oBAAmB,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;gBAClD,OAAO,IAAI;cACZ;YACD;UAAC,SAAA,GAAA;YAAA,UAAA,CAAA,CAAA,CAAA,GAAA;UAAA;YAAA,UAAA,CAAA,CAAA;UAAA;UACD,OAAO,KAAK;QACb,CAAC;QAED,oBAAmB,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC;MAC/C,CAAC,EACD;QAAE,OAAO,EAAE;MAAK,CAAE,CAClB;IACF;EAAC;IAAA,GAAA;IAAA,KAAA,EAGO,SAAA,iBAAiB,CAAA;MACxB,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;QACzB,IAAI,CAAC,IAAI,EAAE;MACZ;IACD;EAAC;IAAA,GAAA;IAAA,KAAA,EAKO,SAAA,YAAY,CAAA;MACnB,OAAO,kBAAS,CAAC,OAAO,CAAC,cAAc,EAAE,UAAC,CAAC,EAAE,CAAC,EAAI;QACjD,QAAQ,CAAC;UACR,KAAK,QAAQ;YACZ,OAAO,mBAAY;QACrB;QACA,OAAO,CAAC;MACT,CAAC,CAAC;IACH;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,YAAY,CAAC,OAAsB;MAAA,IAAA,iBAAA;MACzC,IAAI,CAAC,iBAAiB,EAAE;MAExB,IAAM,QAAQ,IAAA,iBAAA,GAAG,OAAO,CAAC,QAAQ,cAAA,iBAAA,cAAA,iBAAA,GAAI,OAAO;MAE5C,IAAI,OAAO,CAAC,EAAE,IAAI,QAAQ,KAAK,QAAQ,EAAE;QACxC,IAAM,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC;QACjD,IAAI,cAAc,EAAE;UACnB,IAAI,QAAQ,KAAK,SAAS,EAAE;YAC3B,OAAO,cAAc;UACtB;UACA,IAAI,QAAQ,KAAK,OAAO,EAAE;YACzB,IAAI,cAAc,CAAC,KAAK,KAAK,WAAW,EAAE;cACzC,cAAc,CAAC,OAAO,EAAE;YACzB;YACA,cAAc,CAAC,KAAK,EAAE;YACtB,OAAO,cAAc;UACtB;QACD;MACD;MAEA,IAAM,eAAe,GAA4B,iBAAK,CAAC,SAAS,CAAC,qBAAa,EAAE,OAAO,CAAC;MACxF,IAAI,eAAe,CAAC,CAAC,KAAK,MAAM,IAAI,eAAe,CAAC,CAAC,KAAK,MAAM,EAAE;QACjE,IAAM,QAAQ,GAAG,eAAe,CAAC,KAAK;QACtC,IAAM,SAAS,GAAG,eAAe,CAAC,MAAM;QACxC,IAAM,aAAa,GAAG,IAAI,CAAC,SAAU,CAAC,qBAAqB,EAAE;QAE7D,IAAI,KAAa;QACjB,IAAI,KAAa;QAEjB,IAAI,IAAI,CAAC,gBAAgB,KAAK,IAAI,EAAE;UACnC,KAAK,GAAG,CAAC;UACT,KAAK,GAAG,CAAC;QACV,CAAC,MAAM;UAEN,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc;UACrD,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc;QACtD;QAGA,IAAI,KAAK,GAAG,QAAQ,GAAG,aAAa,CAAC,KAAK,EAAE;UAC3C,KAAK,GAAG,CAAC;QACV;QACA,IAAI,KAAK,GAAG,SAAS,GAAG,aAAa,CAAC,MAAM,EAAE;UAC7C,KAAK,GAAG,CAAC;QACV;QAGA,eAAe,CAAC,CAAC,GAAG,KAAK;QACzB,eAAe,CAAC,CAAC,GAAG,KAAK;QAGzB,IAAI,CAAC,gBAAgB,GAAG;UAAE,CAAC,EAAE,KAAK;UAAE,CAAC,EAAE;QAAK,CAAE;MAC/C;MAEA,IAAM,GAAG,GAAG,IAAI,mBAAY,CAAC,eAAe,EAAE,IAAI,CAAC;MACnD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC;MAC7B,aAAa,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC;MACzC,IAAI,CAAC,SAAU,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE,CAAC;MAEnC,GAAG,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,CAAC;MACrD,IAAI,eAAe,CAAC,KAAK,EAAE;QAC1B,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC;QACrB,GAAG,CAAC,KAAK,EAAE;MACZ,CAAC,MAAM;QAEN,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,MAAA,MAAA,CAAM,EAAE,IAAI,CAAC,aAAa,CAAE;MAChD;MACA,OAAO,GAAG;IACX;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,KAAK,CAAC,OAAqB;MAAA,IAAA,MAAA;MACjC,IAAI,CAAC,iBAAiB,EAAE;MACxB,IAAI,OAAsB;MAC1B,IAAM,aAAa,GAAkD;QACpE,EAAE,EAAE,CAAC;UAAE,IAAI,EAAE,IAAI;UAAE,KAAK,EAAE;QAAC,CAAE,CAAC;QAC9B,QAAQ,EAAE,CACT;UAAE,IAAI,EAAE,IAAI;UAAE,KAAK,EAAE;QAAC,CAAE,EACxB;UAAE,IAAI,EAAE,QAAQ;UAAE,KAAK,EAAE;QAAC,CAAE,CAC5B;QACD,GAAG,EAAE,CAAC;UAAE,IAAI,EAAE,KAAK;UAAE,KAAK,EAAE;QAAC,CAAE,CAAC;QAChC,KAAK,EAAE,CACN;UAAE,IAAI,EAAE,KAAK;UAAE,KAAK,EAAE;QAAC,CAAE,EACzB;UAAE,IAAI,EAAE,IAAI;UAAE,KAAK,EAAE;QAAC,CAAE,CACxB;QACD,WAAW,EAAE,CACZ;UAAE,IAAI,EAAE,KAAK;UAAE,KAAK,EAAE;QAAC,CAAE,EACzB;UAAE,IAAI,EAAE,IAAI;UAAE,KAAK,EAAE;QAAC,CAAE,EACxB;UAAE,IAAI,EAAE,QAAQ;UAAE,KAAK,EAAE;QAAC,CAAE,CAC5B;QACD,KAAK,EAAE,CAAC;UAAE,IAAI,EAAE,OAAO;UAAE,KAAK,EAAE;QAAC,CAAE,CAAC;QACpC,WAAW,EAAE,CACZ;UAAE,IAAI,EAAE,OAAO;UAAE,KAAK,EAAE;QAAC,CAAE,EAC3B;UAAE,IAAI,EAAE,QAAQ;UAAE,KAAK,EAAE;QAAC,CAAE,CAC5B;QACD,gBAAgB,EAAE,CACjB;UAAE,IAAI,EAAE,OAAO;UAAE,KAAK,EAAE;QAAC,CAAE,EAC3B;UAAE,IAAI,EAAE,OAAO;UAAE,KAAK,EAAE;QAAC,CAAE,EAC3B;UAAE,IAAI,EAAE,QAAQ;UAAE,KAAK,EAAE;QAAC,CAAE;OAE7B;MACD,IAAI,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;QACnC,OAAO,GAAG,OAAO,CAAC,OAAO;MAC1B,CAAC,MAAM;QACN,OAAO,GAAG,aAAa,CAAC,OAAO,CAAC,OAAO,IAAI,IAAI,CAAC,IAAI,aAAa,CAAC,EAAE;MACrE;MAEA,IAAI,SAAS,GAAkB,IAAI;MACnC,IAAM,aAAa,GAAG,SAAhB,aAAa,CAAI,MAAmB,EAAI;QAAA,IAAA,gBAAA;QAC7C,IAAI,SAAS,EAAE,YAAY,CAAC,SAAS,CAAC;QACtC,SAAS,GAAG,IAAI;QAChB,CAAA,gBAAA,GAAA,OAAO,CAAC,OAAO,cAAA,gBAAA,eAAf,gBAAA,CAAA,IAAA,CAAA,OAAO,EAAW,MAAM,CAAC;MAC1B,CAAC;MAED,IAAM,WAAW,mBAAA,MAAA,CAAkB,mBAAY,uBAAA,MAAA,CAAmB,iBAAK,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC,WAAQ;MAC7G,IAAM,WAAW,GAAG,OAAO,CAAC,GAAG,CAAC,UAAC,GAAG,EAAE,KAAK;QAAA,yBAAA,MAAA,CAAsB,mBAAY,mCAAA,MAAA,CAA8B,KAAK,iCAAA,MAAA,CAA0B,iBAAK,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC;MAAA,CAAK,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;MACrL,IAAM,WAAW,MAAA,MAAA,CAAM,WAAW,mBAAA,MAAA,CAAe,mBAAY,uBAAA,MAAA,CAAmB,WAAW,WAAQ;MAEnG,IAAM,UAAU,GAAkB;QACjC,EAAE,WAAA,MAAA,CAAW,iBAAK,CAAC,UAAU,EAAE,CAAE;QACjC,KAAK,EAAE,OAAO,CAAC,KAAK,IAAI,EAAE;QAC1B,IAAI,EAAE,OAAO,CAAC,IAAI;QAClB,UAAU,EAAE,KAAK;QACjB,UAAU,EAAE,KAAK;QACjB,OAAO,EAAE,IAAI;QACb,QAAQ,EAAE,IAAI;QACd,WAAW,EAAE,KAAK;QAClB,WAAW,EAAE,KAAK;QAClB,qBAAqB,EAAE,KAAK;QAC5B,eAAe,EAAE,KAAK;QACtB,OAAO,EAAE;UAAE,IAAI,EAAE;QAAW,CAAE;QAC9B,KAAK,EAAE,OAAO,CAAC,KAAK;QACpB,QAAQ,EAAE;OACV;MACD,IAAI,OAAO,CAAC,OAAO,EAAE,UAAU,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO;MACzD,IAAI,OAAO,CAAC,MAAM,EAAE,UAAU,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM;MAEtD,IAAI,OAAO,CAAC,SAAS,EAAE;QAAA,IAAA,eAAA,EAAA,gBAAA;QACtB,IAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC;QAC3C,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ;QAChC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU;QAChC,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,KAAK;QAC7B,IAAI,CAAC,SAAS,MAAA,MAAA,CAAM,mBAAY,mBAAgB;QAChD,IAAI,CAAC,SAAS,GAAG,iBAAK,CAAC,YAAY,CAAC,OAAO,CAAC,OAAO,CAAC;QACpD,CAAA,eAAA,OAAI,CAAC,SAAS,cAAA,eAAA,eAAd,eAAA,CAAgB,WAAW,CAAC,IAAI,CAAC;QACjC,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,GAAG,EAAE;QACxC,CAAA,gBAAA,OAAI,CAAC,SAAS,cAAA,gBAAA,eAAd,gBAAA,CAAgB,WAAW,CAAC,IAAI,CAAC;MAClC,CAAC,MAAM;QACN,UAAU,CAAC,KAAK,GAAG,GAAG;MACvB;MACA,UAAU,CAAC,MAAM,GAAG,GAAG;MAEvB,UAAU,CAAC,CAAC,GAAG,QAAQ;MACvB,UAAU,CAAC,CAAC,GAAG,QAAQ;MAEvB,IAAM,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC;MAEzC,IAAI,WAAW,GAAG,GAAG,CAAC,WAAW,EAAE;MACnC,IAAI,IAAI,CAAC,iBAAiB,IAAI,IAAI,CAAC,iBAAiB,CAAC,CAAC,KAAK,WAAW,CAAC,CAAC,IAAI,IAAI,CAAC,iBAAiB,CAAC,CAAC,KAAK,WAAW,CAAC,CAAC,EAAE;QACvH,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC;QAC/G,WAAW,GAAG,GAAG,CAAC,WAAW,EAAE;MAChC;MACA,IAAI,CAAC,iBAAiB,GAAG,WAAW;MACpC,GAAG,CAAC,kBAAkB,GAAG,aAAa;MAEtC,GAAG,CAAC,EAAE,CAAC,gBAAgB,KAAA,MAAA,CAAwB,mBAAY,kBAAe,CAAC,CAAC,OAAO,CAAC,UAAC,MAAM,EAAI;QAC9F,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,YAAK;UACrC,IAAM,KAAK,GAAG,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,KAAM,EAAE,EAAE,CAAC;UACjD,IAAM,MAAM,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,KAAK;UACnC,aAAa,CAAC,MAAM,CAAC;UACrB,GAAG,CAAC,KAAK,EAAE;QACZ,CAAC,CAAC;MACH,CAAC,CAAC;MAEF,IAAI,OAAO,CAAC,OAAO,IAAI,OAAO,CAAC,OAAO,GAAG,CAAC,EAAE;QAC3C,SAAS,GAAG,MAAM,CAAC,UAAU,CAAC,YAAK;UAClC,IAAI,MAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE;YAC7B,aAAa,CAAC,qBAAc,CAAC;YAC7B,GAAG,CAAC,KAAK,EAAE;UACZ;QACD,CAAC,EAAE,OAAO,CAAC,OAAO,CAAC;MACpB;MACA,OAAO,GAAG;IACX;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,aAAa,CAAC,EAAU;MAC9B,IAAI,CAAC,iBAAiB,EAAE;MACxB,IAAM,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC;MAChC,IAAI,GAAG,EAAE;QACR,GAAG,CAAC,EAAE,CAAC,MAAM,EAAE;QACf,IAAI,CAAC,OAAO,UAAO,CAAC,EAAE,CAAC;QACvB,aAAa,CAAC,UAAU,UAAO,CAAC,EAAE,CAAC;QACnC,IAAI,IAAI,CAAC,YAAY,KAAK,GAAG,EAAE;UAC9B,IAAI,CAAC,YAAY,GAAG,IAAI;UACxB,IAAM,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,CAAC,GAAG,EAAE;UACvD,IAAI,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC;QACvC;MACD;IACD;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,WAAW,CAAC,GAAiB;MAAA,IAAA,kBAAA;MACnC,IAAI,CAAC,iBAAiB,EAAE;MACxB,IAAI,IAAI,CAAC,YAAY,KAAK,GAAG,EAAE;MAG/B,CAAA,kBAAA,OAAI,CAAC,YAAY,cAAA,kBAAA,eAAjB,kBAAA,CAAmB,IAAI,EAAE;MACzB,IAAI,CAAC,YAAY,GAAG,GAAG;MACvB,GAAG,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,MAAA,MAAA,CAAM,EAAE,IAAI,CAAC,aAAa,CAAE;IAEhD;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,SAAS,CAAC,EAAU;MAC1B,IAAI,CAAC,iBAAiB,EAAE;MACxB,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC;IAC5B;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,oBAAoB,CAAC,OAAoB;MAC/C,IAAI,CAAC,iBAAiB,EAAE;MACxB,IAAM,KAAK,GAAG,OAAO,CAAC,OAAO,KAAA,MAAA,CAAkB,mBAAY,YAAS,CAAC;MACrE,IAAI,KAAK,aAAL,KAAK,eAAL,KAAK,CAAE,EAAE,EAAE;QACd,OAAO,aAAa,CAAC,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC;MAC9C;MACA,OAAO,SAAS;IACjB;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,eAAe,CAAA;MACrB,IAAI,CAAC,iBAAiB,EAAE;MACxB,OAAO,IAAI,CAAC,YAAY;IACzB;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,cAAc,CAAC,cAAsB;MAAA,IAAA,gBAAA;MAC3C,CAAA,gBAAA,OAAI,CAAC,SAAS,cAAA,gBAAA,eAAd,gBAAA,CAAgB,SAAS,CAAC,GAAG,IAAA,MAAA,CAAI,mBAAY,qBAAkB,CAAC;MAChE,IAAI,CAAC,eAAe,GAAG;QAAE,cAAc,EAAd;MAAc,CAAE;IAC1C;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,YAAY,CAAA;MAAA,IAAA,gBAAA;MAClB,CAAA,gBAAA,OAAI,CAAC,SAAS,cAAA,gBAAA,eAAd,gBAAA,CAAgB,SAAS,CAAC,MAAM,IAAA,MAAA,CAAI,mBAAY,qBAAkB,CAAC;MACnE,IAAI,CAAC,eAAe,GAAG,IAAI;IAC5B;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,eAAe,CAAC,CAAS,EAAE,CAAS,EAAE,SAA4B,EAAE,aAAsB;MAAA,IAAA,MAAA;MAChG,IAAI,CAAC,iBAAiB,EAAE;MACxB,IAAI,CAAC,eAAe,EAAE;MAEtB,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC;MACjD,IAAI,CAAC,aAAa,CAAC,SAAS,MAAA,MAAA,CAAM,mBAAY,kBAAe;MAE7D,SAAS,CAAC,OAAO,CAAC,UAAC,QAAQ,EAAI;QAC9B,IAAM,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC;QAC3C,IAAI,QAAQ,CAAC,SAAS,EAAE;UACvB,MAAM,CAAC,SAAS,GAAG,WAAW;QAC/B,CAAC,MAAM;UAAA,IAAA,cAAA;UACN,MAAM,CAAC,WAAW,IAAA,cAAA,GAAG,QAAQ,CAAC,IAAI,cAAA,cAAA,cAAA,cAAA,GAAI,EAAE;UACxC,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAC,CAAC,EAAI;YAAA,IAAA,gBAAA;YACtC,CAAC,CAAC,eAAe,EAAE;YACnB,CAAA,gBAAA,GAAA,QAAQ,CAAC,MAAM,cAAA,gBAAA,eAAf,gBAAA,CAAA,IAAA,CAAA,QAAQ,EAAU,aAAa,CAAC;YAChC,MAAI,CAAC,eAAe,EAAE;UACvB,CAAC,CAAC;QACH;QACA,MAAI,CAAC,aAAc,CAAC,WAAW,CAAC,MAAM,CAAC;MACxC,CAAC,CAAC;MAEF,IAAI,CAAC,SAAU,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC;MAE/C,IAAA,mBAAA,GAA6D,IAAI,CAAC,aAAa;QAA1D,SAAS,GAAA,mBAAA,CAAtB,WAAW;QAA2B,UAAU,GAAA,mBAAA,CAAxB,YAAY;MAC5C,IAAA,OAAA,GAA+D,MAAM;QAAjD,WAAW,GAAA,OAAA,CAAvB,UAAU;QAA4B,YAAY,GAAA,OAAA,CAAzB,WAAW;MAE5C,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,GAAG,SAAS,GAAG,WAAW,MAAA,MAAA,CAAM,WAAW,GAAG,SAAS,aAAA,MAAA,CAAU,CAAC,OAAI;MACvG,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,GAAG,UAAU,GAAG,YAAY,MAAA,MAAA,CAAM,YAAY,GAAG,UAAU,aAAA,MAAA,CAAU,CAAC,OAAI;IAC3G;EAAC;IAAA,GAAA;IAAA,KAAA,EAEM,SAAA,eAAe,CAAA;MAAA,IAAA,oBAAA;MACrB,CAAA,oBAAA,OAAI,CAAC,aAAa,cAAA,oBAAA,eAAlB,oBAAA,CAAoB,MAAM,EAAE;MAC5B,IAAI,CAAC,aAAa,GAAG,IAAI;IAC1B;EAAC;IAAA,GAAA;IAAA,KAAA,EAMO,SAAA,aAAa,CAAC,QAAgB;MACrC,IAAM,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC;MAChC,IAAM,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,IAAI,EAAE;MAC5B,IAAM,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;MAClC,IAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC;MAChC,IAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;MACpC,OAAO;QAAE,IAAI,EAAJ,IAAI;QAAE,GAAG,EAAH,GAAG;QAAE,KAAK,EAAL,KAAK;QAAE,GAAG,EAAH;MAAG,CAAE;IACjC;EAAC;AAAA,EA9lByC,qBAAe;AAAA,IAAA,gBAAA,aAArC,aAAc,gBAEN,IAAI,GAAG,EAAwB;;;;;;;;;;ACV5D,IAAA,OAAA,GAAA,OAAA;AACA,IAAA,MAAA,GAAA,OAAA;AACA,IAAA,eAAA,GAAA,sBAAA,CAAA,OAAA;AACA,IAAA,MAAA,GAAA,sBAAA,CAAA,OAAA;AACA,IAAA,QAAA,GAAA,OAAA;AAAwC,IAAA,SAAA;AAExC,IAAM,OAAO,GAAI,EAAA,SAAA,GAAA,QAAQ,cAAA,SAAA,gBAAA,SAAA,GAAR,SAAA,CAAU,aAAmC,cAAA,SAAA,uBAA7C,SAAA,CAA+C,GAAG,KAAI,EAAE;AAEzE,IAAM,YAAY,GAAwB;EACzC,oBAAoB,EAAE,QAAQ;EAC9B,WAAW,EAAE;CACb;AAGD,IAAM,OAAO,GAAG,IAAI,0BAAa,CAAC,YAAY,CAAC;AAG/C,IAAM,GAAG,GAAc;EAOtB,IAAI,EAAE,SAAN,IAAI,CAAA,EAA8C;IAAA,IAA3C,OAAA,GAAA,SAAA,CAAA,MAAA,QAAA,SAAA,QAAA,SAAA,GAAA,SAAA,MAA+B,EAAE;IACvC,GAAG,CAAC,eAAe,CAAC,OAAO,CAAC;IAC5B,OAAO,CAAC,IAAI,EAAE;EACf,CAAC;EAKD,YAAY,EAAE,SAAd,YAAY,CAAA,EAA2C;IAAA,IAAxC,OAAA,GAAA,SAAA,CAAA,MAAA,QAAA,SAAA,QAAA,SAAA,GAAA,SAAA,MAAyB,EAAE;IACzC,OAAO,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC;EACrC,CAAC;EAKD,WAAW,EAAE,SAAb,WAAW,CAAG,OAAqB,EAAa;IAC/C,OAAO,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC;EAC9B,CAAC;EAKD,SAAS,EAAE,SAAX,SAAS,CAAG,EAAU,EAAyB;IAC9C,OAAO,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC;EAC7B,CAAC;EAKD,oBAAoB,EAAE,SAAtB,oBAAoB,CAAG,OAAoB,EAAyB;IACnE,OAAO,OAAO,CAAC,oBAAoB,CAAC,OAAO,CAAC;EAC7C,CAAC;EAKD,eAAe,EAAE,SAAjB,eAAe,CAAA,EAAuB;IACrC,OAAO,OAAO,CAAC,eAAe,EAAE;EACjC,CAAC;EAKD,gBAAgB,EAAE,SAAlB,gBAAgB,CAAG,OAAsB,EAAU;IAClD,iBAAK,CAAC,SAAS,CAAC,qBAAa,EAAE,OAAO,CAAC;EACxC,CAAC;EAKD,eAAe,EAAE,SAAjB,eAAe,CAAG,OAA4B,EAAU;IAEvD,IAAI,OAAO,CAAC,aAAa,IAAI,OAAO,CAAC,SAAS,EAAE;MAC/C,OAAO,CAAC,IAAI,CAAC,+DAA+D,CAAC;MAC7E,OAAO,OAAO,CAAC,SAAS;IACzB;IACA,MAAM,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC;IACpC,OAAO,CAAC,iBAAiB,CAAC,YAAY,CAAC;EACxC,CAAC;EAKD,IAAI,OAAO,CAAA;IACV,OAAO,oBAAW;EACnB,CAAC;EAKD,oBAAoB,EAAE,qBAAc;EAIpC,yBAAyB,EAAE;CAC3B;AAGD,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;EAClC,MAAM,CAAC,MAAM,GAAG,GAAG;AACpB;AAAC,IAAA,QAAA,GAAA,OAAA,cAGc,GAAG;;;;;;;;;;;;IC7GG,eAAe,GAAA,OAAA,kBAAA,aAAA,sBAAA,gBAAA;EAAA,IAAA,gBAAA,mBAAA,eAAA;AAAA;;;;;;;;;;;;;;;;ACApC,IAAA,UAAA,GAAA,sBAAA,CAAA,OAAA;AAA0C,SAAA,QAAA,CAAA,EAAA,CAAA,QAAA,CAAA,GAAA,MAAA,CAAA,IAAA,CAAA,CAAA,OAAA,MAAA,CAAA,qBAAA,QAAA,CAAA,GAAA,MAAA,CAAA,qBAAA,CAAA,CAAA,GAAA,CAAA,KAAA,CAAA,GAAA,CAAA,CAAA,MAAA,WAAA,CAAA,WAAA,MAAA,CAAA,wBAAA,CAAA,CAAA,EAAA,CAAA,EAAA,UAAA,OAAA,CAAA,CAAA,IAAA,CAAA,KAAA,CAAA,CAAA,EAAA,CAAA,YAAA,CAAA;AAAA,SAAA,cAAA,CAAA,aAAA,CAAA,MAAA,CAAA,GAAA,SAAA,CAAA,MAAA,EAAA,CAAA,UAAA,CAAA,WAAA,SAAA,CAAA,CAAA,IAAA,SAAA,CAAA,CAAA,QAAA,CAAA,OAAA,OAAA,CAAA,MAAA,CAAA,CAAA,OAAA,OAAA,WAAA,CAAA,QAAA,gBAAA,aAAA,CAAA,EAAA,CAAA,EAAA,CAAA,CAAA,CAAA,SAAA,MAAA,CAAA,yBAAA,GAAA,MAAA,CAAA,gBAAA,CAAA,CAAA,EAAA,MAAA,CAAA,yBAAA,CAAA,CAAA,KAAA,OAAA,CAAA,MAAA,CAAA,CAAA,GAAA,OAAA,WAAA,CAAA,IAAA,MAAA,CAAA,cAAA,CAAA,CAAA,EAAA,CAAA,EAAA,MAAA,CAAA,wBAAA,CAAA,CAAA,EAAA,CAAA,iBAAA,CAAA;AAAA,SAAA,WAAA,CAAA,EAAA,CAAA,EAAA,CAAA,WAAA,CAAA,OAAA,gBAAA,aAAA,CAAA,OAAA,2BAAA,aAAA,CAAA,EAAA,yBAAA,KAAA,OAAA,CAAA,SAAA,CAAA,CAAA,EAAA,CAAA,YAAA,gBAAA,aAAA,CAAA,EAAA,WAAA,IAAA,CAAA,CAAA,KAAA,CAAA,CAAA,EAAA,CAAA;AAAA,SAAA,0BAAA,cAAA,CAAA,IAAA,OAAA,CAAA,SAAA,CAAA,OAAA,CAAA,IAAA,CAAA,OAAA,CAAA,SAAA,CAAA,OAAA,iCAAA,CAAA,aAAA,yBAAA,YAAA,0BAAA,aAAA,CAAA;AAAA,IAErB,KAAM,GAAA,OAAA,wBAAA,gBAAA;EAAA,SAAA,MAAA;IAAA,IAAA,gBAAA,mBAAA,KAAA;IAAA,OAAA,UAAA,OAAA,KAAA,EAAA,SAAA;EAAA;EAAA,IAAA,UAAA,aAAA,KAAA,EAAA,gBAAA;EAAA,WAAA,aAAA,aAAA,KAAA;IAAA,GAAA;IAAA,KAAA,EAMnB,SAAO,UAAU,CAAA,EAAuB;MAAA,IAAtB,MAAA,GAAA,SAAA,CAAA,MAAA,QAAA,SAAA,QAAA,SAAA,GAAA,SAAA,MAAiB,KAAK;MAC9C,UAAA,MAAA,CAAU,MAAM,OAAA,MAAA,CAAI,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC;IAC/D;EAAC;IAAA,GAAA;IAAA,KAAA,EAKM,SAAO,SAAS,CAAqC,MAAS,EAAE,MAAS;MAC/E,IAAM,MAAM,GAAA,aAAA,KAAQ,MAAM,CAAW;MAErC,KAAK,IAAM,GAAG,IAAI,MAAM,EAAE;QACzB,IAAI,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,EAAE;UACtD,IAAM,WAAW,GAAG,MAAM,CAAC,GAAG,CAAC;UAC/B,IAAM,WAAW,GAAI,MAAc,CAAC,GAAG,CAAC;UAExC,IAAI,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,EAAE;YAE9B,MAAc,CAAC,GAAG,CAAC,GAAG,WAAW;UACnC,CAAC,MAAM,IAAI,WAAW,YAAY,MAAM,IAAI,OAAO,WAAW,KAAK,UAAU,IAAI,WAAW,YAAY,MAAM,EAAE;YAC9G,MAAc,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,WAAW,CAAC;UAChE,CAAC,MAAM;YACL,MAAc,CAAC,GAAG,CAAC,GAAG,WAAW;UACnC;QACD;MACD;MAEA,OAAO,MAAM;IACd;EAAC;IAAA,GAAA;IAAA,KAAA,EAOM,SAAO,gBAAgB,CAAmB,GAAkB;MAClE,IAAI,CAAC,GAAG,EAAE,OAAO,KAAK;MACtB,KAAK,IAAM,CAAC,IAAI,GAAG,EAAE,OAAO,IAAI;MAChC,OAAO,KAAK;IACb;EAAC;IAAA,GAAA;IAAA,KAAA,EAOM,SAAO,YAAY,CAAC,GAAW;MACrC,IAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC;MAC1C,IAAI,CAAC,WAAW,GAAG,GAAG;MACtB,OAAO,IAAI,CAAC,SAAS;IACtB;EAAC;AAAA,EAvDiC,qBAAe;;;;;;;;;ACFlD,IAAM,SAAS,srgBAklBd;AAAC,IAAA,QAAA,GAAA,OAAA,cAEa,SAAS;;;;;;;;;ACnlBjB,IAAM,WAAW,GAAA,OAAA,CAAA,WAAA,GAAG,UAAU",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",
    "function _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _arrayWithoutHoles(r) {\n  if (Array.isArray(r)) return arrayLikeToArray(r);\n}\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "function _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nmodule.exports = _assertThisInitialized, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "function _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "var isNativeReflectConstruct = require(\"./isNativeReflectConstruct.js\");\nvar setPrototypeOf = require(\"./setPrototypeOf.js\");\nfunction _construct(t, e, r) {\n  if (isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments);\n  var o = [null];\n  o.push.apply(o, e);\n  var p = new (t.bind.apply(t, o))();\n  return r && setPrototypeOf(p, r.prototype), p;\n}\nmodule.exports = _construct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "function _getPrototypeOf(t) {\n  return module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n    return t.__proto__ || Object.getPrototypeOf(t);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _getPrototypeOf(t);\n}\nmodule.exports = _getPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "var setPrototypeOf = require(\"./setPrototypeOf.js\");\nfunction _inherits(t, e) {\n  if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\");\n  t.prototype = Object.create(e && e.prototype, {\n    constructor: {\n      value: t,\n      writable: !0,\n      configurable: !0\n    }\n  }), Object.defineProperty(t, \"prototype\", {\n    writable: !1\n  }), e && setPrototypeOf(t, e);\n}\nmodule.exports = _inherits, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "function _interopRequireDefault(e) {\n  return e && e.__esModule ? e : {\n    \"default\": e\n  };\n}\nmodule.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "function _isNativeFunction(t) {\n  try {\n    return -1 !== Function.toString.call(t).indexOf(\"[native code]\");\n  } catch (n) {\n    return \"function\" == typeof t;\n  }\n}\nmodule.exports = _isNativeFunction, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "function _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (module.exports = _isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports)();\n}\nmodule.exports = _isNativeReflectConstruct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "function _iterableToArray(r) {\n  if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n}\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "var _typeof = require(\"./typeof.js\")[\"default\"];\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\nfunction _possibleConstructorReturn(t, e) {\n  if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e;\n  if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\");\n  return assertThisInitialized(t);\n}\nmodule.exports = _possibleConstructorReturn, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "function _setPrototypeOf(t, e) {\n  return module.exports = _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _setPrototypeOf(t, e);\n}\nmodule.exports = _setPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\nvar iterableToArray = require(\"./iterableToArray.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\nfunction _toConsumableArray(r) {\n  return arrayWithoutHoles(r) || iterableToArray(r) || unsupportedIterableToArray(r) || nonIterableSpread();\n}\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nmodule.exports = toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nmodule.exports = toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? arrayLikeToArray(r, a) : void 0;\n  }\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "var getPrototypeOf = require(\"./getPrototypeOf.js\");\nvar setPrototypeOf = require(\"./setPrototypeOf.js\");\nvar isNativeFunction = require(\"./isNativeFunction.js\");\nvar construct = require(\"./construct.js\");\nfunction _wrapNativeSuper(t) {\n  var r = \"function\" == typeof Map ? new Map() : void 0;\n  return module.exports = _wrapNativeSuper = function _wrapNativeSuper(t) {\n    if (null === t || !isNativeFunction(t)) return t;\n    if (\"function\" != typeof t) throw new TypeError(\"Super expression must either be null or a function\");\n    if (void 0 !== r) {\n      if (r.has(t)) return r.get(t);\n      r.set(t, Wrapper);\n    }\n    function Wrapper() {\n      return construct(t, arguments, getPrototypeOf(this).constructor);\n    }\n    return Wrapper.prototype = Object.create(t.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: !1,\n        writable: !0,\n        configurable: !0\n      }\n    }), setPrototypeOf(Wrapper, t);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _wrapNativeSuper(t);\n}\nmodule.exports = _wrapNativeSuper, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;",
    "import { WindowOptions } from \"./types\";\n\n// Partial<WindowOptions>ではなく、全てのキーを定義して型安全にする\nexport const defaultConfig: Required<WindowOptions> = {\n\tid: null,\n\tifExists: \"focus\",\n\ttitle: \"New Window\",\n\ticon: null,\n\tx: \"auto\",\n\ty: \"auto\",\n\twidth: 500,\n\theight: 400,\n\tminWidth: 200,\n\tminHeight: 150,\n\tresizableX: true,\n\tresizableY: true,\n\tmovable: true,\n\tclosable: true,\n\tminimizable: true,\n\tmaximizable: true,\n\tmaximizableOnDblClick: true,\n\tenableShortcuts: true,\n\tcontrolsPosition: \"right\",\n\tcontent: {\n\t\thtml: \"\",\n\t\tiframe: {\n\t\t\tsrc: \"\",\n\t\t\tsrcdoc: \"\",\n\t\t\tallow: \"\",\n\t\t\treferrerPolicy: \"\",\n\t\t\tloading: \"lazy\",\n\t\t\tsandbox: \"\",\n\t\t\tloadWinLet: false,\n\t\t},\n\t\ttemplate: \"\",\n\t},\n\tmenu: [],\n\tmenuStyle: \"default\",\n\ttabs: [],\n\ttabStyle: \"default\",\n\ttabOptions: {\n\t\treorderable: false,\n\t\tclosable: false,\n\t\taddable: false,\n\t\tdetachable: false,\n\t\tmergeable: false,\n\t\tallowIncomingMerge: false,\n\t\tonAdd: undefined,\n\t\tonMergeAttempt: undefined,\n\t},\n\tcontextMenu: [],\n\tfocus: true,\n\tonOpen: () => {},\n\tonClose: () => {},\n\tonFocus: () => {},\n\tonBlur: () => {},\n\tonResize: () => {},\n\tonMove: () => {},\n\tonReload: () => {},\n\n\t_isPopup: false,\n\t_parent: null,\n};\n",
    "interface ErrorConstructor {\n\tcaptureStackTrace?(targetObject: object, constructorOpt?: Function): void;\n}\n\n/**\n * すべてのカスタムエラーの基底クラス\n */\nexport class WinLetBaseError extends Error {\n\tconstructor(message: string) {\n\t\tsuper(message);\n\t\tthis.name = this.constructor.name;\n\n\t\tconst BuiltInError: ErrorConstructor = Error as ErrorConstructor;\n\t\tif (BuiltInError.captureStackTrace) {\n\t\t\tBuiltInError.captureStackTrace(this, this.constructor);\n\t\t}\n\t}\n}\n\n/**\n * 単純なメッセージのみのエラー\n */\nexport class SimpleError extends WinLetBaseError {\n\tconstructor(message: string) {\n\t\tsuper(message);\n\t}\n}\n\nexport class WinLetError extends SimpleError {}\n",
    "export const LIBRARY_NAME = \"winlet\";\n\nexport type WindowState = \"normal\" | \"minimized\" | \"maximized\";\n\nexport interface WindowContentOptions {\n\t/**\n\t * 直接埋め込むHTML\n\t */\n\thtml?: string;\n\t/**\n\t * iframe設定\n\t */\n\tiframe?: {\n\t\tsrc?: HTMLIFrameElement[\"src\"];\n\t\tsrcdoc?: HTMLIFrameElement[\"srcdoc\"];\n\t\tallow?: HTMLIFrameElement[\"allow\"];\n\t\treferrerPolicy?: HTMLIFrameElement[\"referrerPolicy\"];\n\t\tloading?: HTMLIFrameElement[\"loading\"];\n\t\tsandbox?: string[] | string;\n\t\t/**\n\t\t * srcdocで生成されるiframe内にWinLetライブラリ自身を読み込むかどうか。\n\t\t * trueにする場合、GlobalConfigOptionsでlibraryPathを指定する必要があります。\n\t\t */\n\t\tloadWinLet?: boolean;\n\t};\n\t/**\n\t * HTMLテンプレートのselector\n\t */\n\ttemplate?: string;\n}\n\n// IWindowインターフェースを先に定義することで循環参照を回避\nexport interface IWindow {\n\treadonly id: string;\n\toptions: Required<WindowOptions>;\n\tel: HTMLElement;\n\tstate: WindowState;\n\n\t// --- Public API ---\n\tclose(): void;\n\tminimize(): void;\n\ttoggleMaximize(): void;\n\tmaximize(): void;\n\trestore(): void;\n\tfocus(): void;\n\tblur(): void;\n\tgetTitle(): string;\n\tsetTitle(title: string): void;\n\tsetIcon(icon: string | null): void;\n\tgetPosition(): { x: number; y: number };\n\tsetPosition(x: number | \"center\" | \"left\" | \"right\" | \"auto\", y: number | \"center\" | \"top\" | \"bottom\" | \"auto\"): void;\n\tgetSize(): { width: number; height: number };\n\tsetSize(width: number | string, height: number | string): void;\n\treload(): void;\n\n\t/**\n\t * ウィンドウのコンテンツ要素（またはiframe要素）を取得します。\n\t * @returns コンテンツを内包するHTMLElement、またはiframeウィンドウの場合はHTMLIFrameElement\n\t */\n\tgetContent(): HTMLElement | HTMLIFrameElement;\n\n\t/**\n\t * このウィンドウの内部に新しいウィンドウを作成します。\n\t * @param options - 新しいウィンドウのオプション\n\t * @returns 作成されたIWindowインスタンス\n\t */\n\tcreateWindow(options?: WindowOptions): IWindow;\n\n\t/**\n\t * このウィンドウの内部に新しいポップアップを作成します。\n\t * @param options - 新しいポップアップのオプション\n\t * @returns 作成されたIWindowインスタンス\n\t */\n\tcreatePopup(options: PopupOptions): IWindow;\n}\n\nexport interface MenuItem {\n\tname?: string;\n\taction?: (win: IWindow) => void;\n\titems?: MenuItem[];\n\tseparator?: boolean;\n\tshortcut?: string;\n}\n\nexport interface TabItem {\n\ttitle: string;\n\tcontent: WindowContentOptions;\n}\n\nexport interface ContextMenuItem {\n\tname?: string;\n\taction?: (win: IWindow) => void;\n\tseparator?: boolean;\n}\n\nexport interface WindowOptions {\n\t/**\n\t * ウィンドウのID\n\t */\n\tid?: string | null;\n\t/**\n\t * 既に同名のウィンドウが存在する場合の動作\n\t *\n\t * focus (デフォルト): 既存のウィンドウを復元し、フォーカスします。\n\t * prevent: 新しいウィンドウを作成せず、処理を中断します。\n\t * create: IDの重複を無視して、常に新しいウィンドウを作成します。\n\t */\n\tifExists?: \"focus\" | \"prevent\" | \"create\";\n\t/**\n\t * ウィンドウのタイトル\n\t */\n\ttitle?: string;\n\t/**\n\t * ウィンドウのアイコン\n\t *\n\t * url / font-awesomeのクラス名の指定可能\n\t */\n\ticon?: string | null;\n\t/**\n\t * ウィンドウのX座標\n\t */\n\tx?: number | \"center\" | \"left\" | \"right\" | \"auto\";\n\t/**\n\t * ウィンドウのY座標\n\t */\n\ty?: number | \"center\" | \"top\" | \"bottom\" | \"auto\";\n\t/**\n\t * ウィンドウのサイズX\n\t */\n\twidth?: number;\n\t/**\n\t * ウィンドウのサイズY\n\t */\n\theight?: number;\n\t/**\n\t * ウィンドウの最小サイズX\n\t */\n\tminWidth?: number;\n\t/**\n\t * ウィンドウの最小サイズY\n\t */\n\tminHeight?: number;\n\t/**\n\t * 水平方向のリサイズ\n\t */\n\tresizableX?: boolean;\n\t/**\n\t * 垂直方向のリサイズ\n\t */\n\tresizableY?: boolean;\n\t/**\n\t * ウィンドウの移動\n\t */\n\tmovable?: boolean;\n\t/**\n\t * ウィンドウを閉じるボタンの表示\n\t */\n\tclosable?: boolean;\n\t/**\n\t * ウィンドウを最小化するボタンの表示\n\t */\n\tminimizable?: boolean;\n\t/**\n\t * ウィンドウを最大化するボタンの表示\n\t */\n\tmaximizable?: boolean;\n\t/**\n\t * タイトルバーのダブルクリックで最大化\n\t */\n\tmaximizableOnDblClick?: boolean;\n\t/**\n\t * ショートカットキーを有効化\n\t */\n\tenableShortcuts?: boolean;\n\t/**\n\t * コントロールの位置\n\t */\n\tcontrolsPosition?: \"left\" | \"right\";\n\t/**\n\t * ウィンドウのコンテンツ\n\t */\n\tcontent?: WindowContentOptions;\n\t/**\n\t * メニュー\n\t */\n\tmenu?: MenuItem[];\n\t/**\n\t * メニューの表示形式\n\t * - default: 通常のメニューバー\n\t * - merged: タイトルバーに統合\n\t */\n\tmenuStyle?: \"default\" | \"merged\";\n\t/**\n\t * タブ\n\t */\n\ttabs?: TabItem[];\n\t/**\n\t * タブの表示形式\n\t * - default: 通常のタブバー\n\t * - merged: タイトルバーに統合されたChrome風タブ\n\t */\n\ttabStyle?: \"default\" | \"merged\";\n\ttabOptions?: {\n\t\t/**\n\t\t * タブの入れ替え\n\t\t */\n\t\treorderable?: boolean;\n\t\t/**\n\t\t * タブを閉じるボタン\n\t\t */\n\t\tclosable?: boolean;\n\t\t/**\n\t\t * タブ追加ボタン\n\t\t */\n\t\taddable?: boolean;\n\t\t/**\n\t\t * タブをドラッグして新しいウィンドウとして分離できるようにするか\n\t\t */\n\t\tdetachable?: boolean;\n\t\t/**\n\t\t * タブを別の既存のウィンドウにマージすることができます。\n\t\t */\n\t\tmergeable?: boolean;\n\t\t/**\n\t\t * このウィンドウが他のウィンドウからマージされたタブを受け入れることができます。\n\t\t */\n\t\tallowIncomingMerge?: boolean;\n\t\t/**\n\t\t * 追加ボタン押下時の処理\n\t\t */\n\t\tonAdd?: (win: IWindow) => TabItem;\n\t\t/**\n\t\t * マージが許可されているかどうかを動的に決定するコールバック関数。\n\t\t * @param sourceWindow タブの元ウィンドウ\n\t\t * @param targetWindow ドロップされたタブのウィンドウ\n\t\t * @returns true:マージ許可 false:マージ禁止\n\t\t */\n\t\tonMergeAttempt?: (sourceWindow: IWindow, targetWindow: IWindow) => boolean;\n\t};\n\t/**\n\t * 右クリックメニュー\n\t */\n\tcontextMenu?: ContextMenuItem[];\n\t/**\n\t * 作成時にウィンドウにフォーカスを当てるか\n\t */\n\tfocus?: boolean;\n\t/**\n\t * ウィンドウオープン時\n\t */\n\tonOpen?: (win: IWindow) => void;\n\t/**\n\t * ウィンドウクローズ時\n\t */\n\tonClose?: (win: IWindow) => void;\n\t/**\n\t * ウィンドウフォーカス時\n\t */\n\tonFocus?: (win: IWindow) => void;\n\t/**\n\t * ウィンドウブラー時\n\t */\n\tonBlur?: (win: IWindow) => void;\n\t/**\n\t * ウィンドウリサイズ時\n\t */\n\tonResize?: (win: IWindow) => void;\n\t/**\n\t * ウィンドウ移動時\n\t */\n\tonMove?: (win: IWindow) => void;\n\t/**\n\t * ウィンドウリロード時\n\t *\n\t * デフォルトのリロード動作（iframeの再読み込みやhtmlの再描画）をキャンセルする場合は `false` を返します。\n\t */\n\tonReload?: (win: IWindow) => boolean | void;\n\n\t// 内部利用フラグ\n\t_isPopup?: boolean;\n\t/**\n\t * 親ウィンドウのインスタンス (内部利用)\n\t */\n\t_parent?: IWindow | null;\n}\n\n// --- Popup ---\nexport const TIMEOUT_RESULT = Symbol(\"timeout\");\nexport const CLOSE_BUTTON_RESULT = Symbol(\"close\");\n\nexport type PopupResult = string | number | symbol | null;\n\nexport interface PopupButton {\n\ttext: string;\n\tvalue: PopupResult;\n}\n\nexport type PopupButtonPreset = \"Ok\" | \"OkCancel\" | \"Yes\" | \"YesNo\" | \"YesNoCancel\" | \"Retry\" | \"RetryCancel\" | \"AbortRetryIgnore\";\n\nexport interface PopupOptions {\n\tmessage: string;\n\ttitle?: string;\n\ticon?: string | null;\n\tbuttons?: PopupButton[] | PopupButtonPreset;\n\ttimeout?: number;\n\tautoWidth?: boolean;\n\tfocus?: boolean;\n\n\t/**\n\t * ウィンドウクローズ時\n\t */\n\tonClose?: (result: PopupResult) => void;\n\t/**\n\t * ウィンドウフォーカス時\n\t */\n\tonFocus?: (win: IWindow) => void;\n\t/**\n\t * ウィンドウブラー時\n\t */\n\tonBlur?: (win: IWindow) => void;\n}\n\nexport interface GlobalConfigOptions {\n\twindowSwitchShortcut?: string | null; // 例: \"Ctrl+`\"\n\t/**\n\t * ウィンドウマネージャを内包する親要素。\n\t * セレクタ文字列またはHTMLElementを指定します。\n\t * 未指定の場合はbody直下に配置されます。\n\t */\n\tcontainer?: string | HTMLElement;\n\t/**\n\t * `srcdoc` iframeでWinLetを自己読込する場合のライブラリのパス。\n\t */\n\tlibraryPath?: string;\n}\n\n// WinLetの公開APIの型\nexport interface WinLetApi {\n\tinit: (options?: GlobalConfigOptions) => void;\n\t/**\n\t * ウィンドウを作成します。\n\t */\n\tcreateWindow: (options?: WindowOptions) => IWindow;\n\t/**\n\t * ポップアップウィンドウを作成します。\n\t */\n\tcreatePopup: (options: PopupOptions) => IWindow;\n\t/**\n\t * 指定されたIDのウィンドウインスタンスを取得します。\n\t * @param id - 取得するウィンドウのID\n\t */\n\tgetWindow: (id: string) => IWindow | undefined;\n\t/**\n\t * 指定されたDOM要素を内包するウィンドウインスタンスを取得します。\n\t * 入れ子ウィンドウの場合、最も内側にある子ウィンドウを返します。\n\t * @param element - 検索の起点となるDOM要素\n\t * @returns 発見されたIWindowインスタンス、またはundefined\n\t */\n\tgetWindowFromElement: (element: HTMLElement) => IWindow | undefined;\n\t/**\n\t * 現在アクティブなウィンドウを取得します。\n\t */\n\tgetActiveWindow: () => IWindow | null;\n\t/**\n\t * ウィンドウのデフォルトの設定を変更します。\n\t */\n\tsetDefaultConfig: (options: WindowOptions) => void;\n\t/**\n\t * グローバル設定を変更します。\n\t */\n\tsetGlobalConfig: (options: GlobalConfigOptions) => void;\n\t/**\n\t * WinLetのバージョンを取得します。\n\t */\n\tget version(): string;\n\tPOPUP_TIMEOUT_RESULT: typeof TIMEOUT_RESULT;\n\tPOPUP_CLOSE_BUTTON_RESULT: typeof CLOSE_BUTTON_RESULT;\n}\n\n// グローバルスコープのWindowにWinLetプロパティを追加\ndeclare global {\n\tinterface Window {\n\t\tWinLet: WinLetApi;\n\t}\n}\n",
    "import { defaultConfig } from \"../const/config\";\nimport { WinLetError } from \"../const/errors\";\nimport { CLOSE_BUTTON_RESULT, IWindow, LIBRARY_NAME, MenuItem, PopupOptions, PopupResult, TabItem, WindowContentOptions, WindowOptions, WindowState } from \"../const/types\";\nimport WinLetBaseClass from \"../libs/baseclass\";\nimport Utils from \"../libs/utils\";\nimport WindowManager from \"./window_manager\";\n\nexport default class WinLetWindow extends WinLetBaseClass implements IWindow {\n\tpublic readonly id: string;\n\tpublic options: Required<WindowOptions>;\n\tpublic el: HTMLElement;\n\tpublic state: WindowState = \"normal\";\n\n\tprivate manager: WindowManager;\n\tprivate lastState = { x: 0, y: 0, width: 0, height: 0 };\n\tprivate focused: boolean = false;\n\tprivate readonly DRAG_THRESHOLD = 5;\n\n\tprivate titleBarEl: HTMLElement;\n\tprivate iconEl: HTMLElement;\n\tprivate titleEl: HTMLElement;\n\tprivate contentEl: HTMLElement;\n\tprivate tabs: { tabEl: HTMLElement; contentEl: HTMLElement }[] = [];\n\tprivate addTabBtn: HTMLElement | null = null;\n\tprivate isMenuOpen = false;\n\tprivate boundGlobalClickHandler: ((event: MouseEvent) => void) | null = null;\n\n\t// モバイル対応\n\tprivate readonly MOBILE_CONTEXT_MENU_TIMEOUT = 700;\n\tprivate contextMenuTimer: number | null = null;\n\n\t// Popup用\n\tpublic popupCloseCallback: ((result: PopupResult) => void) | null = null;\n\n\tprivate childManager: WindowManager | null = null;\n\tprivate parentWindow: IWindow | null;\n\n\tconstructor(options: WindowOptions, manager: WindowManager) {\n\t\tsuper();\n\t\tthis.id = options.id || Utils.generateId(\"window\");\n\t\tif (options.id) {\n\t\t\tconst existingEl = document.getElementById(options.id);\n\t\t\tif (existingEl && existingEl.classList.contains(`${LIBRARY_NAME}-window`)) {\n\t\t\t\tthrow new WinLetError(`WinLet: Window with ID \"${options.id}\" already exists. New window will not be created.`);\n\t\t\t}\n\t\t}\n\t\tthis.manager = manager;\n\t\tthis.options = Utils.deepMerge(defaultConfig, options) as Required<WindowOptions>;\n\t\tthis.parentWindow = options._parent || null;\n\n\t\tthis.el = this.createDOM();\n\n\t\t// _isPopupによってクラスを追加\n\t\tif (this.options._isPopup) {\n\t\t\tthis.el.classList.add(`${LIBRARY_NAME}-popup-window`);\n\t\t}\n\t\t// tabStyleとmenuStyleによってクラスを追加\n\t\tif (this.options.tabStyle === \"merged\") {\n\t\t\tthis.el.classList.add(`${LIBRARY_NAME}-tab-style-merged`);\n\t\t}\n\t\tif (this.options.menuStyle === \"merged\") {\n\t\t\tthis.el.classList.add(`${LIBRARY_NAME}-menu-style-merged`);\n\t\t}\n\n\t\tthis.titleBarEl = this.el.querySelector<HTMLElement>(`.${LIBRARY_NAME}-title-bar`)!;\n\t\tthis.iconEl = this.el.querySelector<HTMLElement>(`.${LIBRARY_NAME}-icon`)!;\n\t\tthis.titleEl = this.el.querySelector<HTMLElement>(`.${LIBRARY_NAME}-title`)!;\n\t\tthis.contentEl = this.el.querySelector<HTMLElement>(`.${LIBRARY_NAME}-content`)!;\n\n\t\tthis.applyOptions();\n\t\tthis.setupEventListeners();\n\n\t\tthis.options.onOpen(this);\n\t}\n\n\tprivate createDOM(): HTMLElement {\n\t\tconst windowEl = document.createElement(\"div\");\n\t\twindowEl.className = `${LIBRARY_NAME}-window`;\n\t\twindowEl.id = this.id;\n\n\t\tconst handles: string[] = [];\n\t\tif (this.options.resizableY) {\n\t\t\thandles.push(`<div class=\"${LIBRARY_NAME}-resize-handle n\"></div>`, `<div class=\"${LIBRARY_NAME}-resize-handle s\"></div>`);\n\t\t}\n\t\tif (this.options.resizableX) {\n\t\t\thandles.push(`<div class=\"${LIBRARY_NAME}-resize-handle w\"></div>`, `<div class=\"${LIBRARY_NAME}-resize-handle e\"></div>`);\n\t\t}\n\t\tif (this.options.resizableX && this.options.resizableY) {\n\t\t\thandles.push(`<div class=\"${LIBRARY_NAME}-resize-handle nw\"></div>`, `<div class=\"${LIBRARY_NAME}-resize-handle ne\"></div>`, `<div class=\"${LIBRARY_NAME}-resize-handle sw\"></div>`, `<div class=\"${LIBRARY_NAME}-resize-handle se\"></div>`);\n\t\t}\n\t\tconst resizableHandlesHTML = handles.join(\"\");\n\n\t\tconst hasMenu = this.options.menu.length > 0;\n\t\tconst hasTabs = this.options.tabs.length > 0;\n\t\tconst isMergedMenu = this.options.menuStyle === \"merged\" && hasMenu;\n\t\tconst isMergedTabs = this.options.tabStyle === \"merged\" && hasTabs;\n\n\t\tconst controlsHTML = `\n            <div class=\"${LIBRARY_NAME}-controls\">\n                ${this.options.minimizable ? `<input class=\"${LIBRARY_NAME}-control-btn ${LIBRARY_NAME}-minimize-btn\" type=\"button\" value=\"\\uff3f\" title=\"Minimize\" />` : \"\"}\n                ${this.options.maximizable ? `<input class=\"${LIBRARY_NAME}-control-btn ${LIBRARY_NAME}-maximize-btn\" type=\"button\" value=\"\\u25a1\" title=\"Maximize\" />` : \"\"}\n                ${this.options.closable ? `<input class=\"${LIBRARY_NAME}-control-btn ${LIBRARY_NAME}-close-btn\" type=\"button\" value=\"\\u2573\" title=\"Close\">` : \"\"}\n            </div>`;\n\n\t\tconst titleBarContentHTML = `\n            <div class=\"${LIBRARY_NAME}-icon\"></div>\n            ${isMergedMenu ? `<div class=\"${LIBRARY_NAME}-menu-bar\"></div>` : \"\"}\n            <div class=\"${LIBRARY_NAME}-title\"></div>\n            ${isMergedTabs ? `<div class=\"${LIBRARY_NAME}-tab-bar\"></div>` : \"\"}\n            ${controlsHTML}\n        `;\n\n\t\twindowEl.innerHTML = `\n            <div class=\"${LIBRARY_NAME}-title-bar ${LIBRARY_NAME}-us-none\">\n                ${titleBarContentHTML}\n            </div>\n            <div class=\"${LIBRARY_NAME}-main-content\">\n                ${!isMergedMenu && hasMenu ? `<div class=\"${LIBRARY_NAME}-menu-bar\"></div>` : \"\"}\n                ${!isMergedTabs && hasTabs ? `<div class=\"${LIBRARY_NAME}-tab-bar\"></div>` : \"\"}\n                <div class=\"${LIBRARY_NAME}-content\"></div>\n            </div>\n            ${resizableHandlesHTML}\n        `;\n\t\treturn windowEl;\n\t}\n\n\tprivate applyOptions(): void {\n\t\tthis.setTitle(this.options.title);\n\t\tthis.setIcon(this.options.icon);\n\t\tthis.setSize(this.options.width, this.options.height);\n\t\tthis.el.style.minWidth = `${this.options.minWidth}px`;\n\t\tthis.el.style.minHeight = `${this.options.minHeight}px`;\n\n\t\tif (this.options.controlsPosition === \"left\") {\n\t\t\tthis.titleBarEl.classList.add(\"controls-left\");\n\t\t}\n\n\t\tif (this.options.tabs.length > 0) {\n\t\t\tthis.createTabs();\n\t\t} else {\n\t\t\tthis.renderContent(this.contentEl, this.options.content);\n\t\t}\n\n\t\tif (this.options.menu.length > 0) {\n\t\t\tthis.createMenu();\n\t\t}\n\t}\n\n\tprivate renderContent(container: HTMLElement, content: WindowContentOptions): void {\n\t\tcontainer.innerHTML = \"\";\n\t\tif (content.template) {\n\t\t\tconst template = document.querySelector<HTMLTemplateElement>(content.template);\n\t\t\tif (template?.tagName === \"TEMPLATE\") {\n\t\t\t\tcontainer.appendChild(template.content.cloneNode(true));\n\t\t\t} else {\n\t\t\t\tcontainer.innerHTML = \"Error: Template not found or invalid.\";\n\t\t\t\tconsole.warn(\"WinLet Warning: Template not found or invalid.\");\n\t\t\t}\n\t\t} else if (content.html) {\n\t\t\tcontainer.innerHTML = content.html;\n\t\t} else if (Utils.isNonEmptyObject(content.iframe)) {\n\t\t\tconst iframe = document.createElement(\"iframe\");\n\t\t\tconst iframeConfig = content.iframe;\n\t\t\tif (iframeConfig.src) {\n\t\t\t\tiframe.src = iframeConfig.src;\n\t\t\t}\n\t\t\tif (iframeConfig.srcdoc) {\n\t\t\t\tlet finalSrcDoc = iframeConfig.srcdoc;\n\t\t\t\tif (iframeConfig.loadWinLet) {\n\t\t\t\t\tconst globalConfig = this.manager.getGlobalConfig();\n\t\t\t\t\tif (globalConfig.libraryPath) {\n\t\t\t\t\t\tconst scriptTag = `<script src=\"${globalConfig.libraryPath}\"><\\/script>`;\n\t\t\t\t\t\tconst initScript = `<script>document.addEventListener('DOMContentLoaded', () => window.WinLet.init({ container: document.body }));<\\/script>`;\n\t\t\t\t\t\tfinalSrcDoc = `<!DOCTYPE html><html><head><meta charset=\"UTF-8\">${scriptTag}${initScript}</head><body>${iframeConfig.srcdoc}</body></html>`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(\"WinLet Warning: `loadWinLet` is true, but `libraryPath` is not set in global config.\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tiframe.srcdoc = finalSrcDoc;\n\t\t\t}\n\t\t\tif (iframeConfig.allow) {\n\t\t\t\tiframe.allow = iframeConfig.allow;\n\t\t\t}\n\t\t\tif (iframeConfig.referrerPolicy) {\n\t\t\t\tiframe.referrerPolicy = iframeConfig.referrerPolicy;\n\t\t\t}\n\t\t\tif (iframeConfig.loading) {\n\t\t\t\tiframe.loading = iframeConfig.loading;\n\t\t\t}\n\t\t\tif (iframeConfig.sandbox) {\n\t\t\t\tif (!Array.isArray(iframeConfig.sandbox)) {\n\t\t\t\t\tiframeConfig.sandbox = [iframeConfig.sandbox];\n\t\t\t\t}\n\t\t\t\tif (iframeConfig.sandbox.length > 0) {\n\t\t\t\t\tiframe.setAttribute(\"sandbox\", iframeConfig.sandbox.join(\" \"));\n\t\t\t\t}\n\t\t\t}\n\t\t\tcontainer.appendChild(iframe);\n\t\t}\n\t}\n\n\tprivate closeAllMenus(): void {\n\t\tthis.el.querySelectorAll<HTMLElement>(`.${LIBRARY_NAME}-menu-item > .${LIBRARY_NAME}-menu-dropdown`).forEach((dd) => {\n\t\t\tdd.style.display = \"none\";\n\t\t});\n\t\tthis.isMenuOpen = false;\n\t}\n\n\tprivate createMenu(): void {\n\t\tconst menuBar = this.el.querySelector<HTMLElement>(`.${LIBRARY_NAME}-menu-bar`)!;\n\t\tmenuBar.innerHTML = \"\";\n\n\t\tthis.options.menu.forEach((menuItemData) => {\n\t\t\tconst menuItemEl = document.createElement(\"div\");\n\t\t\tmenuItemEl.className = `${LIBRARY_NAME}-menu-item ${LIBRARY_NAME}-us-none`;\n\t\t\tmenuItemEl.textContent = menuItemData.name ?? \"\";\n\n\t\t\tif (menuItemData.items) {\n\t\t\t\tconst dropdownEl = this.createDropdownMenu(menuItemData.items);\n\n\t\t\t\tmenuItemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tconst isVisible = dropdownEl.style.display === \"block\";\n\t\t\t\t\tthis.closeAllMenus();\n\t\t\t\t\tif (!isVisible) {\n\t\t\t\t\t\tdropdownEl.style.display = \"block\";\n\t\t\t\t\t\tthis.isMenuOpen = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tmenuItemEl.addEventListener(\"mouseenter\", () => {\n\t\t\t\t\tif (this.isMenuOpen) {\n\t\t\t\t\t\tthis.closeAllMenus();\n\t\t\t\t\t\tdropdownEl.style.display = \"block\";\n\t\t\t\t\t\tthis.isMenuOpen = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tmenuItemEl.appendChild(dropdownEl);\n\t\t\t}\n\t\t\tmenuBar.appendChild(menuItemEl);\n\t\t});\n\t}\n\n\tprivate createDropdownMenu(items: MenuItem[]): HTMLUListElement {\n\t\tconst dropdownEl = document.createElement(\"ul\");\n\t\tdropdownEl.className = `${LIBRARY_NAME}-menu-dropdown`;\n\n\t\titems.forEach((itemData) => {\n\t\t\tconst itemEl = document.createElement(\"li\");\n\t\t\tif (itemData.separator) {\n\t\t\t\titemEl.className = \"separator\";\n\t\t\t} else {\n\t\t\t\tlet text = itemData.name ?? \"\";\n\t\t\t\ttext = `<span>${text}</span>`;\n\t\t\t\tif (this.options.enableShortcuts && itemData.shortcut) {\n\t\t\t\t\ttext += `<span class=\"${LIBRARY_NAME}-shortcut-text\">(${itemData.shortcut})</span>`;\n\t\t\t\t}\n\t\t\t\titemEl.innerHTML = `<div class=\"${LIBRARY_NAME}-menu-dropdown-item\">${text}</div>`;\n\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.closeAllMenus();\n\t\t\t\t\titemData.action?.(this);\n\t\t\t\t});\n\t\t\t\tif (itemData.items) {\n\t\t\t\t\titemEl.classList.add(\"has-submenu\"); // スタイル付けのためのクラス\n\t\t\t\t\tconst subMenuEl = this.createDropdownMenu(itemData.items);\n\t\t\t\t\titemEl.appendChild(subMenuEl);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdropdownEl.appendChild(itemEl);\n\t\t});\n\t\treturn dropdownEl;\n\t}\n\n\tprivate createTabs(): void {\n\t\tconst tabBar = this.el.querySelector<HTMLElement>(`.${LIBRARY_NAME}-tab-bar`)!;\n\t\ttabBar.innerHTML = \"\";\n\t\tthis.tabs = [];\n\t\tconst tabOpts = this.options.tabOptions ?? {};\n\n\t\tthis.options.tabs.forEach((tabData, index) => {\n\t\t\tthis.createTabElement(tabData, index);\n\t\t});\n\n\t\tif (tabOpts.addable) {\n\t\t\tthis.addTabBtn = document.createElement(\"div\");\n\t\t\tthis.addTabBtn.className = `${LIBRARY_NAME}-tab-add-btn`;\n\t\t\tthis.addTabBtn.textContent = \"+\";\n\t\t\tthis.addTabBtn.addEventListener(\"click\", (e) => {\n\t\t\t\tconst newTabItem = tabOpts.onAdd?.(this);\n\t\t\t\tif (newTabItem) {\n\t\t\t\t\tthis.addTab(newTabItem);\n\t\t\t\t}\n\t\t\t});\n\t\t\ttabBar.appendChild(this.addTabBtn);\n\t\t}\n\t\t// タブの並び替えと統合のためのドロップゾーンを設定\n\t\tthis.setupTabBarDropZone();\n\n\t\tif (this.tabs.length > 0) this.activateTab(0);\n\t}\n\n\tprivate setupTabBarDropZone(): void {\n\t\tconst tabBar = this.el.querySelector<HTMLElement>(`.${LIBRARY_NAME}-tab-bar`)!;\n\t\tif (!tabBar || !this.options.tabOptions.reorderable) return;\n\n\t\ttabBar.addEventListener(\"dragover\", (e) => {\n\t\t\tif (e.dataTransfer?.types.includes(\"application/winlet-tab\")) {\n\t\t\t\te.preventDefault();\n\t\t\t\tif (e.dataTransfer) e.dataTransfer.dropEffect = \"move\";\n\t\t\t\ttabBar.classList.add(\"drag-over\");\n\t\t\t}\n\t\t});\n\t\ttabBar.addEventListener(\"dragleave\", () => {\n\t\t\ttabBar.classList.remove(\"drag-over\");\n\t\t});\n\t\ttabBar.addEventListener(\"drop\", (e) => {\n\t\t\te.preventDefault();\n\t\t\ttabBar.classList.remove(\"drag-over\");\n\n\t\t\tconst tabDataJSON = e.dataTransfer?.getData(\"application/winlet-tab\");\n\t\t\tconst sourceWindowId = e.dataTransfer?.getData(\"application/winlet-source-window-id\");\n\t\t\tconst sourceTabId = e.dataTransfer?.getData(\"text/plain\");\n\t\t\tif (!tabDataJSON || !sourceWindowId || !sourceTabId) return;\n\n\t\t\tconst draggingEl = this.manager.container?.querySelector<HTMLElement>(`.${LIBRARY_NAME}-tab.dragging`);\n\n\t\t\t// 自分自身のウィンドウ内での並び替え\n\t\t\tif (sourceWindowId === this.id) {\n\t\t\t\tif (draggingEl) {\n\t\t\t\t\t// ドロップされた位置に挿入\n\t\t\t\t\tthis.updateTabOrderFromDOM();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 外部ウィンドウからのタブ統合\n\t\t\tconst sourceWindow = this.manager.getWindow(sourceWindowId);\n\t\t\tif (sourceWindow) {\n\t\t\t\tconst sourceOpts = sourceWindow.options.tabOptions;\n\t\t\t\tconst targetOpts = this.options.tabOptions;\n\n\t\t\t\tconst isMergeable = sourceOpts.mergeable ?? sourceOpts.detachable; // ソースをマージできるかどうかを確認\n\t\t\t\tconst allowsIncoming = targetOpts.allowIncomingMerge ?? true; // ターゲットが受け入れるかどうかを確認\n\t\t\t\tconst customFilterPassed = !targetOpts.onMergeAttempt || targetOpts.onMergeAttempt(sourceWindow, this);\n\n\t\t\t\tif (!isMergeable || !allowsIncoming || !customFilterPassed) {\n\t\t\t\t\treturn; // 条件が満たされていない場合は、マージを中止\n\t\t\t\t}\n\n\t\t\t\tconst tabData: TabItem = JSON.parse(tabDataJSON);\n\t\t\t\tthis.addTab(tabData, true);\n\n\t\t\t\tsourceWindow.closeTab(parseInt(sourceTabId, 10));\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate createTabElement(tabData: TabItem, index: number): void {\n\t\tconst tabBar = this.el.querySelector<HTMLElement>(`.${LIBRARY_NAME}-tab-bar`)!;\n\t\tconst tabOpts = this.options.tabOptions ?? {};\n\n\t\tconst tabEl = document.createElement(\"div\");\n\t\ttabEl.className = `${LIBRARY_NAME}-tab`;\n\t\ttabEl.dataset.tabId = index.toString(); // IDを紐付け\n\n\t\tconst titleEl = document.createElement(\"span\");\n\t\ttitleEl.textContent = tabData.title;\n\t\ttabEl.appendChild(titleEl);\n\n\t\t// +ボタンが存在すればその前に、なければ末尾に追加\n\t\ttabBar.insertBefore(tabEl, this.addTabBtn);\n\n\t\tif (tabOpts.closable) {\n\t\t\tconst closeBtn = document.createElement(\"span\");\n\t\t\tcloseBtn.className = `${LIBRARY_NAME}-tab-close-btn`;\n\t\t\tcloseBtn.innerHTML = \"&times;\";\n\t\t\tcloseBtn.addEventListener(\"click\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\t// クロージャのindexに依存せず、クリックされた時点の最新のインデックスを探す\n\t\t\t\tconst indexToClose = this.tabs.findIndex((t) => t.tabEl === tabEl);\n\t\t\t\tif (indexToClose !== -1) {\n\t\t\t\t\tthis.closeTab(indexToClose);\n\t\t\t\t}\n\t\t\t});\n\t\t\ttabEl.appendChild(closeBtn);\n\t\t}\n\n\t\t// タブコンテント生成ロジック\n\t\tconst tabContentEl = document.createElement(\"div\");\n\t\ttabContentEl.className = `${LIBRARY_NAME}-tab-content`;\n\t\tthis.contentEl.appendChild(tabContentEl);\n\t\tthis.renderContent(tabContentEl, tabData.content);\n\n\t\ttabEl.addEventListener(\"click\", (e) => {\n\t\t\tthis.activateTab(+tabEl.dataset.tabId!);\n\t\t});\n\t\tthis.tabs.splice(index, 0, { tabEl, contentEl: tabContentEl }); // 指定位置に挿入\n\n\t\tif (tabOpts.reorderable) {\n\t\t\tthis.makeTabReorderable(tabEl);\n\t\t}\n\t}\n\n\tprivate makeTabReorderable(tabEl: HTMLElement) {\n\t\ttabEl.draggable = true;\n\t\ttabEl.addEventListener(\"dragstart\", (e) => {\n\t\t\te.dataTransfer!.setData(\"text/plain\", tabEl.dataset.tabId!);\n\t\t\ttabEl.classList.add(\"dragging\");\n\n\t\t\t// 分離機能が有効な場合、追加情報をセット\n\t\t\tif (this.options.tabOptions.detachable) {\n\t\t\t\tconst tabIndex = parseInt(tabEl.dataset.tabId!, 10);\n\t\t\t\tif (!isNaN(tabIndex) && this.options.tabs[tabIndex]) {\n\t\t\t\t\tconst tabData = this.options.tabs[tabIndex];\n\t\t\t\t\te.dataTransfer!.setData(\"application/winlet-tab\", JSON.stringify(tabData));\n\t\t\t\t\te.dataTransfer!.setData(\"application/winlet-source-window-id\", this.id);\n\n\t\t\t\t\tthis.manager.onTabDragStart(this.id);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\ttabEl.addEventListener(\"dragend\", () => {\n\t\t\ttabEl.classList.remove(\"dragging\");\n\t\t\tthis.manager.onTabDragEnd();\n\t\t});\n\n\t\ttabEl.addEventListener(\n\t\t\t\"dragover\",\n\t\t\t(e) => {\n\t\t\t\tif (this.manager.draggingTabInfo?.sourceWindowId !== this.id) {\n\t\t\t\t\treturn; //タブが別のウィンドウからである場合、何もしない\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t\tconst draggingEl = document.querySelector<HTMLElement>(`.${LIBRARY_NAME}-tab.dragging`);\n\t\t\t\tif (draggingEl && draggingEl !== tabEl) {\n\t\t\t\t\tconst rect = tabEl.getBoundingClientRect();\n\t\t\t\t\t// カーソルの位置によって挿入位置を左右に決める\n\t\t\t\t\tconst isAfter = e.clientX > rect.left + rect.width / 2;\n\t\t\t\t\tconst parent = tabEl.parentNode!;\n\t\t\t\t\tif (isAfter) {\n\t\t\t\t\t\tparent.insertBefore(draggingEl, tabEl.nextSibling);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparent.insertBefore(draggingEl, tabEl);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{ passive: false }\n\t\t);\n\n\t\ttabEl.addEventListener(\n\t\t\t\"drop\",\n\t\t\t(e) => {\n\t\t\t\te.preventDefault();\n\t\t\t},\n\t\t\t{ passive: false }\n\t\t);\n\t}\n\n\t// タブを閉じるロジック\n\tpublic closeTab(index: number) {\n\t\t// アクティブなタブが閉じられるかチェック\n\t\tconst wasActive = this.tabs[index]?.tabEl.classList.contains(\"active\");\n\n\t\t// DOMから要素を削除\n\t\tthis.tabs[index].tabEl.remove();\n\t\tthis.tabs[index].contentEl.remove();\n\t\t// 配列から削除\n\t\tthis.tabs.splice(index, 1);\n\t\tthis.options.tabs.splice(index, 1);\n\n\t\t// IDの再割り当て\n\t\tthis.tabs.forEach((tab, i) => (tab.tabEl.dataset.tabId = i.toString()));\n\n\t\t// アクティブなタブを再設定\n\t\tif (this.tabs.length > 0) {\n\t\t\tif (wasActive) {\n\t\t\t\tconst newActiveIndex = Math.max(0, index - 1);\n\t\t\t\tthis.activateTab(newActiveIndex);\n\t\t\t}\n\t\t} else {\n\t\t\t// タブが0になったらウィンドウを閉じる\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\tpublic activateTab(index: number): void {\n\t\tthis.tabs.forEach((tab, i) => {\n\t\t\ttab.tabEl.classList.toggle(\"active\", i === index);\n\t\t\ttab.contentEl.classList.toggle(\"active\", i === index);\n\t\t});\n\t}\n\n\tpublic addTab(tabItem: TabItem, setActive: boolean = true): void {\n\t\tthis.options.tabs.push(tabItem);\n\t\tconst newIndex = this.options.tabs.length - 1;\n\t\tthis.createTabElement(tabItem, newIndex);\n\t\tif (setActive) {\n\t\t\tthis.activateTab(newIndex);\n\t\t\t// タブが追加されアクティブになったウィンドウにフォーカスを当てる\n\t\t\tthis.focus();\n\t\t}\n\t}\n\n\tpublic getTabs(): { tabEl: HTMLElement; contentEl: HTMLElement }[] {\n\t\treturn this.tabs;\n\t}\n\n\tprivate updateTabOrderFromDOM(): void {\n\t\tconst tabElements = Array.from(this.el.querySelectorAll<HTMLElement>(`.${LIBRARY_NAME}-tab-bar > .${LIBRARY_NAME}-tab`));\n\n\t\tconst newTabs: typeof this.tabs = [];\n\t\tconst newOptionsTabs: TabItem[] = [];\n\n\t\tconst oldTabs = [...this.tabs];\n\t\tconst oldOptionsTabs = [...this.options.tabs];\n\n\t\ttabElements.forEach((tabEl) => {\n\t\t\t// dataset.tabIdはもはや信頼できない可能性があるため、DOM要素で直接比較する\n\t\t\tconst oldIndex = oldTabs.findIndex((t) => t.tabEl === tabEl);\n\t\t\tif (oldIndex !== -1) {\n\t\t\t\tnewTabs.push(oldTabs[oldIndex]);\n\t\t\t\tnewOptionsTabs.push(oldOptionsTabs[oldIndex]);\n\t\t\t}\n\t\t});\n\n\t\tthis.tabs = newTabs;\n\t\tthis.options.tabs = newOptionsTabs;\n\n\t\t// 新しい順序でdataset.tabIdを再設定\n\t\tthis.tabs.forEach((tab, i) => (tab.tabEl.dataset.tabId = i.toString()));\n\t}\n\n\tprivate setupEventListeners(): void {\n\t\tthis.el.addEventListener(\"click\", () => this.focus(), true);\n\n\t\t// iframeなどにフォーカスが移った際にウィンドウ自体をアクティブにする\n\t\tthis.el.addEventListener(\"focusin\", () => this.focus());\n\n\t\t// Add a global click listener to close menus when clicking outside\n\t\tthis.boundGlobalClickHandler = () => {\n\t\t\tif (this.isMenuOpen) {\n\t\t\t\tthis.closeAllMenus();\n\t\t\t}\n\t\t};\n\t\tdocument.addEventListener(\"click\", this.boundGlobalClickHandler);\n\n\t\tconst closeBtn = this.el.querySelector<HTMLButtonElement>(`.${LIBRARY_NAME}-close-btn`);\n\t\tcloseBtn?.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\tif (this.options._isPopup) {\n\t\t\t\tthis.popupCloseCallback?.(CLOSE_BUTTON_RESULT);\n\t\t\t}\n\t\t\tthis.close();\n\t\t});\n\n\t\tconst maxBtn = this.el.querySelector<HTMLButtonElement>(`.${LIBRARY_NAME}-maximize-btn`);\n\t\tmaxBtn?.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\tthis.toggleMaximize();\n\t\t});\n\n\t\tconst minBtn = this.el.querySelector<HTMLButtonElement>(`.${LIBRARY_NAME}-minimize-btn`);\n\t\tminBtn?.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\tthis.minimize();\n\t\t});\n\n\t\tif (this.options.movable) this.makeMovable();\n\t\tif (this.options.resizableX || this.options.resizableY) this.makeResizable();\n\t\tif (this.options.contextMenu.length > 0) {\n\t\t\t// PC用: 右クリック\n\t\t\tthis.el.addEventListener(\n\t\t\t\t\"contextmenu\",\n\t\t\t\t(e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tthis.manager.showContextMenu(e.clientX, e.clientY, this.options.contextMenu, this);\n\t\t\t\t},\n\t\t\t\t{ passive: false }\n\t\t\t);\n\t\t\t// モバイル用: 長押し\n\t\t\tthis.el.addEventListener(\"pointerdown\", (e) => {\n\t\t\t\tif (e.pointerType !== \"touch\") return;\n\t\t\t\tthis.contextMenuTimer = window.setTimeout(() => {\n\t\t\t\t\tthis.contextMenuTimer = null;\n\t\t\t\t\tthis.manager.showContextMenu(e.clientX, e.clientY, this.options.contextMenu, this);\n\t\t\t\t}, this.MOBILE_CONTEXT_MENU_TIMEOUT);\n\t\t\t});\n\t\t\tconst clearContextMenuTimer = () => {\n\t\t\t\tif (this.contextMenuTimer) {\n\t\t\t\t\tclearTimeout(this.contextMenuTimer);\n\t\t\t\t\tthis.contextMenuTimer = null;\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.el.addEventListener(\"pointermove\", clearContextMenuTimer);\n\t\t\tthis.el.addEventListener(\"pointerup\", clearContextMenuTimer);\n\t\t\tthis.el.addEventListener(\"pointercancel\", clearContextMenuTimer);\n\t\t}\n\t}\n\n\tprivate makeMovable(): void {\n\t\tconst onPointerDown = (e: PointerEvent) => {\n\t\t\tconst target = e.target as HTMLElement;\n\t\t\t// 操作UI要素の上なら移動させない\n\t\t\tif (target.closest(`.${LIBRARY_NAME}-control-btn, .${LIBRARY_NAME}-resize-handle, .${LIBRARY_NAME}-menu-item, .${LIBRARY_NAME}-tab, .${LIBRARY_NAME}-tab-add-btn`)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// メインボタン（マウスの左ボタン、タッチ）でのみ移動\n\t\t\tif (e.button !== 0) return;\n\n\t\t\te.preventDefault();\n\t\t\tthis.focus();\n\n\t\t\tconst { clientX: startX, clientY: startY } = e;\n\t\t\tlet isDragging = false;\n\n\t\t\t// ドラッグ開始時のウィンドウ座標。isDraggingがtrueになったときに設定される。\n\t\t\tlet initialLeft: number;\n\t\t\tlet initialTop: number;\n\n\t\t\tconst onPointerMove = (moveE: PointerEvent) => {\n\t\t\t\tif (!this.el?.isConnected) return;\n\t\t\t\tif (!isDragging) {\n\t\t\t\t\tconst deltaX = Math.abs(moveE.clientX - startX);\n\t\t\t\t\tconst deltaY = Math.abs(moveE.clientY - startY);\n\n\t\t\t\t\t// 閾値を超えたらドラッグモードを開始\n\t\t\t\t\tif (deltaX > this.DRAG_THRESHOLD || deltaY > this.DRAG_THRESHOLD) {\n\t\t\t\t\t\tisDragging = true;\n\t\t\t\t\t\tthis.el.setPointerCapture(e.pointerId);\n\t\t\t\t\t\tthis.contentEl.style.pointerEvents = \"none\";\n\n\t\t\t\t\t\t// 最大化状態からのドラッグ開始の場合、ウィンドウを復元\n\t\t\t\t\t\tif (this.state === \"maximized\") {\n\t\t\t\t\t\t\tconst restoredWidth = this.lastState.width;\n\t\t\t\t\t\t\tconst clickRatio = e.clientX / this.el.offsetWidth;\n\t\t\t\t\t\t\tconst titleBarRect = this.titleBarEl.getBoundingClientRect();\n\t\t\t\t\t\t\tconst offsetY = e.clientY - titleBarRect.top;\n\t\t\t\t\t\t\tconst posX = e.clientX - restoredWidth * clickRatio;\n\t\t\t\t\t\t\tconst posY = e.clientY - offsetY;\n\n\t\t\t\t\t\t\tthis.restore();\n\t\t\t\t\t\t\tthis.setPosition(posX, posY);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// ドラッグ開始時点の座標を記録\n\t\t\t\t\t\tinitialLeft = this.el.offsetLeft;\n\t\t\t\t\t\tinitialTop = this.el.offsetTop;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 閾値に達していなければ何もしない\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// ドラッグ中の移動処理\n\t\t\t\tconst newLeft = initialLeft + moveE.clientX - startX;\n\t\t\t\tconst newTop = initialTop + moveE.clientY - startY;\n\t\t\t\tthis.setPosition(newLeft, newTop);\n\t\t\t};\n\n\t\t\tconst onPointerUp = () => {\n\t\t\t\tdocument.removeEventListener(\"pointermove\", onPointerMove);\n\t\t\t\tdocument.removeEventListener(\"pointerup\", onPointerMove);\n\n\t\t\t\t// ドラッグが発生した場合のみ後処理とコールバック呼び出し\n\t\t\t\tif (isDragging) {\n\t\t\t\t\tthis.el.releasePointerCapture(e.pointerId);\n\t\t\t\t\tthis.contentEl.style.pointerEvents = \"auto\";\n\t\t\t\t\tthis.options.onMove(this);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tdocument.addEventListener(\"pointermove\", onPointerMove);\n\t\t\tdocument.addEventListener(\"pointerup\", onPointerUp);\n\t\t};\n\n\t\tthis.titleBarEl.addEventListener(\"pointerdown\", onPointerDown, { passive: false });\n\n\t\tif (this.options.maximizable) {\n\t\t\tthis.titleBarEl.addEventListener(\"dblclick\", (e: MouseEvent) => {\n\t\t\t\tif (this.options.maximizableOnDblClick) {\n\t\t\t\t\tconst target = e.target as HTMLElement;\n\t\t\t\t\t// 操作UI（コントロールボタン、メニュー、タブ）の上では発火しないようにする\n\t\t\t\t\tif (target.closest(`.${LIBRARY_NAME}-control-btn, .${LIBRARY_NAME}-menu-item, .${LIBRARY_NAME}-tab`)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.toggleMaximize();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate makeResizable(): void {\n\t\tthis.el.querySelectorAll<HTMLElement>(`.${LIBRARY_NAME}-resize-handle`).forEach((handle) => {\n\t\t\thandle.addEventListener(\n\t\t\t\t\"pointerdown\",\n\t\t\t\t(e: PointerEvent) => {\n\t\t\t\t\tif (e.button !== 0 || !handle?.isConnected) return;\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.focus();\n\t\t\t\t\tthis.contentEl.style.pointerEvents = \"none\";\n\t\t\t\t\thandle.setPointerCapture(e.pointerId);\n\n\t\t\t\t\tconst direction = handle.className.replace(`${LIBRARY_NAME}-resize-handle `, \"\");\n\t\t\t\t\tconst { clientX: startX, clientY: startY } = e;\n\t\t\t\t\tconst { offsetWidth: startWidth, offsetHeight: startHeight, offsetLeft: startLeft, offsetTop: startTop } = this.el;\n\t\t\t\t\tconst { minWidth, minHeight } = this.options;\n\n\t\t\t\t\tconst onPointerMove = (moveE: PointerEvent) => {\n\t\t\t\t\t\tlet newWidth = startWidth,\n\t\t\t\t\t\t\tnewHeight = startHeight,\n\t\t\t\t\t\t\tnewLeft = startLeft,\n\t\t\t\t\t\t\tnewTop = startTop;\n\t\t\t\t\t\tconst deltaX = moveE.clientX - startX;\n\t\t\t\t\t\tconst deltaY = moveE.clientY - startY;\n\n\t\t\t\t\t\tif (direction.includes(\"e\")) newWidth = Math.max(minWidth, startWidth + deltaX);\n\t\t\t\t\t\tif (direction.includes(\"w\")) {\n\t\t\t\t\t\t\tnewWidth = Math.max(minWidth, startWidth - deltaX);\n\t\t\t\t\t\t\tnewLeft = startLeft + deltaX;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (direction.includes(\"s\")) newHeight = Math.max(minHeight, startHeight + deltaY);\n\t\t\t\t\t\tif (direction.includes(\"n\")) {\n\t\t\t\t\t\t\tnewHeight = Math.max(minHeight, startHeight - deltaY);\n\t\t\t\t\t\t\tnewTop = startTop + deltaY;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.setSize(newWidth, newHeight);\n\t\t\t\t\t\tthis.setPosition(newLeft, newTop);\n\t\t\t\t\t};\n\t\t\t\t\tconst onPointerUp = () => {\n\t\t\t\t\t\thandle.releasePointerCapture(e.pointerId);\n\t\t\t\t\t\tthis.contentEl.style.pointerEvents = \"auto\";\n\n\t\t\t\t\t\tdocument.removeEventListener(\"pointermove\", onPointerMove);\n\t\t\t\t\t\tdocument.removeEventListener(\"pointerup\", onPointerUp);\n\t\t\t\t\t\tthis.options.onResize(this);\n\t\t\t\t\t};\n\t\t\t\t\tdocument.addEventListener(\"pointermove\", onPointerMove);\n\t\t\t\t\tdocument.addEventListener(\"pointerup\", onPointerUp);\n\t\t\t\t},\n\t\t\t\t{ passive: false }\n\t\t\t);\n\t\t});\n\t}\n\n\tprivate isFontAwesome(classStr: string): boolean {\n\t\tconst classes = classStr.trim().split(/\\s+/);\n\t\tconst hasPrefix = classes.some((c) => /^fa[bslr]?$/.test(c));\n\t\tconst hasIcon = classes.some((c) => /^fa-[a-z0-9-]+$/.test(c));\n\t\treturn hasPrefix && hasIcon;\n\t}\n\n\t// --- Public API ---\n\n\tpublic close(): void {\n\t\t// Clean up global event listeners\n\t\tif (this.boundGlobalClickHandler) {\n\t\t\tdocument.removeEventListener(\"click\", this.boundGlobalClickHandler);\n\t\t}\n\t\tthis.options.onClose(this);\n\t\tthis.manager.destroyWindow(this.id);\n\t}\n\n\tpublic minimize(): void {\n\t\tif (this.state !== \"minimized\") {\n\t\t\tif (this.state !== \"normal\") this.restore();\n\t\t\tthis.state = \"minimized\";\n\t\t\tthis.el.classList.add(\"minimized\");\n\t\t\tthis.blur();\n\t\t}\n\t}\n\n\tpublic toggleMaximize(): void {\n\t\tthis.state === \"maximized\" ? this.restore() : this.maximize();\n\t}\n\n\tpublic maximize(): void {\n\t\tif (this.state !== \"maximized\") {\n\t\t\tif (this.state !== \"normal\") this.restore();\n\t\t\tthis.lastState = { x: this.el.offsetLeft, y: this.el.offsetTop, width: this.el.offsetWidth, height: this.el.offsetHeight };\n\t\t\tthis.state = \"maximized\";\n\t\t\tthis.el.classList.add(\"maximized\");\n\t\t\tthis.setPosition(0, 0);\n\t\t\tthis.setSize(\"100%\", \"100%\");\n\t\t\tconst maxBtn = this.el.querySelector<HTMLButtonElement>(`.${LIBRARY_NAME}-maximize-btn`);\n\t\t\tif (maxBtn) {\n\t\t\t\tmaxBtn.title = \"Restore\";\n\t\t\t\tmaxBtn.value = \"\\u274f\";\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic restore(): void {\n\t\tif (this.state === \"minimized\") {\n\t\t\tthis.state = \"normal\";\n\t\t\tthis.el.classList.remove(\"minimized\");\n\t\t\tthis.focus();\n\t\t} else if (this.state === \"maximized\") {\n\t\t\tthis.state = \"normal\";\n\t\t\tthis.el.classList.remove(\"maximized\");\n\t\t\tthis.setSize(this.lastState.width, this.lastState.height);\n\t\t\tthis.setPosition(this.lastState.x, this.lastState.y);\n\t\t\tconst maxBtn = this.el.querySelector<HTMLButtonElement>(`.${LIBRARY_NAME}-maximize-btn`);\n\t\t\tif (maxBtn) {\n\t\t\t\tmaxBtn.title = \"Maximize\";\n\t\t\t\tmaxBtn.value = \"\\u25a1\";\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic focus(): void {\n\t\tif (this.focused) return;\n\n\t\t// 階層を遡ってすべての親ウィンドウをフォーカスする\n\t\tif (this.parentWindow) {\n\t\t\tthis.parentWindow.focus();\n\t\t}\n\n\t\tthis.manager.focusWindow(this);\n\t\tthis.focused = true;\n\t\tthis.el.classList.add(\"active\");\n\t\tthis.options.onFocus(this);\n\t}\n\n\tpublic blur(): void {\n\t\tif (!this.focused) return;\n\t\tthis.focused = false;\n\t\tthis.el.classList.remove(\"active\");\n\t\tthis.options.onBlur(this);\n\t}\n\n\tpublic reload(): void {\n\t\t// onReloadがfalseを返した場合、デフォルトのリロード処理を中断\n\t\tif (this.options.onReload(this) === false) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst reloadContent = (container: HTMLElement, content: WindowContentOptions) => {\n\t\t\tif (Utils.isNonEmptyObject(content.iframe)) {\n\t\t\t\tconst iframe = container.querySelector(\"iframe\");\n\t\t\t\t// srcがあり、srcdocがない場合はiframeのreloadを試みる\n\t\t\t\tif (iframe && iframe.src && !content.iframe.srcdoc) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// クロスオリジンフレームへのアクセスはエラーになる可能性がある\n\t\t\t\t\t\tiframe.contentWindow?.location.reload();\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// 失敗した場合はiframe要素を再生成する\n\t\t\t\t\t\tconsole.warn(\"WinLet: Cross-origin iframe could not be reloaded directly. Recreating iframe element.\", e);\n\t\t\t\t\t\tthis.renderContent(container, content);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// srcdocの場合やiframeが見つからない場合は要素を再生成\n\t\t\t\t\tthis.renderContent(container, content);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// htmlまたはtemplateの場合は常に再描画\n\t\t\t\tthis.renderContent(container, content);\n\t\t\t}\n\t\t};\n\n\t\tif (this.options.tabs.length > 0) {\n\t\t\tconst activeTabIndex = this.tabs.findIndex((tab) => tab.tabEl.classList.contains(\"active\"));\n\t\t\tif (activeTabIndex > -1) {\n\t\t\t\tconst activeTab = this.tabs[activeTabIndex];\n\t\t\t\tconst tabContentOptions = this.options.tabs[activeTabIndex].content;\n\t\t\t\treloadContent(activeTab.contentEl, tabContentOptions);\n\t\t\t}\n\t\t} else {\n\t\t\treloadContent(this.contentEl, this.options.content);\n\t\t}\n\t}\n\n\tpublic getContent(): HTMLElement | HTMLIFrameElement {\n\t\tlet contentContainer: HTMLElement;\n\t\tconst activeTabIndex = this.tabs.findIndex((tab) => tab.tabEl.classList.contains(\"active\"));\n\n\t\tif (activeTabIndex > -1) {\n\t\t\t// If there's an active tab, use its content element\n\t\t\tcontentContainer = this.tabs[activeTabIndex].contentEl;\n\t\t} else {\n\t\t\t// Otherwise, use the main content element\n\t\t\tcontentContainer = this.contentEl;\n\t\t}\n\n\t\tconst iframe = contentContainer.querySelector(\"iframe\");\n\t\treturn iframe || contentContainer;\n\t}\n\n\t/**\n\t * 子ウィンドウマネージャを初期化または取得します。\n\t */\n\tprivate getChildManager(): WindowManager {\n\t\tif (!this.childManager) {\n\t\t\t// WindowManagerのコンストラクタとGlobalConfigの整合性を取る必要がある\n\t\t\t// ここでは簡易的に空のconfigで生成\n\t\t\tconst childConfig = {};\n\t\t\tthis.childManager = new WindowManager(childConfig);\n\n\t\t\t// 子マネージャのコンテナとして、このウィンドウのcontentElを指定\n\t\t\tthis.childManager.applyGlobalConfig({ container: this.contentEl });\n\t\t\tthis.childManager.init();\n\t\t}\n\t\treturn this.childManager;\n\t}\n\n\t/**\n\t * このウィンドウ内に新しいウィンドウを作成します。\n\t */\n\tpublic createWindow(options: WindowOptions = {}): IWindow {\n\t\t// iframeコンテンツの場合は、直接DOM操作する代わりにpostMessageを使用\n\t\tconst iframe = this.contentEl.querySelector(\"iframe\");\n\t\tif (iframe && iframe.contentWindow) {\n\t\t\tconst message = {\n\t\t\t\ttype: \"winlet:createWindow\",\n\t\t\t\toptions: options,\n\t\t\t};\n\t\t\t// iframeのオリジンを尊重\n\t\t\tiframe.contentWindow.postMessage(message, \"*\");\n\t\t\t// postMessageでは直接インスタンスを返せないため、暫定的にnullを返すか、Promiseベースの設計にする必要がある\n\t\t\t// ここでは未対応とし、コンソールに警告を出す\n\t\t\tconsole.warn(\"WinLet: Window creation inside an iframe is asynchronous and does not return an instance directly.\");\n\t\t\t// ダミーのインスタンスを返すか、APIの戻り値をvoidにするなどの検討が必要\n\t\t\treturn null as any; // 暫定\n\t\t}\n\n\t\t// 通常のHTMLコンテンツの場合\n\t\tconst manager = this.getChildManager();\n\t\t// 新しいウィンドウに自身を親として設定\n\t\toptions._parent = this;\n\t\treturn manager.createWindow(options);\n\t}\n\n\t/**\n\t * このウィンドウ内に新しいポップアップを作成します。\n\t */\n\tpublic createPopup(options: PopupOptions): IWindow {\n\t\tconst manager = this.getChildManager();\n\t\t// ポップアップにも自身を親として設定\n\t\tconst winOptions: WindowOptions = { _parent: this };\n\t\treturn manager.popup(Object.assign(options, winOptions));\n\t}\n\n\tpublic getTitle(): string {\n\t\treturn this.options.title;\n\t}\n\n\tpublic setTitle(title: string): void {\n\t\tthis.options.title = title;\n\t\tthis.titleEl.textContent = Utils.sanitizeHTML(title);\n\t}\n\n\tpublic setIcon(icon: string | null): void {\n\t\tthis.options.icon = icon;\n\t\tthis.iconEl.innerHTML = \"\";\n\t\tif (!icon) return;\n\n\t\tif (this.isFontAwesome(icon)) {\n\t\t\tconst i = document.createElement(\"i\");\n\t\t\ti.className = icon;\n\t\t\tthis.iconEl.appendChild(i);\n\t\t} else {\n\t\t\tconst img = document.createElement(\"img\");\n\t\t\timg.src = icon;\n\t\t\timg.alt = \"window icon\";\n\t\t\tthis.iconEl.appendChild(img);\n\t\t}\n\t}\n\n\tpublic getPosition(): { x: number; y: number } {\n\t\tif (this.state === \"maximized\") {\n\t\t\treturn { x: this.lastState.x, y: this.lastState.y };\n\t\t}\n\t\treturn { x: this.el.offsetLeft, y: this.el.offsetTop };\n\t}\n\n\tpublic setPosition(x: number | \"center\" | \"left\" | \"right\", y: number | \"center\" | \"top\" | \"bottom\"): void {\n\t\t// containerが存在しない（初期化前）場合は処理を中断\n\t\tif (!this.manager.container) {\n\t\t\tconsole.warn(\"WinLet Warning: setPosition called before manager is initialized.\");\n\t\t\treturn;\n\t\t}\n\t\tconst parentRect = this.manager.container.getBoundingClientRect();\n\t\tconst winWidth = this.el.offsetWidth;\n\t\tconst winHeight = this.el.offsetHeight;\n\n\t\tlet finalX: number;\n\t\tlet finalY: number;\n\n\t\t// X座標の計算\n\t\tswitch (x) {\n\t\t\tcase \"left\":\n\t\t\t\tfinalX = 0;\n\t\t\t\tbreak;\n\t\t\tcase \"center\":\n\t\t\t\tfinalX = (parentRect.width - winWidth) / 2;\n\t\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tfinalX = parentRect.width - winWidth;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tfinalX = x as number;\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Y座標の計算\n\t\tswitch (y) {\n\t\t\tcase \"top\":\n\t\t\t\tfinalY = 0;\n\t\t\t\tbreak;\n\t\t\tcase \"center\":\n\t\t\t\tfinalY = (parentRect.height - winHeight) / 2;\n\t\t\t\tbreak;\n\t\t\tcase \"bottom\":\n\t\t\t\tfinalY = parentRect.height - winHeight;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tfinalY = y as number;\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// 画面外にはみ出さないようにする既存のロジックを適用\n\t\tthis.el.style.left = `${Math.min(Math.max(150 - winWidth, finalX), parentRect.width - 20)}px`;\n\t\tthis.el.style.top = `${Math.min(Math.max(0, finalY), parentRect.height - 50)}px`;\n\t}\n\n\tpublic getSize(): { width: number; height: number } {\n\t\tif (this.state === \"maximized\") {\n\t\t\treturn { width: this.lastState.width, height: this.lastState.height };\n\t\t}\n\t\treturn { width: this.el.offsetWidth, height: this.el.offsetHeight };\n\t}\n\n\tpublic setSize(width: number | string, height: number | string): void {\n\t\tthis.el.style.width = typeof width === \"number\" ? `${width}px` : width;\n\t\tthis.el.style.height = typeof height === \"number\" ? `${height}px` : height;\n\t}\n}\n",
    "// src/WindowManager.ts\n\nimport { defaultConfig } from \"../const/config\";\nimport { WinLetError } from \"../const/errors\";\nimport { ContextMenuItem, GlobalConfigOptions, IWindow, LIBRARY_NAME, MenuItem, PopupButton, PopupButtonPreset, PopupOptions, PopupResult, TabItem, TIMEOUT_RESULT, WindowOptions } from \"../const/types\";\nimport WinLetBaseClass from \"../libs/baseclass\";\nimport Utils from \"../libs/utils\";\nimport styleData from \"../style/styles\";\nimport WinLetWindow from \"./window\";\n\nexport default class WindowManager extends WinLetBaseClass {\n\tpublic container: HTMLElement | null = null;\n\tprivate static allWindows = new Map<string, WinLetWindow>();\n\tprivate windows = new Map<string, WinLetWindow>();\n\tprivate zIndexCounter = 1000;\n\tprivate activeWindow: WinLetWindow | null = null;\n\tprivate contextMenuEl: HTMLElement | null = null;\n\tprivate _isInitialized = false;\n\n\tprivate globalConfig: GlobalConfigOptions;\n\n\tprivate lastAutoPosition: { x: number; y: number } | null = null;\n\tprivate lastPopupPosition: { x: number; y: number } | null = null;\n\tprivate readonly CASCADE_OFFSET = 30;\n\n\tpublic draggingTabInfo: { sourceWindowId: string } | null = null;\n\n\tconstructor(initialConfig: GlobalConfigOptions) {\n\t\tsuper();\n\t\tthis.globalConfig = initialConfig;\n\t}\n\n\t/**\n\t * ライブラリが初期化済みかどうかを取得します。\n\t */\n\tpublic get isInitialized(): boolean {\n\t\treturn this._isInitialized;\n\t}\n\n\tpublic applyGlobalConfig(options: GlobalConfigOptions) {\n\t\tObject.assign(this.globalConfig, options);\n\t}\n\n\tpublic getGlobalConfig(): GlobalConfigOptions {\n\t\treturn this.globalConfig;\n\t}\n\n\tpublic init(): void {\n\t\tif (this._isInitialized) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet parentEl: HTMLElement | null = null;\n\t\tif (typeof this.globalConfig.container === \"string\") {\n\t\t\tparentEl = document.querySelector<HTMLElement>(this.globalConfig.container);\n\t\t\tif (!parentEl) {\n\t\t\t\tthrow new WinLetError(`WinLet: The specified container \"${this.globalConfig.container}\" was not found.`);\n\t\t\t}\n\t\t} else if (this.globalConfig.container instanceof HTMLElement) {\n\t\t\tparentEl = this.globalConfig.container;\n\t\t}\n\n\t\t// 親が指定されていない場合は、デフォルトでbodyに設定\n\t\tif (!parentEl) {\n\t\t\tif (!document.body) {\n\t\t\t\tthrow new WinLetError(\"Cannot initialize before document.body is ready. Please call WinLet.init() after DOMContentLoaded.\");\n\t\t\t}\n\t\t\tparentEl = document.body;\n\t\t}\n\n\t\tif (!document.getElementById(`${LIBRARY_NAME}-styles`)) {\n\t\t\tconst styleTag = document.createElement(\"style\");\n\t\t\tstyleTag.id = `${LIBRARY_NAME}-styles`;\n\t\t\tstyleTag.innerHTML = this.getStyleData();\n\t\t\tdocument.head.appendChild(styleTag);\n\t\t}\n\t\tlet containerEl = parentEl.querySelector<HTMLElement>(`.${LIBRARY_NAME}-container`);\n\t\tif (!containerEl) {\n\t\t\tcontainerEl = document.createElement(\"div\");\n\t\t\tcontainerEl.className = `${LIBRARY_NAME}-container`;\n\t\t\tparentEl.appendChild(containerEl);\n\t\t}\n\t\tthis.container = containerEl;\n\n\t\tif (parentEl !== document.body) {\n\t\t\tthis.container.classList.add(`${LIBRARY_NAME}-is-nested`);\n\n\t\t\t// Ensure the parent can act as a positioning context\n\t\t\tconst computedStyle = window.getComputedStyle(parentEl);\n\t\t\tif (computedStyle.position === \"static\") {\n\t\t\t\tparentEl.style.position = \"relative\";\n\t\t\t}\n\t\t}\n\n\t\twindow.addEventListener(\"blur\", () =>\n\t\t\t// 次のイベントサイクルでアクティブな要素を取得\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tconst activeEl = document.activeElement;\n\t\t\t\t// フォーカスがiframeに移った場合\n\t\t\t\tif (activeEl?.tagName === \"IFRAME\") {\n\t\t\t\t\t// そのiframeがWinLetのウィンドウ内にあるか探索\n\t\t\t\t\tconst winEl = (activeEl as HTMLElement).closest<HTMLElement>(`.${LIBRARY_NAME}-window`);\n\t\t\t\t\tif (winEl) {\n\t\t\t\t\t\tconst win = this.windows.get(winEl.id);\n\t\t\t\t\t\t// 対象のウィンドウが存在し、まだアクティブでなければフォーカスする\n\t\t\t\t\t\tif (win && this.activeWindow !== win) {\n\t\t\t\t\t\t\twin.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t\tdocument.addEventListener(\n\t\t\t\"pointerdown\",\n\t\t\t() =>\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tconst activeEl = document.activeElement;\n\t\t\t\t\tif (activeEl?.tagName === \"IFRAME\") {\n\t\t\t\t\t\tconst winEl = (activeEl as HTMLElement).closest<HTMLElement>(`.${LIBRARY_NAME}-window`);\n\t\t\t\t\t\tif (winEl) {\n\t\t\t\t\t\t\tconst win = this.windows.get(winEl.id);\n\t\t\t\t\t\t\tif (win && this.activeWindow !== win) {\n\t\t\t\t\t\t\t\twin.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\ttrue\n\t\t);\n\n\t\t// ウィンドウ外クリックでblurさせる処理を追加\n\t\tthis.container!.addEventListener(\"pointerdown\", (e: PointerEvent) => {\n\t\t\t// クリックされたのがコンテナ自身（ウィンドウやその中身ではない）の場合\n\t\t\tif (e.target === this.container) {\n\t\t\t\tif (this.activeWindow) {\n\t\t\t\t\tconst active = this.activeWindow;\n\t\t\t\t\tthis.activeWindow = null; // 先にnullにしてからblurを呼ぶ\n\t\t\t\t\tactive.blur();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tdocument.addEventListener(\"click\", () => this.hideContextMenu());\n\n\t\twindow.addEventListener(\"message\", (event) => {\n\t\t\t// メッセージの形式を検証\n\t\t\tif (event.data && event.data.type === \"winlet:createWindow\" && typeof event.data.options === \"object\") {\n\t\t\t\t// メッセージの送信元が管理下のiframeか検証（セキュリティ対策）\n\t\t\t\tlet isSourceValid = false;\n\t\t\t\tlet sourceWindow: WinLetWindow | null = null;\n\t\t\t\tfor (const win of this.windows.values()) {\n\t\t\t\t\tconst iframe = win.el.querySelector(\"iframe\");\n\t\t\t\t\tif (iframe && iframe.contentWindow === event.source) {\n\t\t\t\t\t\tisSourceValid = true;\n\t\t\t\t\t\t// メッセージの送信元ウィンドウを特定\n\t\t\t\t\t\tsourceWindow = win;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (isSourceValid) {\n\t\t\t\t\t// 送信元ウィンドウ(sourceWindow)が存在すれば、それは親ウィンドウであり、\n\t\t\t\t\t// その中に新しいウィンドウを作成する。\n\t\t\t\t\tif (sourceWindow) {\n\t\t\t\t\t\t// iframeの親ウィンドウのcreateWindowを呼び出す\n\t\t\t\t\t\tsourceWindow.createWindow(event.data.options);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 通常のトップレベルでのウィンドウ作成\n\t\t\t\t\t\tthis.createWindow(event.data.options);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\"WinLet: Untrusted source attempted to create a window.\", event.origin);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis._isInitialized = true;\n\t\tthis.setupShortcutListeners();\n\n\t\t// タブ分離機能のためのグローバルなD&Dリスナー\n\t\tthis.container!.addEventListener(\"dragover\", (e) => {\n\t\t\tif (e.dataTransfer?.types.includes(\"application/winlet-tab\")) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t});\n\n\t\tthis.container!.addEventListener(\"drop\", (e) => {\n\t\t\t// ドロップ先がウィンドウやタブバーの中なら何もしない\n\t\t\tconst targetEl = e.target as HTMLElement;\n\t\t\tif (targetEl.closest(`.${LIBRARY_NAME}-window`)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\te.preventDefault();\n\n\t\t\tconst tabDataJSON = e.dataTransfer?.getData(\"application/winlet-tab\");\n\t\t\tconst sourceWindowId = e.dataTransfer?.getData(\"application/winlet-source-window-id\");\n\t\t\tconst sourceTabId = e.dataTransfer?.getData(\"text/plain\");\n\n\t\t\tif (tabDataJSON && sourceWindowId && sourceTabId) {\n\t\t\t\tconst sourceWindow = this.windows.get(sourceWindowId);\n\t\t\t\tif (!sourceWindow || !sourceWindow.options.tabOptions.detachable) return;\n\n\t\t\t\tconst tabData: TabItem = JSON.parse(tabDataJSON);\n\t\t\t\tconst newTab: TabItem = {\n\t\t\t\t\ttitle: tabData.title,\n\t\t\t\t\tcontent: tabData.content,\n\t\t\t\t};\n\n\t\t\t\tconst mergedWindowOptions = Utils.deepMerge(sourceWindow.options, {\n\t\t\t\t\ttabs: [newTab],\n\t\t\t\t\tx: e.clientX,\n\t\t\t\t\ty: e.clientY,\n\t\t\t\t\twidth: sourceWindow.getSize().width,\n\t\t\t\t\theight: sourceWindow.getSize().height,\n\t\t\t\t});\n\n\t\t\t\t// 新しいウィンドウを作成\n\t\t\t\tthis.createWindow(mergedWindowOptions);\n\n\t\t\t\t// 元のウィンドウからタブを削除\n\t\t\t\tsourceWindow.closeTab(parseInt(sourceTabId, 10));\n\t\t\t}\n\t\t});\n\t}\n\n\t// ショートカットキーのリスナーを統合\n\tprivate setupShortcutListeners() {\n\t\tdocument.addEventListener(\n\t\t\t\"keydown\",\n\t\t\t(e) => {\n\t\t\t\t// --- 1. グローバルショートカット (ウィンドウ切り替え) ---\n\t\t\t\tif (this.globalConfig.windowSwitchShortcut) {\n\t\t\t\t\tconst shortcut = this.parseShortcut(this.globalConfig.windowSwitchShortcut);\n\n\t\t\t\t\tif (e.key.toLowerCase() === shortcut.key.toLowerCase() && e.ctrlKey === shortcut.ctrl && e.altKey === shortcut.alt && e.shiftKey === shortcut.shift) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tconst windows = Array.from(this.windows.values());\n\n\t\t\t\t\t\tconst currentIndex = this.activeWindow ? windows.findIndex((w) => w === this.activeWindow) : -1;\n\t\t\t\t\t\tconst nextIndex = (currentIndex + 1) % windows.length;\n\n\t\t\t\t\t\tconst win = windows[nextIndex];\n\t\t\t\t\t\tif (win.state === \"minimized\") {\n\t\t\t\t\t\t\twin.restore();\n\t\t\t\t\t\t}\n\t\t\t\t\t\twin.focus();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// --- 2. ウィンドウ固有のショートカット ---\n\t\t\t\tconst targetWindow = this.activeWindow;\n\n\t\t\t\t// ターゲットウィンドウがなければ何もしない\n\t\t\t\tif (!targetWindow || !targetWindow.options.enableShortcuts) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// --- 3. タブ切り替えショートカット (Ctrl+Shift+[1-9]) ---\n\t\t\t\tif (e.ctrlKey && e.shiftKey && (targetWindow.options.tabs?.length ?? 0) > 0) {\n\t\t\t\t\t// Shiftキーの影響を受けない e.code で判定する\n\t\t\t\t\tif (e.code.startsWith(\"Digit\")) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\tconst keyNum = parseInt(e.code.replace(\"Digit\", \"\"), 10);\n\n\t\t\t\t\t\tconst tabs = targetWindow.getTabs();\n\t\t\t\t\t\tconst numTabs = tabs.length;\n\t\t\t\t\t\tlet tabIndex = -1;\n\n\t\t\t\t\t\tif (keyNum >= 1 && keyNum <= 8) {\n\t\t\t\t\t\t\ttabIndex = keyNum - 1;\n\t\t\t\t\t\t} else if (keyNum === 9) {\n\t\t\t\t\t\t\ttabIndex = numTabs - 1;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (tabIndex >= 0 && tabIndex < numTabs) {\n\t\t\t\t\t\t\ttargetWindow.activateTab(tabIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn; // 他のショートカットと重複しないようにreturn\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// --- 4. ショートカットキーを検索して実行 ---\n\t\t\t\tconst findAndExecShortcut = (menuItems: MenuItem[]) => {\n\t\t\t\t\tfor (const item of menuItems) {\n\t\t\t\t\t\tif (item.shortcut) {\n\t\t\t\t\t\t\tconst shortcut = this.parseShortcut(item.shortcut);\n\t\t\t\t\t\t\tif (e.key.toUpperCase() === shortcut.key.toUpperCase() && e.ctrlKey === shortcut.ctrl && e.altKey === shortcut.alt && e.shiftKey === shortcut.shift) {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\titem.action?.(targetWindow!);\n\t\t\t\t\t\t\t\treturn true; // 実行したら探索終了\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (item.items && findAndExecShortcut(item.items)) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t};\n\n\t\t\t\tfindAndExecShortcut(targetWindow.options.menu);\n\t\t\t},\n\t\t\t{ passive: false }\n\t\t);\n\t}\n\n\t// 未初期化の場合に自動でinitを呼び出すヘルパー\n\tprivate ensureInitialized(): void {\n\t\tif (!this._isInitialized) {\n\t\t\tthis.init();\n\t\t}\n\t}\n\n\t/**\n\t * スタイルシートを取得\n\t */\n\tprivate getStyleData() {\n\t\treturn styleData.replace(/\\$\\[(\\w+)\\]/g, (a, p) => {\n\t\t\tswitch (p) {\n\t\t\t\tcase \"prefix\":\n\t\t\t\t\treturn LIBRARY_NAME;\n\t\t\t}\n\t\t\treturn p;\n\t\t});\n\t}\n\n\tpublic createWindow(options: WindowOptions): WinLetWindow {\n\t\tthis.ensureInitialized();\n\n\t\tconst ifExists = options.ifExists ?? \"focus\";\n\n\t\tif (options.id && ifExists !== \"create\") {\n\t\t\tconst existingWindow = this.getWindow(options.id);\n\t\t\tif (existingWindow) {\n\t\t\t\tif (ifExists === \"prevent\") {\n\t\t\t\t\treturn existingWindow; // 何もせず既存インスタンスを返す\n\t\t\t\t}\n\t\t\t\tif (ifExists === \"focus\") {\n\t\t\t\t\tif (existingWindow.state === \"minimized\") {\n\t\t\t\t\t\texistingWindow.restore();\n\t\t\t\t\t}\n\t\t\t\t\texistingWindow.focus();\n\t\t\t\t\treturn existingWindow; // フォーカスして既存インスタンスを返す\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst creationOptions: Required<WindowOptions> = Utils.deepMerge(defaultConfig, options);\n\t\tif (creationOptions.x === \"auto\" || creationOptions.y === \"auto\") {\n\t\t\tconst winWidth = creationOptions.width;\n\t\t\tconst winHeight = creationOptions.height;\n\t\t\tconst containerRect = this.container!.getBoundingClientRect();\n\n\t\t\tlet nextX: number;\n\t\t\tlet nextY: number;\n\n\t\t\tif (this.lastAutoPosition === null) {\n\t\t\t\tnextX = 0;\n\t\t\t\tnextY = 0;\n\t\t\t} else {\n\t\t\t\t// 右下へカスケード\n\t\t\t\tnextX = this.lastAutoPosition.x + this.CASCADE_OFFSET;\n\t\t\t\tnextY = this.lastAutoPosition.y + this.CASCADE_OFFSET;\n\t\t\t}\n\n\t\t\t// はみ出しチェックとリセット\n\t\t\tif (nextX + winWidth > containerRect.width) {\n\t\t\t\tnextX = 0;\n\t\t\t}\n\t\t\tif (nextY + winHeight > containerRect.height) {\n\t\t\t\tnextY = 0;\n\t\t\t}\n\n\t\t\t// 計算結果をオプションに反映\n\t\t\tcreationOptions.x = nextX;\n\t\t\tcreationOptions.y = nextY;\n\n\t\t\t// 次回のために位置を保存\n\t\t\tthis.lastAutoPosition = { x: nextX, y: nextY };\n\t\t}\n\n\t\tconst win = new WinLetWindow(creationOptions, this);\n\t\tthis.windows.set(win.id, win);\n\t\tWindowManager.allWindows.set(win.id, win);\n\t\tthis.container!.appendChild(win.el);\n\n\t\twin.setPosition(creationOptions.x, creationOptions.y);\n\t\tif (creationOptions.focus) {\n\t\t\tthis.focusWindow(win);\n\t\t\twin.focus();\n\t\t} else {\n\t\t\t// フォーカスしない場合でも、z-indexの管理は必要\n\t\t\twin.el.style.zIndex = `${++this.zIndexCounter}`;\n\t\t}\n\t\treturn win;\n\t}\n\n\tpublic popup(options: PopupOptions): WinLetWindow {\n\t\tthis.ensureInitialized();\n\t\tlet buttons: PopupButton[];\n\t\tconst buttonPresets: { [key in PopupButtonPreset]: PopupButton[] } = {\n\t\t\tOk: [{ text: \"OK\", value: 1 }],\n\t\t\tOkCancel: [\n\t\t\t\t{ text: \"OK\", value: 1 },\n\t\t\t\t{ text: \"Cancel\", value: 2 },\n\t\t\t],\n\t\t\tYes: [{ text: \"Yes\", value: 6 }],\n\t\t\tYesNo: [\n\t\t\t\t{ text: \"Yes\", value: 6 },\n\t\t\t\t{ text: \"No\", value: 7 },\n\t\t\t],\n\t\t\tYesNoCancel: [\n\t\t\t\t{ text: \"Yes\", value: 6 },\n\t\t\t\t{ text: \"No\", value: 7 },\n\t\t\t\t{ text: \"Cancel\", value: 2 },\n\t\t\t],\n\t\t\tRetry: [{ text: \"Retry\", value: 4 }],\n\t\t\tRetryCancel: [\n\t\t\t\t{ text: \"Retry\", value: 4 },\n\t\t\t\t{ text: \"Cancel\", value: 2 },\n\t\t\t],\n\t\t\tAbortRetryIgnore: [\n\t\t\t\t{ text: \"Abort\", value: 3 },\n\t\t\t\t{ text: \"Retry\", value: 4 },\n\t\t\t\t{ text: \"Ignore\", value: 5 },\n\t\t\t],\n\t\t};\n\t\tif (Array.isArray(options.buttons)) {\n\t\t\tbuttons = options.buttons;\n\t\t} else {\n\t\t\tbuttons = buttonPresets[options.buttons || \"Ok\"] || buttonPresets.Ok;\n\t\t}\n\n\t\tlet timeoutId: number | null = null;\n\t\tconst closeCallback = (result: PopupResult) => {\n\t\t\tif (timeoutId) clearTimeout(timeoutId);\n\t\t\ttimeoutId = null;\n\t\t\toptions.onClose?.(result);\n\t\t};\n\n\t\tconst messageHTML = `<div class=\"${LIBRARY_NAME}-popup-message\">${Utils.sanitizeHTML(options.message)}</div>`;\n\t\tconst buttonsHTML = buttons.map((btn, index) => `<input class=\"${LIBRARY_NAME}-popup-button\" data-index=\"${index}\" type=\"button\" value=\"${Utils.sanitizeHTML(btn.text)}\"/>`).join(\"\");\n\t\tconst contentHTML = `${messageHTML}<div class=\"${LIBRARY_NAME}-popup-buttons\">${buttonsHTML}</div>`;\n\n\t\tconst winOptions: WindowOptions = {\n\t\t\tid: `popup-${Utils.generateId()}`,\n\t\t\ttitle: options.title || \"\",\n\t\t\ticon: options.icon,\n\t\t\tresizableX: false,\n\t\t\tresizableY: false,\n\t\t\tmovable: true,\n\t\t\tclosable: true,\n\t\t\tminimizable: false,\n\t\t\tmaximizable: false,\n\t\t\tmaximizableOnDblClick: false,\n\t\t\tenableShortcuts: false,\n\t\t\tcontent: { html: contentHTML },\n\t\t\tfocus: options.focus,\n\t\t\t_isPopup: true,\n\t\t};\n\t\tif (options.onFocus) winOptions.onFocus = options.onFocus;\n\t\tif (options.onBlur) winOptions.onBlur = options.onBlur;\n\n\t\tif (options.autoWidth) {\n\t\t\tconst temp = document.createElement(\"span\");\n\t\t\ttemp.style.visibility = \"hidden\";\n\t\t\ttemp.style.position = \"absolute\";\n\t\t\ttemp.style.whiteSpace = \"pre\";\n\t\t\ttemp.className = `${LIBRARY_NAME}-popup-message`;\n\t\t\ttemp.innerHTML = Utils.sanitizeHTML(options.message);\n\t\t\tthis.container?.appendChild(temp);\n\t\t\twinOptions.width = temp.offsetWidth + 80; // メッセージ幅 + パディング\n\t\t\tthis.container?.removeChild(temp);\n\t\t} else {\n\t\t\twinOptions.width = 300;\n\t\t}\n\t\twinOptions.height = 150;\n\n\t\twinOptions.x = \"center\";\n\t\twinOptions.y = \"center\";\n\n\t\tconst win = this.createWindow(winOptions);\n\t\t// 計算が面倒なので前回1回分のみで判断\n\t\tlet winPosition = win.getPosition();\n\t\tif (this.lastPopupPosition && this.lastPopupPosition.x === winPosition.x && this.lastPopupPosition.y === winPosition.y) {\n\t\t\twin.setPosition(this.lastPopupPosition.x + this.CASCADE_OFFSET, this.lastPopupPosition.y + this.CASCADE_OFFSET);\n\t\t\twinPosition = win.getPosition();\n\t\t}\n\t\tthis.lastPopupPosition = winPosition;\n\t\twin.popupCloseCallback = closeCallback;\n\n\t\twin.el.querySelectorAll<HTMLButtonElement>(`.${LIBRARY_NAME}-popup-button`).forEach((button) => {\n\t\t\tbutton.addEventListener(\"click\", () => {\n\t\t\t\tconst index = parseInt(button.dataset.index!, 10);\n\t\t\t\tconst result = buttons[index].value;\n\t\t\t\tcloseCallback(result);\n\t\t\t\twin.close();\n\t\t\t});\n\t\t});\n\n\t\tif (options.timeout && options.timeout > 0) {\n\t\t\ttimeoutId = window.setTimeout(() => {\n\t\t\t\tif (this.windows.has(win.id)) {\n\t\t\t\t\tcloseCallback(TIMEOUT_RESULT);\n\t\t\t\t\twin.close();\n\t\t\t\t}\n\t\t\t}, options.timeout);\n\t\t}\n\t\treturn win;\n\t}\n\n\tpublic destroyWindow(id: string): void {\n\t\tthis.ensureInitialized();\n\t\tconst win = this.windows.get(id);\n\t\tif (win) {\n\t\t\twin.el.remove();\n\t\t\tthis.windows.delete(id);\n\t\t\tWindowManager.allWindows.delete(id);\n\t\t\tif (this.activeWindow === win) {\n\t\t\t\tthis.activeWindow = null;\n\t\t\t\tconst nextWin = Array.from(this.windows.values()).pop();\n\t\t\t\tif (nextWin) this.focusWindow(nextWin);\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic focusWindow(win: WinLetWindow): void {\n\t\tthis.ensureInitialized();\n\t\tif (this.activeWindow === win) return;\n\n\t\t// 自身が管理する他のウィンドウをぼかす\n\t\tthis.activeWindow?.blur();\n\t\tthis.activeWindow = win;\n\t\twin.el.style.zIndex = `${++this.zIndexCounter}`;\n\t\t// focus()はWindowクラス側で呼ばれるので不要\n\t}\n\n\tpublic getWindow(id: string): WinLetWindow | undefined {\n\t\tthis.ensureInitialized();\n\t\treturn this.windows.get(id);\n\t}\n\n\tpublic getWindowFromElement(element: HTMLElement): WinLetWindow | undefined {\n\t\tthis.ensureInitialized();\n\t\tconst winEl = element.closest<HTMLElement>(`.${LIBRARY_NAME}-window`);\n\t\tif (winEl?.id) {\n\t\t\treturn WindowManager.allWindows.get(winEl.id);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tpublic getActiveWindow(): WinLetWindow | null {\n\t\tthis.ensureInitialized();\n\t\treturn this.activeWindow;\n\t}\n\n\tpublic onTabDragStart(sourceWindowId: string): void {\n\t\tthis.container?.classList.add(`${LIBRARY_NAME}-is-tab-dragging`);\n\t\tthis.draggingTabInfo = { sourceWindowId };\n\t}\n\n\tpublic onTabDragEnd(): void {\n\t\tthis.container?.classList.remove(`${LIBRARY_NAME}-is-tab-dragging`);\n\t\tthis.draggingTabInfo = null;\n\t}\n\n\tpublic showContextMenu(x: number, y: number, menuItems: ContextMenuItem[], contextWindow: IWindow): void {\n\t\tthis.ensureInitialized();\n\t\tthis.hideContextMenu();\n\n\t\tthis.contextMenuEl = document.createElement(\"ul\");\n\t\tthis.contextMenuEl.className = `${LIBRARY_NAME}-context-menu`;\n\n\t\tmenuItems.forEach((itemData) => {\n\t\t\tconst itemEl = document.createElement(\"li\");\n\t\t\tif (itemData.separator) {\n\t\t\t\titemEl.className = \"separator\";\n\t\t\t} else {\n\t\t\t\titemEl.textContent = itemData.name ?? \"\";\n\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\titemData.action?.(contextWindow);\n\t\t\t\t\tthis.hideContextMenu();\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.contextMenuEl!.appendChild(itemEl);\n\t\t});\n\n\t\tthis.container!.appendChild(this.contextMenuEl);\n\n\t\tconst { offsetWidth: menuWidth, offsetHeight: menuHeight } = this.contextMenuEl;\n\t\tconst { innerWidth: screenWidth, innerHeight: screenHeight } = window;\n\n\t\tthis.contextMenuEl.style.left = x + menuWidth > screenWidth ? `${screenWidth - menuWidth}px` : `${x}px`;\n\t\tthis.contextMenuEl.style.top = y + menuHeight > screenHeight ? `${screenHeight - menuHeight}px` : `${y}px`;\n\t}\n\n\tpublic hideContextMenu(): void {\n\t\tthis.contextMenuEl?.remove();\n\t\tthis.contextMenuEl = null;\n\t}\n\n\t/**\n\t * ショートカット文字列を解析し、修飾キーと主キーのオブジェクトを返す\n\t * @param shortcut - \"Ctrl+Shift+K\"のような文字列\n\t */\n\tprivate parseShortcut(shortcut: string): { ctrl: boolean; alt: boolean; shift: boolean; key: string } {\n\t\tconst keys = shortcut.split(\"+\");\n\t\tconst key = keys.pop() || \"\"; // 主キーを配列から取り出す\n\t\tconst ctrl = keys.includes(\"Ctrl\");\n\t\tconst alt = keys.includes(\"Alt\");\n\t\tconst shift = keys.includes(\"Shift\");\n\t\treturn { ctrl, alt, shift, key };\n\t}\n}\n",
    "// src/index.ts\n\nimport { defaultConfig } from \"./const/config\";\nimport { CLOSE_BUTTON_RESULT, GlobalConfigOptions, IWindow, PopupOptions, TIMEOUT_RESULT, WindowOptions, WinLetApi } from \"./const/types\";\nimport WindowManager from \"./function/window_manager\";\nimport Utils from \"./libs/utils\";\nimport { LIB_VERSION } from \"./version\";\n\nconst selfUrl = (document?.currentScript as HTMLScriptElement)?.src || \"\";\n\nconst globalConfig: GlobalConfigOptions = {\n\twindowSwitchShortcut: \"Ctrl+`\", // デフォルトショートカット（バッククォート）\n\tlibraryPath: selfUrl,\n};\n\n// シングルトンインスタンス\nconst manager = new WindowManager(globalConfig);\n\n// 公開するAPI\nconst api: WinLetApi = {\n\t/**\n\t * ライブラリを初期化します。DOMの準備ができた後に呼び出してください。\n\t * (例: document.addEventListener('DOMContentLoaded', WinLet.init);)\n\t *\n\t * @param options - グローバル設定。コンテナ要素などを指定できます。\n\t */\n\tinit: (options: GlobalConfigOptions = {}): void => {\n\t\tapi.setGlobalConfig(options);\n\t\tmanager.init();\n\t},\n\n\t/**\n\t * 新しいウィンドウを作成\n\t */\n\tcreateWindow: (options: WindowOptions = {}): IWindow => {\n\t\treturn manager.createWindow(options);\n\t},\n\n\t/**\n\t * 新しいポップアップウィンドウを作成\n\t */\n\tcreatePopup: (options: PopupOptions): IWindow => {\n\t\treturn manager.popup(options);\n\t},\n\n\t/**\n\t * ウィンドウを取得\n\t */\n\tgetWindow: (id: string): IWindow | undefined => {\n\t\treturn manager.getWindow(id);\n\t},\n\n\t/**\n\t * 指定されたDOM要素を内包するウィンドウインスタンスを取得します。\n\t */\n\tgetWindowFromElement: (element: HTMLElement): IWindow | undefined => {\n\t\treturn manager.getWindowFromElement(element);\n\t},\n\n\t/**\n\t * アクティブなウィンドウを取得\n\t */\n\tgetActiveWindow: (): IWindow | null => {\n\t\treturn manager.getActiveWindow();\n\t},\n\n\t/**\n\t * デフォルトのウィンドウ設定を変更\n\t */\n\tsetDefaultConfig: (options: WindowOptions): void => {\n\t\tUtils.deepMerge(defaultConfig, options);\n\t},\n\n\t/**\n\t * グローバル設定を変更\n\t */\n\tsetGlobalConfig: (options: GlobalConfigOptions): void => {\n\t\t// 初期化後にコンテナを変更しようとした場合は警告を出す\n\t\tif (manager.isInitialized && options.container) {\n\t\t\tconsole.warn(\"WinLet: The container cannot be changed after initialization.\");\n\t\t\tdelete options.container;\n\t\t}\n\t\tObject.assign(globalConfig, options);\n\t\tmanager.applyGlobalConfig(globalConfig);\n\t},\n\n\t/**\n\t * ライブラリのバージョンを取得\n\t */\n\tget version() {\n\t\treturn LIB_VERSION;\n\t},\n\n\t/**\n\t * ポップアップウィンドウのタイムアウト結果\n\t */\n\tPOPUP_TIMEOUT_RESULT: TIMEOUT_RESULT,\n\t/**\n\t * ポップアップウィンドウの閉じるボタンの結果\n\t */\n\tPOPUP_CLOSE_BUTTON_RESULT: CLOSE_BUTTON_RESULT,\n};\n\n// グローバルスコープにAPIをアタッチ\nif (typeof window !== \"undefined\") {\n\twindow.WinLet = api;\n}\n\n// モジュールとしてエクスポートも可能\nexport default api;\n",
    "export default class WinLetBaseClass {}\n",
    "import WinLetBaseClass from \"./baseclass\";\n\nexport default class Utils extends WinLetBaseClass {\n\t/**\n\t * ユニークなIDを生成します。\n\t * @param prefix - IDのプレフィックス\n\t * @returns 生成されたID\n\t */\n\tpublic static generateId(prefix: string = \"win\"): string {\n\t\treturn `${prefix}-${Math.random().toString(36).substring(2, 9)}`;\n\t}\n\n\t/**\n\t * オブジェクトをディープマージします。\n\t */\n\tpublic static deepMerge<T extends object, U extends object>(target: T, source: U): T & U {\n\t\tconst output = { ...target } as T & U;\n\n\t\tfor (const key in source) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(source, key)) {\n\t\t\t\tconst sourceValue = source[key];\n\t\t\t\tconst targetValue = (target as any)[key];\n\n\t\t\t\tif (Array.isArray(sourceValue)) {\n\t\t\t\t\t// ソースの値が配列の場合は、そのまま上書きする\n\t\t\t\t\t(output as any)[key] = sourceValue;\n\t\t\t\t} else if (sourceValue instanceof Object && typeof sourceValue !== \"function\" && targetValue instanceof Object) {\n\t\t\t\t\t(output as any)[key] = this.deepMerge(targetValue, sourceValue);\n\t\t\t\t} else {\n\t\t\t\t\t(output as any)[key] = sourceValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t/**\n\t * オブジェクトが空でないかとどうかを判定します。\n\t * @param obj - 判定するオブジェクト\n\t * @returns オブジェクトが空である場合はfalse、そうでない場合はtrue\n\t */\n\tpublic static isNonEmptyObject<T extends object>(obj: T | undefined): obj is T & Record<string | symbol, unknown> {\n\t\tif (!obj) return false;\n\t\tfor (const _ in obj) return true;\n\t\treturn false;\n\t}\n\n\t/**\n\t * HTML文字列をサニタイズします。\n\t * @param str - サニタイズする文字列\n\t * @returns サニタイズされたHTML文字列\n\t */\n\tpublic static sanitizeHTML(str: string): string {\n\t\tconst temp = document.createElement(\"div\");\n\t\ttemp.textContent = str;\n\t\treturn temp.innerHTML;\n\t}\n}\n",
    "const styleData: string = `\n:root {\n    --$[prefix]-bg: #f0f0f0;\n    --$[prefix]-border: #a0a0a0;\n    --$[prefix]-title-bar-height: 32px;\n    --$[prefix]-title-bar-bg: #e0e0e0;\n    --$[prefix]-title-bar-active-bg: #0078d7;\n    --$[prefix]-title-text-color: #000;\n    --$[prefix]-title-text-active-color: #fff;\n    --$[prefix]-control-bg: #d0d0d0;\n    --$[prefix]-control-hover-bg: #e5e5e5;\n    --$[prefix]-control-close-hover-bg: #e81123;\n    --$[prefix]-control-close-hover-color: #fff;\n    --$[prefix]-menu-bg: #fff;\n    --$[prefix]-menu-border: #ccc;\n    --$[prefix]-menu-item-color: #000;\n    --$[prefix]-menu-item-hover-bg: #0078d7;\n    --$[prefix]-menu-item-hover-color: #fff;\n    --$[prefix]-tab-bg: #dcdcdc;\n    --$[prefix]-tab-active-bg: #f0f0f0;\n    --$[prefix]-tab-border: #b0b0b0;\n    --$[prefix]-resize-handle-size: 8px;\n    --$[prefix]-resize-handle-offset: -4px;\n}\n\n.$[prefix]-us-none {\n    user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n}\n\n.$[prefix]-us-auto {\n    user-select: auto;\n    -webkit-user-select: auto;\n    -ms-user-select: auto;\n}\n\n\n.$[prefix]-container {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n    overflow: hidden;\n    z-index: 999;\n}\n\n.$[prefix]-container.$[prefix]-is-nested {\n    position: absolute;\n}\n\n.$[prefix]-container.$[prefix]-is-tab-dragging {\n    pointer-events: auto;\n}\n\n.$[prefix]-window {\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    min-width: 200px;\n    min-height: 150px;\n    border: 1px solid var(--$[prefix]-border);\n    background-color: var(--$[prefix]-bg);\n    box-shadow: 0 5px 15px rgba(0,0,0,0.3);\n    border-radius: 5px;\n    overflow: hidden;\n    pointer-events: all;\n    transition: opacity 0.1s, transform 0.1s;\n    touch-action: none;\n}\n\n.$[prefix]-window.minimized {\n    display: none;\n}\n\n.$[prefix]-window.maximized {\n    border-radius: 0;\n    border: none;\n}\n\n.$[prefix]-window.maximized > .$[prefix]-resize-handle {\n    display: none;\n}\n\n/* Focus State */\n.$[prefix]-window.active .$[prefix]-title-bar {\n    background-color: var(--$[prefix]-title-bar-active-bg);\n    color: var(--$[prefix]-title-text-active-color);\n}\n.$[prefix]-window.active .$[prefix]-title-bar .$[prefix]-title {\n    color: var(--$[prefix]-title-text-active-color);\n}\n\n.$[prefix]-title-bar {\n    display: flex;\n    align-items: center;\n    height: var(--$[prefix]-title-bar-height);\n    background-color: var(--$[prefix]-title-bar-bg);\n    color: var(--$[prefix]-title-text-color);\n    cursor: move;\n    flex-shrink: 0;\n    touch-action: none;\n}\n\n.$[prefix]-title-bar.controls-left {\n    flex-direction: row-reverse;\n}\n\n.$[prefix]-icon {\n    min-width: calc(var(--$[prefix]-title-bar-height) * 0.75);\n    height: calc(var(--$[prefix]-title-bar-height) * 0.75);\n    margin: 0 4px;\n    pointer-events: none;\n    flex-shrink: 0;\n}\n\n.$[prefix]-icon:empty {\n    display: none;\n}\n\n.$[prefix]-icon i {\n    font-size: calc(var(--$[prefix]-title-bar-height) * 0.5);\n    line-height: calc(var(--$[prefix]-title-bar-height) * 0.75);\n    text-align: center;\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n.$[prefix]-icon img {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n.$[prefix]-title {\n    flex-grow: 1;\n    padding: 0 8px;\n    font-family: sans-serif;\n    font-size: calc(var(--$[prefix]-title-bar-height) * 0.44);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    pointer-events: none;\n}\n\n.$[prefix]-title-bar.controls-left .$[prefix]-title {\n    text-align: right;\n}\n\n.$[prefix]-controls {\n    display: flex;\n    height: 100%;\n    margin-left: auto;\n    flex-shrink: 0;\n}\n\n.$[prefix]-title-bar.controls-left .$[prefix]-controls {\n    margin-left: 0;\n    margin-right: auto;\n    flex-direction: row-reverse;\n}\n\n.$[prefix]-control-btn {\n    width: calc(var(--$[prefix]-title-bar-height) * 1.3);\n    height: 100%;\n    border: none;\n    box-sizing: border-box;\n    background-color: transparent;\n    font-size: calc(var(--$[prefix]-title-bar-height) * 0.5);\n    cursor: pointer;\n    text-align: center;\n    vertical-align: middle;\n    font-family: sans-serif;\n    transition: background-color 0.2s;\n    touch-action: auto;\n}\n\n.$[prefix]-control-btn:hover {\n    background-color: var(--$[prefix]-control-hover-bg);\n}\n\n.$[prefix]-control-btn.$[prefix]-close-btn:hover {\n    background-color: var(--$[prefix]-control-close-hover-bg);\n    color: var(--$[prefix]-control-close-hover-color);\n}\n\n.$[prefix]-main-content {\n    all: initial;\n    display:flex;\n    flex-direction:column;\n    flex-grow:1;\n    overflow:hidden;\n}\n\n.$[prefix]-menu-bar {\n    color: var(--$[prefix]-menu-item-color);\n    display: flex;\n    background-color: var(--$[prefix]-bg);\n    padding: 2px;\n    flex-shrink: 0;\n    border-bottom: 1px solid var(--$[prefix]-border);\n    touch-action: auto;\n}\n\n.$[prefix]-menu-item {\n    font-family: sans-serif;\n    font-size: 14px;\n    padding: 4px 8px;\n    cursor: default;\n    position: relative;\n}\n\n.$[prefix]-menu-item:hover {\n    background-color: var(--$[prefix]-menu-item-hover-bg);\n    color: var(--$[prefix]-menu-item-hover-color);\n}\n\n.$[prefix]-menu-dropdown {\n    color: var(--$[prefix]-menu-item-color);\n    line-height: 1.6em;\n    display: none;\n    position: absolute;\n    top: 100%;\n    left: 0;\n    background-color: var(--$[prefix]-menu-bg);\n    border: 1px solid var(--$[prefix]-menu-border);\n    box-shadow: 0 2px 8px rgba(0,0,0,0.15);\n    list-style: none;\n    margin: 0;\n    padding: 4px 0;\n    min-width: 150px;\n    z-index: 10;\n    touch-action: auto;\n}\n\n.$[prefix]-menu-dropdown li {\n    padding: 0 20px;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.$[prefix]-menu-dropdown li:hover {\n    background-color: var(--$[prefix]-menu-item-hover-bg);\n    color: var(--$[prefix]-menu-item-hover-color);\n}\n\n.$[prefix]-menu-dropdown li.separator {\n    height: 1px;\n    background-color: var(--$[prefix]-menu-border);\n    margin: 4px 0;\n    padding: 0;\n}\n\n.$[prefix]-menu-dropdown-item {\n    display: flex;\n    flex-wrap: nowrap;\n    justify-content: space-between;\n    width: 100%;\n    white-space: nowrap;\n}\n\n/* --- メニュー --- */\n/* サブメニューを持つ項目のスタイル */\n.$[prefix]-menu-dropdown li.has-submenu {\n    position: relative;\n}\n.$[prefix]-menu-dropdown li.has-submenu::after {\n    content: '▶';\n    position: absolute;\n    top: 50%;\n    right: 10px;\n    margin-top: -0.65em;\n    font-size: 0.8em;\n    color: inherit;\n}\n\n/* ネストされたサブメニューの表示位置 */\n.$[prefix]-menu-dropdown li.has-submenu > .$[prefix]-menu-dropdown {\n    top: -5px; /* liのpaddingを考慮 */\n    left: 100%;\n}\n\n/* サブメニューはホバーで開く */\n.$[prefix]-menu-dropdown li.has-submenu:hover > .$[prefix]-menu-dropdown {\n    display: block;\n}\n\n/* ショートカットキーテキストのスタイル */\n.$[prefix]-shortcut-text {\n    color: #666;\n    margin-left: 1em;\n}\n.$[prefix]-menu-dropdown li:hover .$[prefix]-shortcut-text {\n    color: inherit;\n}\n\n/* --- タブ --- */\n.$[prefix]-tab-bar {\n    color: var(--$[prefix]-menu-item-color);\n    overflow-x: auto;\n    overflow-y: hidden;\n    -ms-overflow-style: -ms-autohiding-scrollbar;\n    scrollbar-width: thin;\n    display: flex;\n    background-color: #e1e1e1;\n    flex-shrink: 0;\n    align-items: flex-end;\n    touch-action: auto;\n}\n\n.$[prefix]-tab-bar::-webkit-scrollbar{\n    width: 6px;\n    height: 6px;\n}\n\n.$[prefix]-tab-bar::-webkit-scrollbar-thumb {\n    background-color: rgba(100, 100, 100, 0.5);\n    border-radius: 3px;\n}\n\n.$[prefix]-tab-bar::-webkit-scrollbar-track {\n    background-color: transparent;\n}\n\n.$[prefix]-tab {\n    white-space: nowrap;\n    padding: 8px 16px;\n    font-family: sans-serif;\n    font-size: 14px;\n    cursor: pointer;\n    border-right: 1px solid var(--$[prefix]-tab-border);\n    background-color: var(--$[prefix]-tab-bg);\n}\n\n.$[prefix]-tab.active {\n    background-color: var(--$[prefix]-tab-active-bg);\n    border-bottom: 2px solid var(--$[prefix]-title-bar-active-bg);\n}\n\n.$[prefix]-tab.active .$[prefix]-tab-close-btn:hover {\n    background-color: #ddd;\n}\n\n/* ドラッグ中のタブのスタイル */\n.$[prefix]-tab.dragging {\n    opacity: 0.5;\n}\n/* タブの閉じるボタン */\n.$[prefix]-tab-close-btn {\n    margin-left: 8px;\n    padding: 0 4px;\n    border-radius: 50%;\n    cursor: pointer;\n    font-weight: bold;\n    font-size: 14px;\n    line-height: 1;\n}\n.$[prefix]-tab-close-btn:hover {\n    background-color: #ccc;\n}\n\n.$[prefix]-tab-content {\n    display: none;\n}\n\n.$[prefix]-tab-content.active {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n/* タブ追加ボタン */\n.$[prefix]-tab-add-btn {\n    padding: 8px;\n    font-size: 14px;\n    cursor: pointer;\n    border-bottom: 1px solid var(--$[prefix]-tab-border);\n}\n.$[prefix]-tab-add-btn:hover {\n    background-color: #e0e0e0;\n}\n\n.$[prefix]-content {\n    flex-grow: 1;\n    position: relative;\n    overflow: auto;\n    touch-action: auto;\n}\n\n.$[prefix]-content iframe {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    border: none;\n}\n\n.$[prefix]-resize-handle {\n    position: absolute;\n    z-index: 5;\n    touch-action: none;\n}\n\n.$[prefix]-resize-handle.n { top: var(--$[prefix]-resize-handle-offset); left: 0; right: 0; height: var(--$[prefix]-resize-handle-size); cursor: n-resize; }\n.$[prefix]-resize-handle.s { bottom: var(--$[prefix]-resize-handle-offset); left: 0; right: 0; height: var(--$[prefix]-resize-handle-size); cursor: s-resize; }\n.$[prefix]-resize-handle.w { top: 0; bottom: 0; left: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); cursor: w-resize; }\n.$[prefix]-resize-handle.e { top: 0; bottom: 0; right: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); cursor: e-resize; }\n.$[prefix]-resize-handle.nw { top: var(--$[prefix]-resize-handle-offset); left: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); height: var(--$[prefix]-resize-handle-size); cursor: nw-resize; }\n.$[prefix]-resize-handle.ne { top: var(--$[prefix]-resize-handle-offset); right: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); height: var(--$[prefix]-resize-handle-size); cursor: ne-resize; }\n.$[prefix]-resize-handle.sw { bottom: var(--$[prefix]-resize-handle-offset); left: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); height: var(--$[prefix]-resize-handle-size); cursor: sw-resize; }\n.$[prefix]-resize-handle.se { bottom: var(--$[prefix]-resize-handle-offset); right: var(--$[prefix]-resize-handle-offset); width: var(--$[prefix]-resize-handle-size); height: var(--$[prefix]-resize-handle-size); cursor: se-resize; }\n\n.$[prefix]-context-menu {\n    color: var(--$[prefix]-menu-item-color);\n    pointer-events: all;\n    position: fixed;\n    z-index: 10000;\n    background-color: var(--$[prefix]-menu-bg);\n    border: 1px solid var(--$[prefix]-menu-border);\n    box-shadow: 0 2px 8px rgba(0,0,0,0.15);\n    list-style: none;\n    margin: 0;\n    padding: 4px 0;\n    min-width: 160px;\n}\n.$[prefix]-context-menu li {\n    padding: 6px 24px;\n    font-family: sans-serif;\n    font-size: 14px;\n    cursor: pointer;\n}\n.$[prefix]-context-menu li:hover {\n    background-color: var(--$[prefix]-menu-item-hover-bg);\n    color: var(--$[prefix]-menu-item-hover-color);\n}\n.$[prefix]-context-menu li.separator {\n    height: 1px;\n    background-color: var(--$[prefix]-menu-border);\n    margin: 4px 0;\n    padding: 0;\n}\n\n/* --- Popup Styles --- */\n.$[prefix]-popup-window .$[prefix]-content {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    padding: 20px;\n    box-sizing: border-box;\n}\n.$[prefix]-popup-message {\n    font-family: sans-serif;\n    font-size: 14px;\n    line-height: 1.5;\n    flex-grow: 1;\n    word-wrap: break-word;\n}\n.$[prefix]-popup-buttons {\n    display: flex;\n    justify-content: flex-end;\n    gap: 10px;\n    margin-top: 20px;\n    flex-shrink: 0;\n    touch-action: auto;\n}\n.$[prefix]-popup-button {\n    min-width: 80px;\n    padding: 8px 12px;\n    margin: 0;\n    border: 1px solid #ccc;\n    border-radius: 3px;\n    background-color: #f0f0f0;\n    cursor: pointer;\n    font-size: 14px;\n    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.15);\n}\n.$[prefix]-popup-button:hover {\n    border-color: #bbb;\n    background-color: #e9e9e9;\n}\n.$[prefix]-popup-button:active {\n    background-color: #dcdcdc;\n}\n\n/* --- Merged Menu/Tab Styles --- */\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-title-bar,\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-title-bar {\n    height: auto;\n    align-items: flex-end;\n    padding: 0;\n}\n.$[prefix]-window.$[prefix]-tab-style-merged.$[prefix]-window.active .$[prefix]-title-bar {\n    background-color: var(--$[prefix]-title-bar-bg);\n}\n\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-icon {\n    margin-block: auto;\n}\n\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-title {\n    display: none;\n}\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-title {\n    flex-grow: 1;\n    margin-block: auto;\n}\n\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-menu-bar {\n    border-bottom: none;\n    background: transparent;\n    padding: 0 6px;\n    align-self: center;\n}\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-menu-item {\n    line-height: var(--$[prefix]-title-bar-height);\n    padding-top: 0;\n    padding-bottom: 0;\n}\n\n.$[prefix]-window.$[prefix]-menu-style-merged.active:not(.$[prefix]-tab-style-merged) .$[prefix]-menu-item {\n    color: var(--winlet-menu-item-hover-color);\n}\n.$[prefix]-window.$[prefix]-menu-style-merged.active:not(.$[prefix]-tab-style-merged) .$[prefix]-menu-item:hover {\n    background-color: var(--$[prefix]-title-bar-bg);\n    color: var(--$[prefix]-menu-item-color);\n}\n\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab-bar {\n    background-color: transparent;\n    flex-grow: 1;\n    flex-shrink: 1;\n    min-width: 0;\n    align-items: flex-end;\n    height: calc(var(--$[prefix]-title-bar-height) + 4px);\n    margin: 0;\n    order: 1; /* controlsより前に配置 */\n}\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab-bar {\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n}\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab-bar::-webkit-scrollbar{\n    width: 0px;\n    height: 0px;\n}\n\n.$[prefix]-window.$[prefix]-title-bar.controls-left .$[prefix]-tab-bar {\n    order: -1;\n}\n\n\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab {\n    border: 1px solid var(--$[prefix]-border);\n    border-bottom: none;\n    border-radius: 6px 6px 0 0;\n    margin-top: 4px;\n    margin-left: -1px;\n    position: relative;\n    bottom: -1px;\n}\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab.active {\n    background-color: var(--$[prefix]-bg);\n    border-color: var(--$[prefix]-border);\n    border-bottom: 1px solid var(--$[prefix]-bg);\n    z-index: 2;\n}\n\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-tab-add-btn {\n    border: none;\n    align-self: center;\n}\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-main-content {\n    border-top: none;\n}\n.$[prefix]-window.$[prefix]-tab-style-merged .$[prefix]-controls,\n.$[prefix]-window.$[prefix]-menu-style-merged .$[prefix]-controls {\n    align-self: flex-start;\n    order: 2;\n}\n\n/* --- Mobile / Touch Device Adjustments --- */\n@media (pointer: coarse), (max-width: 768px) {\n    :root {\n        --$[prefix]-resize-handle-size: 16px;\n        --$[prefix]-resize-handle-offset: -8px;\n    }\n    .$[prefix]-control-btn {\n        width: calc(var(--$[prefix]-title-bar-height) * 1.5);\n    }\n}\n`;\n\nexport default styleData;\n",
    "// このファイルは自動生成されます\nexport const LIB_VERSION = \"v1.0.1.1\";\n"
  ]
}